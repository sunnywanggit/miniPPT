{"version":3,"sources":["js/reveal.js","../../../../../.config/yarn/global/node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["root","factory","define","amd","Reveal","exports","module","VERSION","SLIDES_SELECTOR","HORIZONTAL_SLIDES_SELECTOR","VERTICAL_SLIDES_SELECTOR","HOME_SLIDE_SELECTOR","UA","navigator","userAgent","POST_MESSAGE_METHOD_BLACKLIST","config","width","height","margin","minScale","maxScale","controls","controlsTutorial","controlsLayout","controlsBackArrows","progress","slideNumber","showSlideNumber","hashOneBasedIndex","hash","history","keyboard","keyboardCondition","overview","disableLayout","center","touch","loop","rtl","navigationMode","shuffle","fragments","fragmentInURL","embedded","help","pause","showNotes","autoPlayMedia","preloadIframes","autoSlide","autoSlideStoppable","autoSlideMethod","defaultTiming","mouseWheel","rollingLinks","hideAddressBar","previewLinks","postMessage","postMessageEvents","focusBodyOnPageVisibilityChange","transition","transitionSpeed","backgroundTransition","parallaxBackgroundImage","parallaxBackgroundSize","parallaxBackgroundRepeat","parallaxBackgroundPosition","parallaxBackgroundHorizontal","parallaxBackgroundVertical","pdfMaxPagesPerSlide","Number","POSITIVE_INFINITY","pdfSeparateFragments","pdfPageHeightOffset","viewDistance","mobileViewDistance","display","hideInactiveCursor","hideCursorTime","dependencies","initialized","loaded","overviewSlideWidth","overviewSlideHeight","indexh","indexv","previousSlide","currentSlide","previousBackground","hasNavigatedRight","hasNavigatedDown","state","scale","slidesTransform","layout","dom","plugins","asyncDependencies","features","isMobileDevice","isChrome","lastMouseWheelStep","writeURLTimeout","cursorHidden","cursorInactiveTimeout","eventsAreBound","autoSlidePlayer","autoSlideTimeout","autoSlideStartTime","autoSlidePaused","startX","startY","startCount","captured","threshold","keyboardShortcuts","registeredKeyBindings","initialize","options","checkCapabilities","transforms2d","transforms3d","document","body","setAttribute","images","toArray","getElementsByTagName","iframes","lazyLoadable","concat","i","len","length","element","getAttribute","removeAttribute","wrapper","querySelector","slides","window","addEventListener","query","getQueryHash","extend","load","test","platform","maxTouchPoints","testElement","createElement","style","requestAnimationFrameMethod","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","canvas","getContext","overviewTransitions","zoom","scripts","scriptsToLoad","forEach","s","condition","async","push","loadScript","src","callback","initPlugins","pluginsToInitialize","Object","keys","loadAsyncDependencies","afterPlugInitialized","plugin","init","then","start","url","script","type","defer","onload","onreadystatechange","event","readyState","onerror","err","Error","head","insertBefore","lastChild","setupDOM","setupPostMessage","setupScrollPrevention","resetVerticalSlides","configure","readURL","updateBackground","setTimeout","classList","remove","add","dispatchEvent","isPrintingPDF","removeEventListeners","setupPDF","background","createSingletonNode","progressbar","speakerNotes","pauseOverlay","controlsLeft","querySelectorAll","controlsRight","controlsUp","controlsDown","controlsPrev","controlsNext","controlsRightArrow","controlsDownArrow","statusDiv","createStatusDiv","getElementById","position","overflow","clip","appendChild","getStatusText","node","text","nodeType","textContent","isAriaHidden","isDisplayHidden","getComputedStyle","childNodes","child","slideSize","getComputedSlideSize","innerWidth","innerHeight","pageWidth","Math","floor","pageHeight","slideWidth","slideHeight","injectStyleSheet","layoutSlideContents","doingSlideNumbers","slide","getSlideNumber","contains","left","top","contentHeight","scrollHeight","numberOfPages","max","ceil","min","page","className","parentNode","slideBackgroundElement","notes","getSlideNotes","notesSpacing","notesLayout","notesElement","innerHTML","nextSibling","bottom","numberElement","fragmentGroups","sortFragments","previousFragmentStep","previousPage","fragment","clonedPage","cloneNode","setInterval","scrollTop","scrollLeft","container","tagname","classname","nodes","testNode","createBackgrounds","printMode","slideh","backgroundStack","createBackground","slidev","backgroundImage","backgroundSize","backgroundRepeat","backgroundPosition","replace","contentElement","slideBackgroundContentElement","syncBackground","backgroundColor","opacity","data","backgroundVideo","backgroundIframe","backgroundOpacity","hasAttribute","contrastColor","computedBackgroundStyle","rgb","colorToRgb","a","colorBrightness","charAt","JSON","parse","method","result","apply","args","dispatchPostMessage","console","warn","oldTransition","numberOfSlides","resume","onDocumentMouseScroll","removeEventListener","enableRollingLinks","disableRollingLinks","onDocumentCursorActive","showCursor","enablePreviewLinks","disablePreviewLinks","destroy","Playback","Date","now","on","onAutoSlidePlayerClick","slideNumberDisplay","isSpeakerNotes","sync","addEventListeners","onWindowHashChange","onWindowResize","onPointerDown","onPointerMove","onPointerUp","msPointerEnabled","onTouchStart","onTouchMove","onTouchEnd","onDocumentKeyDown","onDocumentKeyPress","onProgressClicked","visibilityChange","onPageVisibilityChange","pointerEvents","match","eventName","el","onNavigateLeftClicked","onNavigateRightClicked","onNavigateUpClicked","onNavigateDownClicked","onNavigatePrevClicked","onNavigateNextClicked","registerPlugin","id","undefined","hasPlugin","getPlugin","addKeyBinding","binding","keyCode","key","description","removeKeyBinding","b","o","Array","prototype","slice","call","deserialize","value","parseFloat","distanceBetween","dx","x","dy","y","sqrt","transformElement","transform","WebkitTransform","MozTransform","msTransform","transformSlides","transforms","tag","styleSheet","cssText","createTextNode","closestParent","target","selector","parent","matchesMethod","matches","matchesSelector","msMatchesSelector","color","hex3","r","parseInt","g","hex6","substr","rgba","getRemainingHeight","newHeight","oldHeight","offsetHeight","removeProperty","location","search","removeAddressBar","scrollTo","createEvent","initEvent","self","message","namespace","getState","stringify","anchors","anchor","span","onPreviewLinkClicked","showPreview","closeOverlay","overlay","join","preventDefault","toggleHelp","override","showHelp","html","removeChild","documentElement","setProperty","size","oldScale","presentationWidth","presentationHeight","right","devicePixelRatio","updateProgress","updateParallax","isOverview","updateOverview","remainingHeight","nodeName","nw","naturalWidth","videoWidth","nh","naturalHeight","videoHeight","es","offsetWidth","setPreviousVerticalIndex","stack","v","getPreviousVerticalIndex","attributeName","activateOverview","cancelAutoSlide","onOverviewSlideClicked","updateSlidesVisibility","layoutOverview","hslide","h","vslide","hbackground","vbackground","vmin","deactivateOverview","cueAutoSlide","toggleOverview","locationHash","encodeURIComponent","index","getIndices","f","hashIndexBase","isVerticalSlide","enterFullscreen","requestMethod","requestFullscreen","webkitRequestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen","cursor","hideCursor","wasPaused","togglePause","isPaused","toggleAutoSlide","resumeAutoSlide","pauseAutoSlide","isAutoSliding","horizontalSlides","stateBefore","indexhBefore","indexvBefore","updateSlides","currentHorizontalSlide","currentVerticalSlides","navigateFragment","slideChanged","stateLoop","j","splice","pop","stopEmbeddedContent","startEmbeddedContent","updateControls","updateSlideNumber","updateNotes","updateFragments","writeURL","sortAllFragments","updateNotesVisibility","formatEmbeddedContent","unloadIframes","syncSlide","syncFragments","loadSlide","horizontalSlide","verticalSlides","verticalSlide","random","slidesLength","reverse","slideState","split","horizontalSlidesLength","distanceX","distanceY","MAX_VALUE","verticalSlidesLength","abs","unloadSlide","oy","hasVerticalSlides","hasHorizontalSlides","hasNotes","getProgress","format","getSlidePastCount","getTotalSlides","indices","sep","formatSlideNumber","delimiter","isNaN","routes","availableRoutes","availableFragments","up","down","prev","next","includeAll","currentBackground","horizontalPast","horizontalFuture","backgroundh","backgroundv","shouldPreload","currentBackgroundContent","backgroundImageURL","previousBackgroundHash","currentBackgroundHash","classToBubble","backgroundWidth","backgroundHeight","horizontalSlideCount","horizontalOffsetMultiplier","horizontalOffset","verticalSlideCount","verticalOffsetMultiplier","verticalOffset","preload","tagName","media","sources","source","backgroundContent","backgroundVideoLoop","backgroundVideoMuted","encodeURI","video","muted","autoplay","excludeIframes","iframe","maxHeight","maxWidth","backgroundIframeElement","getSlideBackground","hiddenFragments","_appendParamToIframeSource","sourceAttribute","sourceURL","param","indexOf","play","startEmbeddedMedia","promise","catch","startEmbeddedIframe","isAttachedToDOM","isVisible","currentTime","contentWindow","pastCount","mainLoop","totalCount","allFragments","visibleFragments","fragmentWeight","bits","name","decodeURIComponent","error","isSameNameAsCurrentSlide","delay","clearTimeout","replaceState","pathname","isVertical","hasFragments","currentFragment","getSlides","getHorizontalSlides","getVerticalSlides","getSlidesAttributes","map","attributes","attribute","getSlide","indexf","paused","setState","pausedFlag","overviewFlag","grouped","ordered","unordered","sorted","group","changedFragments","shown","hidden","maxIndex","offset","lastVisibleFragment","nextFragment","previousFragment","fragmentAutoSlide","parentAutoSlide","slideAutoSlide","duration","playbackRate","isLastSlide","navigateNext","setPlaying","navigateLeft","navigateRight","navigateUp","navigateDown","navigatePrev","isLastVerticalSlide","isSwipePrevented","onUserInput","shiftKey","charCode","autoSlideWasPaused","activeElementIsCE","activeElement","contentEditable","activeElementIsInput","activeElementIsNotes","prevSlideShortcut","firstSlideShortcut","lastSlideShortcut","unusedModifier","altKey","ctrlKey","metaKey","resumeKeyCodes","useLinearMode","triggered","action","touches","clientX","clientY","currentX","currentY","deltaX","deltaY","pointerType","MSPOINTER_TYPE_TOUCH","delta","detail","wheelDelta","slidesTotal","slideIndex","isHidden","webkitHidden","msHidden","blur","focus","currentTarget","progressCheck","diameter","diameter2","thickness","playing","progressOffset","context","render","wasPlaying","animate","progressBefore","bind","radius","iconSize","endAngle","PI","startAngle","save","clearRect","beginPath","arc","fillStyle","fill","lineWidth","strokeStyle","stroke","translate","fillRect","moveTo","lineTo","restore","listener","off","prevFragment","navigateTo","getPreviousSlide","getCurrentSlide","getScale","getConfig","shift","unescape","getRevealElement","getPlugins","isFirstSlide","nextElementSibling","isReady","useCapture","triggerKey","registerKeyboardShortcut","OVERLAY_ID","OldModule","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","clear","hmrApply","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","createErrorOverlay","stackTrace","innerText","getParents","modules","parents","k","d","dep","isArray","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"reveal.9c026a29.js","sourceRoot":"..","sourcesContent":["/*!\n * reveal.js\n * http://revealjs.com\n * MIT licensed\n *\n * Copyright (C) 2020 Hakim El Hattab, http://hakim.se\n */\n(function( root, factory ) {\n\tif( typeof define === 'function' && define.amd ) {\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( function() {\n\t\t\troot.Reveal = factory();\n\t\t\treturn root.Reveal;\n\t\t} );\n\t} else if( typeof exports === 'object' ) {\n\t\t// Node. Does not work with strict CommonJS.\n\t\tmodule.exports = factory();\n\t} else {\n\t\t// Browser globals.\n\t\troot.Reveal = factory();\n\t}\n}( this, function() {\n\n\t'use strict';\n\n\tvar Reveal;\n\n\t// The reveal.js version\n\tvar VERSION = '3.9.2';\n\n\tvar SLIDES_SELECTOR = '.slides section',\n\t\tHORIZONTAL_SLIDES_SELECTOR = '.slides>section',\n\t\tVERTICAL_SLIDES_SELECTOR = '.slides>section.present>section',\n\t\tHOME_SLIDE_SELECTOR = '.slides>section:first-of-type',\n\n\t\tUA = navigator.userAgent,\n\n\t\t// Methods that may not be invoked via the postMessage API\n\t\tPOST_MESSAGE_METHOD_BLACKLIST = /registerPlugin|registerKeyboardShortcut|addKeyBinding|addEventListener/,\n\n\t\t// Configuration defaults, can be overridden at initialization time\n\t\tconfig = {\n\n\t\t\t// The \"normal\" size of the presentation, aspect ratio will be preserved\n\t\t\t// when the presentation is scaled to fit different resolutions\n\t\t\twidth: 960,\n\t\t\theight: 700,\n\n\t\t\t// Factor of the display size that should remain empty around the content\n\t\t\tmargin: 0.04,\n\n\t\t\t// Bounds for smallest/largest possible scale to apply to content\n\t\t\tminScale: 0.2,\n\t\t\tmaxScale: 2.0,\n\n\t\t\t// Display presentation control arrows\n\t\t\tcontrols: true,\n\n\t\t\t// Help the user learn the controls by providing hints, for example by\n\t\t\t// bouncing the down arrow when they first encounter a vertical slide\n\t\t\tcontrolsTutorial: true,\n\n\t\t\t// Determines where controls appear, \"edges\" or \"bottom-right\"\n\t\t\tcontrolsLayout: 'bottom-right',\n\n\t\t\t// Visibility rule for backwards navigation arrows; \"faded\", \"hidden\"\n\t\t\t// or \"visible\"\n\t\t\tcontrolsBackArrows: 'faded',\n\n\t\t\t// Display a presentation progress bar\n\t\t\tprogress: true,\n\n\t\t\t// Display the page number of the current slide\n\t\t\t// - true:    Show slide number\n\t\t\t// - false:   Hide slide number\n\t\t\t//\n\t\t\t// Can optionally be set as a string that specifies the number formatting:\n\t\t\t// - \"h.v\":\t  Horizontal . vertical slide number (default)\n\t\t\t// - \"h/v\":\t  Horizontal / vertical slide number\n\t\t\t// - \"c\":\t  Flattened slide number\n\t\t\t// - \"c/t\":\t  Flattened slide number / total slides\n\t\t\t//\n\t\t\t// Alternatively, you can provide a function that returns the slide\n\t\t\t// number for the current slide. The function should take in a slide\n\t\t\t// object and return an array with one string [slideNumber] or\n\t\t\t// three strings [n1,delimiter,n2]. See #formatSlideNumber().\n\t\t\tslideNumber: false,\n\n\t\t\t// Can be used to limit the contexts in which the slide number appears\n\t\t\t// - \"all\":      Always show the slide number\n\t\t\t// - \"print\":    Only when printing to PDF\n\t\t\t// - \"speaker\":  Only in the speaker view\n\t\t\tshowSlideNumber: 'all',\n\n\t\t\t// Use 1 based indexing for # links to match slide number (default is zero\n\t\t\t// based)\n\t\t\thashOneBasedIndex: false,\n\n\t\t\t// Add the current slide number to the URL hash so that reloading the\n\t\t\t// page/copying the URL will return you to the same slide\n\t\t\thash: false,\n\n\t\t\t// Push each slide change to the browser history.  Implies `hash: true`\n\t\t\thistory: false,\n\n\t\t\t// Enable keyboard shortcuts for navigation\n\t\t\tkeyboard: true,\n\n\t\t\t// Optional function that blocks keyboard events when retuning false\n\t\t\tkeyboardCondition: null,\n\n\t\t\t// Enable the slide overview mode\n\t\t\toverview: true,\n\n\t\t\t// Disables the default reveal.js slide layout so that you can use\n\t\t\t// custom CSS layout\n\t\t\tdisableLayout: false,\n\n\t\t\t// Vertical centering of slides\n\t\t\tcenter: true,\n\n\t\t\t// Enables touch navigation on devices with touch input\n\t\t\ttouch: true,\n\n\t\t\t// Loop the presentation\n\t\t\tloop: false,\n\n\t\t\t// Change the presentation direction to be RTL\n\t\t\trtl: false,\n\n\t\t\t// Changes the behavior of our navigation directions.\n\t\t\t//\n\t\t\t// \"default\"\n\t\t\t// Left/right arrow keys step between horizontal slides, up/down\n\t\t\t// arrow keys step between vertical slides. Space key steps through\n\t\t\t// all slides (both horizontal and vertical).\n\t\t\t//\n\t\t\t// \"linear\"\n\t\t\t// Removes the up/down arrows. Left/right arrows step through all\n\t\t\t// slides (both horizontal and vertical).\n\t\t\t//\n\t\t\t// \"grid\"\n\t\t\t// When this is enabled, stepping left/right from a vertical stack\n\t\t\t// to an adjacent vertical stack will land you at the same vertical\n\t\t\t// index.\n\t\t\t//\n\t\t\t// Consider a deck with six slides ordered in two vertical stacks:\n\t\t\t// 1.1    2.1\n\t\t\t// 1.2    2.2\n\t\t\t// 1.3    2.3\n\t\t\t//\n\t\t\t// If you're on slide 1.3 and navigate right, you will normally move\n\t\t\t// from 1.3 -> 2.1. If \"grid\" is used, the same navigation takes you\n\t\t\t// from 1.3 -> 2.3.\n\t\t\tnavigationMode: 'default',\n\n\t\t\t// Randomizes the order of slides each time the presentation loads\n\t\t\tshuffle: false,\n\n\t\t\t// Turns fragments on and off globally\n\t\t\tfragments: true,\n\n\t\t\t// Flags whether to include the current fragment in the URL,\n\t\t\t// so that reloading brings you to the same fragment position\n\t\t\tfragmentInURL: false,\n\n\t\t\t// Flags if the presentation is running in an embedded mode,\n\t\t\t// i.e. contained within a limited portion of the screen\n\t\t\tembedded: false,\n\n\t\t\t// Flags if we should show a help overlay when the question-mark\n\t\t\t// key is pressed\n\t\t\thelp: true,\n\n\t\t\t// Flags if it should be possible to pause the presentation (blackout)\n\t\t\tpause: true,\n\n\t\t\t// Flags if speaker notes should be visible to all viewers\n\t\t\tshowNotes: false,\n\n\t\t\t// Global override for autolaying embedded media (video/audio/iframe)\n\t\t\t// - null:   Media will only autoplay if data-autoplay is present\n\t\t\t// - true:   All media will autoplay, regardless of individual setting\n\t\t\t// - false:  No media will autoplay, regardless of individual setting\n\t\t\tautoPlayMedia: null,\n\n\t\t\t// Global override for preloading lazy-loaded iframes\n\t\t\t// - null:   Iframes with data-src AND data-preload will be loaded when within\n\t\t\t//           the viewDistance, iframes with only data-src will be loaded when visible\n\t\t\t// - true:   All iframes with data-src will be loaded when within the viewDistance\n\t\t\t// - false:  All iframes with data-src will be loaded only when visible\n\t\t\tpreloadIframes: null,\n\n\t\t\t// Controls automatic progression to the next slide\n\t\t\t// - 0:      Auto-sliding only happens if the data-autoslide HTML attribute\n\t\t\t//           is present on the current slide or fragment\n\t\t\t// - 1+:     All slides will progress automatically at the given interval\n\t\t\t// - false:  No auto-sliding, even if data-autoslide is present\n\t\t\tautoSlide: 0,\n\n\t\t\t// Stop auto-sliding after user input\n\t\t\tautoSlideStoppable: true,\n\n\t\t\t// Use this method for navigation when auto-sliding (defaults to navigateNext)\n\t\t\tautoSlideMethod: null,\n\n\t\t\t// Specify the average time in seconds that you think you will spend\n\t\t\t// presenting each slide. This is used to show a pacing timer in the\n\t\t\t// speaker view\n\t\t\tdefaultTiming: null,\n\n\t\t\t// Enable slide navigation via mouse wheel\n\t\t\tmouseWheel: false,\n\n\t\t\t// Apply a 3D roll to links on hover\n\t\t\trollingLinks: false,\n\n\t\t\t// Hides the address bar on mobile devices\n\t\t\thideAddressBar: true,\n\n\t\t\t// Opens links in an iframe preview overlay\n\t\t\t// Add `data-preview-link` and `data-preview-link=\"false\"` to customise each link\n\t\t\t// individually\n\t\t\tpreviewLinks: false,\n\n\t\t\t// Exposes the reveal.js API through window.postMessage\n\t\t\tpostMessage: true,\n\n\t\t\t// Dispatches all reveal.js events to the parent window through postMessage\n\t\t\tpostMessageEvents: false,\n\n\t\t\t// Focuses body when page changes visibility to ensure keyboard shortcuts work\n\t\t\tfocusBodyOnPageVisibilityChange: true,\n\n\t\t\t// Transition style\n\t\t\ttransition: 'slide', // none/fade/slide/convex/concave/zoom\n\n\t\t\t// Transition speed\n\t\t\ttransitionSpeed: 'default', // default/fast/slow\n\n\t\t\t// Transition style for full page slide backgrounds\n\t\t\tbackgroundTransition: 'fade', // none/fade/slide/convex/concave/zoom\n\n\t\t\t// Parallax background image\n\t\t\tparallaxBackgroundImage: '', // CSS syntax, e.g. \"a.jpg\"\n\n\t\t\t// Parallax background size\n\t\t\tparallaxBackgroundSize: '', // CSS syntax, e.g. \"3000px 2000px\"\n\n\t\t\t// Parallax background repeat\n\t\t\tparallaxBackgroundRepeat: '', // repeat/repeat-x/repeat-y/no-repeat/initial/inherit\n\n\t\t\t// Parallax background position\n\t\t\tparallaxBackgroundPosition: '', // CSS syntax, e.g. \"top left\"\n\n\t\t\t// Amount of pixels to move the parallax background per slide step\n\t\t\tparallaxBackgroundHorizontal: null,\n\t\t\tparallaxBackgroundVertical: null,\n\n\t\t\t// The maximum number of pages a single slide can expand onto when printing\n\t\t\t// to PDF, unlimited by default\n\t\t\tpdfMaxPagesPerSlide: Number.POSITIVE_INFINITY,\n\n\t\t\t// Prints each fragment on a separate slide\n\t\t\tpdfSeparateFragments: true,\n\n\t\t\t// Offset used to reduce the height of content within exported PDF pages.\n\t\t\t// This exists to account for environment differences based on how you\n\t\t\t// print to PDF. CLI printing options, like phantomjs and wkpdf, can end\n\t\t\t// on precisely the total height of the document whereas in-browser\n\t\t\t// printing has to end one pixel before.\n\t\t\tpdfPageHeightOffset: -1,\n\n\t\t\t// Number of slides away from the current that are visible\n\t\t\tviewDistance: 3,\n\n\t\t\t// Number of slides away from the current that are visible on mobile\n\t\t\t// devices. It is advisable to set this to a lower number than\n\t\t\t// viewDistance in order to save resources.\n\t\t\tmobileViewDistance: 2,\n\n\t\t\t// The display mode that will be used to show slides\n\t\t\tdisplay: 'block',\n\n\t\t\t// Hide cursor if inactive\n\t\t\thideInactiveCursor: true,\n\n\t\t\t// Time before the cursor is hidden (in ms)\n\t\t\thideCursorTime: 5000,\n\n\t\t\t// Script dependencies to load\n\t\t\tdependencies: []\n\n\t\t},\n\n\t\t// Flags if Reveal.initialize() has been called\n\t\tinitialized = false,\n\n\t\t// Flags if reveal.js is loaded (has dispatched the 'ready' event)\n\t\tloaded = false,\n\n\t\t// Flags if the overview mode is currently active\n\t\toverview = false,\n\n\t\t// Holds the dimensions of our overview slides, including margins\n\t\toverviewSlideWidth = null,\n\t\toverviewSlideHeight = null,\n\n\t\t// The horizontal and vertical index of the currently active slide\n\t\tindexh,\n\t\tindexv,\n\n\t\t// The previous and current slide HTML elements\n\t\tpreviousSlide,\n\t\tcurrentSlide,\n\n\t\tpreviousBackground,\n\n\t\t// Remember which directions that the user has navigated towards\n\t\thasNavigatedRight = false,\n\t\thasNavigatedDown = false,\n\n\t\t// Slides may hold a data-state attribute which we pick up and apply\n\t\t// as a class to the body. This list contains the combined state of\n\t\t// all current slides.\n\t\tstate = [],\n\n\t\t// The current scale of the presentation (see width/height config)\n\t\tscale = 1,\n\n\t\t// CSS transform that is currently applied to the slides container,\n\t\t// split into two groups\n\t\tslidesTransform = { layout: '', overview: '' },\n\n\t\t// Cached references to DOM elements\n\t\tdom = {},\n\n\t\t// A list of registered reveal.js plugins\n\t\tplugins = {},\n\n\t\t// List of asynchronously loaded reveal.js dependencies\n\t\tasyncDependencies = [],\n\n\t\t// Features supported by the browser, see #checkCapabilities()\n\t\tfeatures = {},\n\n\t\t// Client is a mobile device, see #checkCapabilities()\n\t\tisMobileDevice,\n\n\t\t// Client is a desktop Chrome, see #checkCapabilities()\n\t\tisChrome,\n\n\t\t// Throttles mouse wheel navigation\n\t\tlastMouseWheelStep = 0,\n\n\t\t// Delays updates to the URL due to a Chrome thumbnailer bug\n\t\twriteURLTimeout = 0,\n\n\t\t// Is the mouse pointer currently hidden from view\n\t\tcursorHidden = false,\n\n\t\t// Timeout used to determine when the cursor is inactive\n\t\tcursorInactiveTimeout = 0,\n\n\t\t// Flags if the interaction event listeners are bound\n\t\teventsAreBound = false,\n\n\t\t// The current auto-slide duration\n\t\tautoSlide = 0,\n\n\t\t// Auto slide properties\n\t\tautoSlidePlayer,\n\t\tautoSlideTimeout = 0,\n\t\tautoSlideStartTime = -1,\n\t\tautoSlidePaused = false,\n\n\t\t// Holds information about the currently ongoing touch input\n\t\ttouch = {\n\t\t\tstartX: 0,\n\t\t\tstartY: 0,\n\t\t\tstartCount: 0,\n\t\t\tcaptured: false,\n\t\t\tthreshold: 40\n\t\t},\n\n\t\t// A key:value map of shortcut keyboard keys and descriptions of\n\t\t// the actions they trigger, generated in #configure()\n\t\tkeyboardShortcuts = {},\n\n\t\t// Holds custom key code mappings\n\t\tregisteredKeyBindings = {};\n\n\t/**\n\t * Starts up the presentation if the client is capable.\n\t */\n\tfunction initialize( options ) {\n\n\t\t// Make sure we only initialize once\n\t\tif( initialized === true ) return;\n\n\t\tinitialized = true;\n\n\t\tcheckCapabilities();\n\n\t\tif( !features.transforms2d && !features.transforms3d ) {\n\t\t\tdocument.body.setAttribute( 'class', 'no-transforms' );\n\n\t\t\t// Since JS won't be running any further, we load all lazy\n\t\t\t// loading elements upfront\n\t\t\tvar images = toArray( document.getElementsByTagName( 'img' ) ),\n\t\t\t\tiframes = toArray( document.getElementsByTagName( 'iframe' ) );\n\n\t\t\tvar lazyLoadable = images.concat( iframes );\n\n\t\t\tfor( var i = 0, len = lazyLoadable.length; i < len; i++ ) {\n\t\t\t\tvar element = lazyLoadable[i];\n\t\t\t\tif( element.getAttribute( 'data-src' ) ) {\n\t\t\t\t\telement.setAttribute( 'src', element.getAttribute( 'data-src' ) );\n\t\t\t\t\telement.removeAttribute( 'data-src' );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If the browser doesn't support core features we won't be\n\t\t\t// using JavaScript to control the presentation\n\t\t\treturn;\n\t\t}\n\n\t\t// Cache references to key DOM elements\n\t\tdom.wrapper = document.querySelector( '.reveal' );\n\t\tdom.slides = document.querySelector( '.reveal .slides' );\n\n\t\t// Force a layout when the whole page, incl fonts, has loaded\n\t\twindow.addEventListener( 'load', layout, false );\n\n\t\tvar query = Reveal.getQueryHash();\n\n\t\t// Do not accept new dependencies via query config to avoid\n\t\t// the potential of malicious script injection\n\t\tif( typeof query['dependencies'] !== 'undefined' ) delete query['dependencies'];\n\n\t\t// Copy options over to our config object\n\t\textend( config, options );\n\t\textend( config, query );\n\n\t\t// Hide the address bar in mobile browsers\n\t\thideAddressBar();\n\n\t\t// Loads dependencies and continues to #start() once done\n\t\tload();\n\n\t}\n\n\t/**\n\t * Inspect the client to see what it's capable of, this\n\t * should only happens once per runtime.\n\t */\n\tfunction checkCapabilities() {\n\n\t\tisMobileDevice = /(iphone|ipod|ipad|android)/gi.test( UA ) ||\n\t\t\t( navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1 ); // iPadOS\n\t\tisChrome = /chrome/i.test( UA ) && !/edge/i.test( UA );\n\n\t\tvar testElement = document.createElement( 'div' );\n\n\t\tfeatures.transforms3d = 'WebkitPerspective' in testElement.style ||\n\t\t\t'MozPerspective' in testElement.style ||\n\t\t\t'msPerspective' in testElement.style ||\n\t\t\t'OPerspective' in testElement.style ||\n\t\t\t'perspective' in testElement.style;\n\n\t\tfeatures.transforms2d = 'WebkitTransform' in testElement.style ||\n\t\t\t'MozTransform' in testElement.style ||\n\t\t\t'msTransform' in testElement.style ||\n\t\t\t'OTransform' in testElement.style ||\n\t\t\t'transform' in testElement.style;\n\n\t\tfeatures.requestAnimationFrameMethod = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame;\n\t\tfeatures.requestAnimationFrame = typeof features.requestAnimationFrameMethod === 'function';\n\n\t\tfeatures.canvas = !!document.createElement( 'canvas' ).getContext;\n\n\t\t// Transitions in the overview are disabled in desktop and\n\t\t// Safari due to lag\n\t\tfeatures.overviewTransitions = !/Version\\/[\\d\\.]+.*Safari/.test( UA );\n\n\t\t// Flags if we should use zoom instead of transform to scale\n\t\t// up slides. Zoom produces crisper results but has a lot of\n\t\t// xbrowser quirks so we only use it in whitelsited browsers.\n\t\tfeatures.zoom = 'zoom' in testElement.style && !isMobileDevice &&\n\t\t\t( isChrome || /Version\\/[\\d\\.]+.*Safari/.test( UA ) );\n\n\t}\n\n\t/**\n\t * Loads the dependencies of reveal.js. Dependencies are\n\t * defined via the configuration option 'dependencies'\n\t * and will be loaded prior to starting/binding reveal.js.\n\t * Some dependencies may have an 'async' flag, if so they\n\t * will load after reveal.js has been started up.\n\t */\n\tfunction load() {\n\n\t\tvar scripts = [],\n\t\t\tscriptsToLoad = 0;\n\n\t\tconfig.dependencies.forEach( function( s ) {\n\t\t\t// Load if there's no condition or the condition is truthy\n\t\t\tif( !s.condition || s.condition() ) {\n\t\t\t\tif( s.async ) {\n\t\t\t\t\tasyncDependencies.push( s );\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tscripts.push( s );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\tif( scripts.length ) {\n\t\t\tscriptsToLoad = scripts.length;\n\n\t\t\t// Load synchronous scripts\n\t\t\tscripts.forEach( function( s ) {\n\t\t\t\tloadScript( s.src, function() {\n\n\t\t\t\t\tif( typeof s.callback === 'function' ) s.callback();\n\n\t\t\t\t\tif( --scriptsToLoad === 0 ) {\n\t\t\t\t\t\tinitPlugins();\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\t\telse {\n\t\t\tinitPlugins();\n\t\t}\n\n\t}\n\n\t/**\n\t * Initializes our plugins and waits for them to be ready\n\t * before proceeding.\n\t */\n\tfunction initPlugins() {\n\n\t\tvar pluginsToInitialize = Object.keys( plugins ).length;\n\n\t\t// If there are no plugins, skip this step\n\t\tif( pluginsToInitialize === 0 ) {\n\t\t\tloadAsyncDependencies();\n\t\t}\n\t\t// ... otherwise initialize plugins\n\t\telse {\n\n\t\t\tvar afterPlugInitialized = function() {\n\t\t\t\tif( --pluginsToInitialize === 0 ) {\n\t\t\t\t\tloadAsyncDependencies();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfor( var i in plugins ) {\n\n\t\t\t\tvar plugin = plugins[i];\n\n\t\t\t\t// If the plugin has an 'init' method, invoke it\n\t\t\t\tif( typeof plugin.init === 'function' ) {\n\t\t\t\t\tvar callback = plugin.init();\n\n\t\t\t\t\t// If the plugin returned a Promise, wait for it\n\t\t\t\t\tif( callback && typeof callback.then === 'function' ) {\n\t\t\t\t\t\tcallback.then( afterPlugInitialized );\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tafterPlugInitialized();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tafterPlugInitialized();\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Loads all async reveal.js dependencies.\n\t */\n\tfunction loadAsyncDependencies() {\n\n\t\tif( asyncDependencies.length ) {\n\t\t\tasyncDependencies.forEach( function( s ) {\n\t\t\t\tloadScript( s.src, s.callback );\n\t\t\t} );\n\t\t}\n\n\t\tstart();\n\n\t}\n\n\t/**\n\t * Loads a JavaScript file from the given URL and executes it.\n\t *\n\t * @param {string} url Address of the .js file to load\n\t * @param {function} callback Method to invoke when the script\n\t * has loaded and executed\n\t */\n\tfunction loadScript( url, callback ) {\n\n\t\tvar script = document.createElement( 'script' );\n\t\tscript.type = 'text/javascript';\n\t\tscript.async = false;\n\t\tscript.defer = false;\n\t\tscript.src = url;\n\n\t\tif( callback ) {\n\n\t\t\t// Success callback\n\t\t\tscript.onload = script.onreadystatechange = function( event ) {\n\t\t\t\tif( event.type === \"load\" || (/loaded|complete/.test( script.readyState ) ) ) {\n\n\t\t\t\t\t// Kill event listeners\n\t\t\t\t\tscript.onload = script.onreadystatechange = script.onerror = null;\n\n\t\t\t\t\tcallback();\n\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Error callback\n\t\t\tscript.onerror = function( err ) {\n\n\t\t\t\t// Kill event listeners\n\t\t\t\tscript.onload = script.onreadystatechange = script.onerror = null;\n\n\t\t\t\tcallback( new Error( 'Failed loading script: ' + script.src + '\\n' + err) );\n\n\t\t\t};\n\n\t\t}\n\n\t\t// Append the script at the end of <head>\n\t\tvar head = document.querySelector( 'head' );\n\t\thead.insertBefore( script, head.lastChild );\n\n\t}\n\n\t/**\n\t * Starts up reveal.js by binding input events and navigating\n\t * to the current URL deeplink if there is one.\n\t */\n\tfunction start() {\n\n\t\tloaded = true;\n\n\t\t// Make sure we've got all the DOM elements we need\n\t\tsetupDOM();\n\n\t\t// Listen to messages posted to this window\n\t\tsetupPostMessage();\n\n\t\t// Prevent the slides from being scrolled out of view\n\t\tsetupScrollPrevention();\n\n\t\t// Resets all vertical slides so that only the first is visible\n\t\tresetVerticalSlides();\n\n\t\t// Updates the presentation to match the current configuration values\n\t\tconfigure();\n\n\t\t// Read the initial hash\n\t\treadURL();\n\n\t\t// Update all backgrounds\n\t\tupdateBackground( true );\n\n\t\t// Notify listeners that the presentation is ready but use a 1ms\n\t\t// timeout to ensure it's not fired synchronously after #initialize()\n\t\tsetTimeout( function() {\n\t\t\t// Enable transitions now that we're loaded\n\t\t\tdom.slides.classList.remove( 'no-transition' );\n\n\t\t\tdom.wrapper.classList.add( 'ready' );\n\n\t\t\tdispatchEvent( 'ready', {\n\t\t\t\t'indexh': indexh,\n\t\t\t\t'indexv': indexv,\n\t\t\t\t'currentSlide': currentSlide\n\t\t\t} );\n\t\t}, 1 );\n\n\t\t// Special setup and config is required when printing to PDF\n\t\tif( isPrintingPDF() ) {\n\t\t\tremoveEventListeners();\n\n\t\t\t// The document needs to have loaded for the PDF layout\n\t\t\t// measurements to be accurate\n\t\t\tif( document.readyState === 'complete' ) {\n\t\t\t\tsetupPDF();\n\t\t\t}\n\t\t\telse {\n\t\t\t\twindow.addEventListener( 'load', setupPDF );\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Finds and stores references to DOM elements which are\n\t * required by the presentation. If a required element is\n\t * not found, it is created.\n\t */\n\tfunction setupDOM() {\n\n\t\t// Prevent transitions while we're loading\n\t\tdom.slides.classList.add( 'no-transition' );\n\n\t\tif( isMobileDevice ) {\n\t\t\tdom.wrapper.classList.add( 'no-hover' );\n\t\t}\n\t\telse {\n\t\t\tdom.wrapper.classList.remove( 'no-hover' );\n\t\t}\n\n\t\tif( /iphone/gi.test( UA ) ) {\n\t\t\tdom.wrapper.classList.add( 'ua-iphone' );\n\t\t}\n\t\telse {\n\t\t\tdom.wrapper.classList.remove( 'ua-iphone' );\n\t\t}\n\n\t\t// Background element\n\t\tdom.background = createSingletonNode( dom.wrapper, 'div', 'backgrounds', null );\n\n\t\t// Progress bar\n\t\tdom.progress = createSingletonNode( dom.wrapper, 'div', 'progress', '<span></span>' );\n\t\tdom.progressbar = dom.progress.querySelector( 'span' );\n\n\t\t// Arrow controls\n\t\tdom.controls = createSingletonNode( dom.wrapper, 'aside', 'controls',\n\t\t\t'<button class=\"navigate-left\" aria-label=\"previous slide\"><div class=\"controls-arrow\"></div></button>' +\n\t\t\t'<button class=\"navigate-right\" aria-label=\"next slide\"><div class=\"controls-arrow\"></div></button>' +\n\t\t\t'<button class=\"navigate-up\" aria-label=\"above slide\"><div class=\"controls-arrow\"></div></button>' +\n\t\t\t'<button class=\"navigate-down\" aria-label=\"below slide\"><div class=\"controls-arrow\"></div></button>' );\n\n\t\t// Slide number\n\t\tdom.slideNumber = createSingletonNode( dom.wrapper, 'div', 'slide-number', '' );\n\n\t\t// Element containing notes that are visible to the audience\n\t\tdom.speakerNotes = createSingletonNode( dom.wrapper, 'div', 'speaker-notes', null );\n\t\tdom.speakerNotes.setAttribute( 'data-prevent-swipe', '' );\n\t\tdom.speakerNotes.setAttribute( 'tabindex', '0' );\n\n\t\t// Overlay graphic which is displayed during the paused mode\n\t\tdom.pauseOverlay = createSingletonNode( dom.wrapper, 'div', 'pause-overlay', config.controls ? '<button class=\"resume-button\">Resume presentation</button>' : null );\n\n\t\tdom.wrapper.setAttribute( 'role', 'application' );\n\n\t\t// There can be multiple instances of controls throughout the page\n\t\tdom.controlsLeft = toArray( document.querySelectorAll( '.navigate-left' ) );\n\t\tdom.controlsRight = toArray( document.querySelectorAll( '.navigate-right' ) );\n\t\tdom.controlsUp = toArray( document.querySelectorAll( '.navigate-up' ) );\n\t\tdom.controlsDown = toArray( document.querySelectorAll( '.navigate-down' ) );\n\t\tdom.controlsPrev = toArray( document.querySelectorAll( '.navigate-prev' ) );\n\t\tdom.controlsNext = toArray( document.querySelectorAll( '.navigate-next' ) );\n\n\t\t// The right and down arrows in the standard reveal.js controls\n\t\tdom.controlsRightArrow = dom.controls.querySelector( '.navigate-right' );\n\t\tdom.controlsDownArrow = dom.controls.querySelector( '.navigate-down' );\n\n\t\tdom.statusDiv = createStatusDiv();\n\t}\n\n\t/**\n\t * Creates a hidden div with role aria-live to announce the\n\t * current slide content. Hide the div off-screen to make it\n\t * available only to Assistive Technologies.\n\t *\n\t * @return {HTMLElement}\n\t */\n\tfunction createStatusDiv() {\n\n\t\tvar statusDiv = document.getElementById( 'aria-status-div' );\n\t\tif( !statusDiv ) {\n\t\t\tstatusDiv = document.createElement( 'div' );\n\t\t\tstatusDiv.style.position = 'absolute';\n\t\t\tstatusDiv.style.height = '1px';\n\t\t\tstatusDiv.style.width = '1px';\n\t\t\tstatusDiv.style.overflow = 'hidden';\n\t\t\tstatusDiv.style.clip = 'rect( 1px, 1px, 1px, 1px )';\n\t\t\tstatusDiv.setAttribute( 'id', 'aria-status-div' );\n\t\t\tstatusDiv.setAttribute( 'aria-live', 'polite' );\n\t\t\tstatusDiv.setAttribute( 'aria-atomic','true' );\n\t\t\tdom.wrapper.appendChild( statusDiv );\n\t\t}\n\t\treturn statusDiv;\n\n\t}\n\n\t/**\n\t * Converts the given HTML element into a string of text\n\t * that can be announced to a screen reader. Hidden\n\t * elements are excluded.\n\t */\n\tfunction getStatusText( node ) {\n\n\t\tvar text = '';\n\n\t\t// Text node\n\t\tif( node.nodeType === 3 ) {\n\t\t\ttext += node.textContent;\n\t\t}\n\t\t// Element node\n\t\telse if( node.nodeType === 1 ) {\n\n\t\t\tvar isAriaHidden = node.getAttribute( 'aria-hidden' );\n\t\t\tvar isDisplayHidden = window.getComputedStyle( node )['display'] === 'none';\n\t\t\tif( isAriaHidden !== 'true' && !isDisplayHidden ) {\n\n\t\t\t\ttoArray( node.childNodes ).forEach( function( child ) {\n\t\t\t\t\ttext += getStatusText( child );\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn text;\n\n\t}\n\n\t/**\n\t * Configures the presentation for printing to a static\n\t * PDF.\n\t */\n\tfunction setupPDF() {\n\n\t\tvar slideSize = getComputedSlideSize( window.innerWidth, window.innerHeight );\n\n\t\t// Dimensions of the PDF pages\n\t\tvar pageWidth = Math.floor( slideSize.width * ( 1 + config.margin ) ),\n\t\t\tpageHeight = Math.floor( slideSize.height * ( 1 + config.margin ) );\n\n\t\t// Dimensions of slides within the pages\n\t\tvar slideWidth = slideSize.width,\n\t\t\tslideHeight = slideSize.height;\n\n\t\t// Let the browser know what page size we want to print\n\t\tinjectStyleSheet( '@page{size:'+ pageWidth +'px '+ pageHeight +'px; margin: 0px;}' );\n\n\t\t// Limit the size of certain elements to the dimensions of the slide\n\t\tinjectStyleSheet( '.reveal section>img, .reveal section>video, .reveal section>iframe{max-width: '+ slideWidth +'px; max-height:'+ slideHeight +'px}' );\n\n\t\tdocument.body.classList.add( 'print-pdf' );\n\t\tdocument.body.style.width = pageWidth + 'px';\n\t\tdocument.body.style.height = pageHeight + 'px';\n\n\t\t// Make sure stretch elements fit on slide\n\t\tlayoutSlideContents( slideWidth, slideHeight );\n\n\t\t// Compute slide numbers now, before we start duplicating slides\n\t\tvar doingSlideNumbers = config.slideNumber && /all|print/i.test( config.showSlideNumber );\n\t\ttoArray( dom.wrapper.querySelectorAll( SLIDES_SELECTOR ) ).forEach( function( slide ) {\n\t\t\tslide.setAttribute( 'data-slide-number', getSlideNumber( slide ) );\n\t\t} );\n\n\t\t// Slide and slide background layout\n\t\ttoArray( dom.wrapper.querySelectorAll( SLIDES_SELECTOR ) ).forEach( function( slide ) {\n\n\t\t\t// Vertical stacks are not centred since their section\n\t\t\t// children will be\n\t\t\tif( slide.classList.contains( 'stack' ) === false ) {\n\t\t\t\t// Center the slide inside of the page, giving the slide some margin\n\t\t\t\tvar left = ( pageWidth - slideWidth ) / 2,\n\t\t\t\t\ttop = ( pageHeight - slideHeight ) / 2;\n\n\t\t\t\tvar contentHeight = slide.scrollHeight;\n\t\t\t\tvar numberOfPages = Math.max( Math.ceil( contentHeight / pageHeight ), 1 );\n\n\t\t\t\t// Adhere to configured pages per slide limit\n\t\t\t\tnumberOfPages = Math.min( numberOfPages, config.pdfMaxPagesPerSlide );\n\n\t\t\t\t// Center slides vertically\n\t\t\t\tif( numberOfPages === 1 && config.center || slide.classList.contains( 'center' ) ) {\n\t\t\t\t\ttop = Math.max( ( pageHeight - contentHeight ) / 2, 0 );\n\t\t\t\t}\n\n\t\t\t\t// Wrap the slide in a page element and hide its overflow\n\t\t\t\t// so that no page ever flows onto another\n\t\t\t\tvar page = document.createElement( 'div' );\n\t\t\t\tpage.className = 'pdf-page';\n\t\t\t\tpage.style.height = ( ( pageHeight + config.pdfPageHeightOffset ) * numberOfPages ) + 'px';\n\t\t\t\tslide.parentNode.insertBefore( page, slide );\n\t\t\t\tpage.appendChild( slide );\n\n\t\t\t\t// Position the slide inside of the page\n\t\t\t\tslide.style.left = left + 'px';\n\t\t\t\tslide.style.top = top + 'px';\n\t\t\t\tslide.style.width = slideWidth + 'px';\n\n\t\t\t\tif( slide.slideBackgroundElement ) {\n\t\t\t\t\tpage.insertBefore( slide.slideBackgroundElement, slide );\n\t\t\t\t}\n\n\t\t\t\t// Inject notes if `showNotes` is enabled\n\t\t\t\tif( config.showNotes ) {\n\n\t\t\t\t\t// Are there notes for this slide?\n\t\t\t\t\tvar notes = getSlideNotes( slide );\n\t\t\t\t\tif( notes ) {\n\n\t\t\t\t\t\tvar notesSpacing = 8;\n\t\t\t\t\t\tvar notesLayout = typeof config.showNotes === 'string' ? config.showNotes : 'inline';\n\t\t\t\t\t\tvar notesElement = document.createElement( 'div' );\n\t\t\t\t\t\tnotesElement.classList.add( 'speaker-notes' );\n\t\t\t\t\t\tnotesElement.classList.add( 'speaker-notes-pdf' );\n\t\t\t\t\t\tnotesElement.setAttribute( 'data-layout', notesLayout );\n\t\t\t\t\t\tnotesElement.innerHTML = notes;\n\n\t\t\t\t\t\tif( notesLayout === 'separate-page' ) {\n\t\t\t\t\t\t\tpage.parentNode.insertBefore( notesElement, page.nextSibling );\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tnotesElement.style.left = notesSpacing + 'px';\n\t\t\t\t\t\t\tnotesElement.style.bottom = notesSpacing + 'px';\n\t\t\t\t\t\t\tnotesElement.style.width = ( pageWidth - notesSpacing*2 ) + 'px';\n\t\t\t\t\t\t\tpage.appendChild( notesElement );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// Inject slide numbers if `slideNumbers` are enabled\n\t\t\t\tif( doingSlideNumbers ) {\n\t\t\t\t\tvar numberElement = document.createElement( 'div' );\n\t\t\t\t\tnumberElement.classList.add( 'slide-number' );\n\t\t\t\t\tnumberElement.classList.add( 'slide-number-pdf' );\n\t\t\t\t\tnumberElement.innerHTML = slide.getAttribute( 'data-slide-number' );\n\t\t\t\t\tpage.appendChild( numberElement );\n\t\t\t\t}\n\n\t\t\t\t// Copy page and show fragments one after another\n\t\t\t\tif( config.pdfSeparateFragments ) {\n\n\t\t\t\t\t// Each fragment 'group' is an array containing one or more\n\t\t\t\t\t// fragments. Multiple fragments that appear at the same time\n\t\t\t\t\t// are part of the same group.\n\t\t\t\t\tvar fragmentGroups = sortFragments( page.querySelectorAll( '.fragment' ), true );\n\n\t\t\t\t\tvar previousFragmentStep;\n\t\t\t\t\tvar previousPage;\n\n\t\t\t\t\tfragmentGroups.forEach( function( fragments ) {\n\n\t\t\t\t\t\t// Remove 'current-fragment' from the previous group\n\t\t\t\t\t\tif( previousFragmentStep ) {\n\t\t\t\t\t\t\tpreviousFragmentStep.forEach( function( fragment ) {\n\t\t\t\t\t\t\t\tfragment.classList.remove( 'current-fragment' );\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Show the fragments for the current index\n\t\t\t\t\t\tfragments.forEach( function( fragment ) {\n\t\t\t\t\t\t\tfragment.classList.add( 'visible', 'current-fragment' );\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t// Create a separate page for the current fragment state\n\t\t\t\t\t\tvar clonedPage = page.cloneNode( true );\n\t\t\t\t\t\tpage.parentNode.insertBefore( clonedPage, ( previousPage || page ).nextSibling );\n\n\t\t\t\t\t\tpreviousFragmentStep = fragments;\n\t\t\t\t\t\tpreviousPage = clonedPage;\n\n\t\t\t\t\t} );\n\n\t\t\t\t\t// Reset the first/original page so that all fragments are hidden\n\t\t\t\t\tfragmentGroups.forEach( function( fragments ) {\n\t\t\t\t\t\tfragments.forEach( function( fragment ) {\n\t\t\t\t\t\t\tfragment.classList.remove( 'visible', 'current-fragment' );\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\t\t\t\t// Show all fragments\n\t\t\t\telse {\n\t\t\t\t\ttoArray( page.querySelectorAll( '.fragment:not(.fade-out)' ) ).forEach( function( fragment ) {\n\t\t\t\t\t\tfragment.classList.add( 'visible' );\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\t// Notify subscribers that the PDF layout is good to go\n\t\tdispatchEvent( 'pdf-ready' );\n\n\t}\n\n\t/**\n\t * This is an unfortunate necessity. Some actions  such as\n\t * an input field being focused in an iframe or using the\n\t * keyboard to expand text selection beyond the bounds of\n\t * a slide  can trigger our content to be pushed out of view.\n\t * This scrolling can not be prevented by hiding overflow in\n\t * CSS (we already do) so we have to resort to repeatedly\n\t * checking if the slides have been offset :(\n\t */\n\tfunction setupScrollPrevention() {\n\n\t\tsetInterval( function() {\n\t\t\tif( dom.wrapper.scrollTop !== 0 || dom.wrapper.scrollLeft !== 0 ) {\n\t\t\t\tdom.wrapper.scrollTop = 0;\n\t\t\t\tdom.wrapper.scrollLeft = 0;\n\t\t\t}\n\t\t}, 1000 );\n\n\t}\n\n\t/**\n\t * Creates an HTML element and returns a reference to it.\n\t * If the element already exists the existing instance will\n\t * be returned.\n\t *\n\t * @param {HTMLElement} container\n\t * @param {string} tagname\n\t * @param {string} classname\n\t * @param {string} innerHTML\n\t *\n\t * @return {HTMLElement}\n\t */\n\tfunction createSingletonNode( container, tagname, classname, innerHTML ) {\n\n\t\t// Find all nodes matching the description\n\t\tvar nodes = container.querySelectorAll( '.' + classname );\n\n\t\t// Check all matches to find one which is a direct child of\n\t\t// the specified container\n\t\tfor( var i = 0; i < nodes.length; i++ ) {\n\t\t\tvar testNode = nodes[i];\n\t\t\tif( testNode.parentNode === container ) {\n\t\t\t\treturn testNode;\n\t\t\t}\n\t\t}\n\n\t\t// If no node was found, create it now\n\t\tvar node = document.createElement( tagname );\n\t\tnode.className = classname;\n\t\tif( typeof innerHTML === 'string' ) {\n\t\t\tnode.innerHTML = innerHTML;\n\t\t}\n\t\tcontainer.appendChild( node );\n\n\t\treturn node;\n\n\t}\n\n\t/**\n\t * Creates the slide background elements and appends them\n\t * to the background container. One element is created per\n\t * slide no matter if the given slide has visible background.\n\t */\n\tfunction createBackgrounds() {\n\n\t\tvar printMode = isPrintingPDF();\n\n\t\t// Clear prior backgrounds\n\t\tdom.background.innerHTML = '';\n\t\tdom.background.classList.add( 'no-transition' );\n\n\t\t// Iterate over all horizontal slides\n\t\ttoArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) ).forEach( function( slideh ) {\n\n\t\t\tvar backgroundStack = createBackground( slideh, dom.background );\n\n\t\t\t// Iterate over all vertical slides\n\t\t\ttoArray( slideh.querySelectorAll( 'section' ) ).forEach( function( slidev ) {\n\n\t\t\t\tcreateBackground( slidev, backgroundStack );\n\n\t\t\t\tbackgroundStack.classList.add( 'stack' );\n\n\t\t\t} );\n\n\t\t} );\n\n\t\t// Add parallax background if specified\n\t\tif( config.parallaxBackgroundImage ) {\n\n\t\t\tdom.background.style.backgroundImage = 'url(\"' + config.parallaxBackgroundImage + '\")';\n\t\t\tdom.background.style.backgroundSize = config.parallaxBackgroundSize;\n\t\t\tdom.background.style.backgroundRepeat = config.parallaxBackgroundRepeat;\n\t\t\tdom.background.style.backgroundPosition = config.parallaxBackgroundPosition;\n\n\t\t\t// Make sure the below properties are set on the element - these properties are\n\t\t\t// needed for proper transitions to be set on the element via CSS. To remove\n\t\t\t// annoying background slide-in effect when the presentation starts, apply\n\t\t\t// these properties after short time delay\n\t\t\tsetTimeout( function() {\n\t\t\t\tdom.wrapper.classList.add( 'has-parallax-background' );\n\t\t\t}, 1 );\n\n\t\t}\n\t\telse {\n\n\t\t\tdom.background.style.backgroundImage = '';\n\t\t\tdom.wrapper.classList.remove( 'has-parallax-background' );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Creates a background for the given slide.\n\t *\n\t * @param {HTMLElement} slide\n\t * @param {HTMLElement} container The element that the background\n\t * should be appended to\n\t * @return {HTMLElement} New background div\n\t */\n\tfunction createBackground( slide, container ) {\n\n\n\t\t// Main slide background element\n\t\tvar element = document.createElement( 'div' );\n\t\telement.className = 'slide-background ' + slide.className.replace( /present|past|future/, '' );\n\n\t\t// Inner background element that wraps images/videos/iframes\n\t\tvar contentElement = document.createElement( 'div' );\n\t\tcontentElement.className = 'slide-background-content';\n\n\t\telement.appendChild( contentElement );\n\t\tcontainer.appendChild( element );\n\n\t\tslide.slideBackgroundElement = element;\n\t\tslide.slideBackgroundContentElement = contentElement;\n\n\t\t// Syncs the background to reflect all current background settings\n\t\tsyncBackground( slide );\n\n\t\treturn element;\n\n\t}\n\n\t/**\n\t * Renders all of the visual properties of a slide background\n\t * based on the various background attributes.\n\t *\n\t * @param {HTMLElement} slide\n\t */\n\tfunction syncBackground( slide ) {\n\n\t\tvar element = slide.slideBackgroundElement,\n\t\t\tcontentElement = slide.slideBackgroundContentElement;\n\n\t\t// Reset the prior background state in case this is not the\n\t\t// initial sync\n\t\tslide.classList.remove( 'has-dark-background' );\n\t\tslide.classList.remove( 'has-light-background' );\n\n\t\telement.removeAttribute( 'data-loaded' );\n\t\telement.removeAttribute( 'data-background-hash' );\n\t\telement.removeAttribute( 'data-background-size' );\n\t\telement.removeAttribute( 'data-background-transition' );\n\t\telement.style.backgroundColor = '';\n\n\t\tcontentElement.style.backgroundSize = '';\n\t\tcontentElement.style.backgroundRepeat = '';\n\t\tcontentElement.style.backgroundPosition = '';\n\t\tcontentElement.style.backgroundImage = '';\n\t\tcontentElement.style.opacity = '';\n\t\tcontentElement.innerHTML = '';\n\n\t\tvar data = {\n\t\t\tbackground: slide.getAttribute( 'data-background' ),\n\t\t\tbackgroundSize: slide.getAttribute( 'data-background-size' ),\n\t\t\tbackgroundImage: slide.getAttribute( 'data-background-image' ),\n\t\t\tbackgroundVideo: slide.getAttribute( 'data-background-video' ),\n\t\t\tbackgroundIframe: slide.getAttribute( 'data-background-iframe' ),\n\t\t\tbackgroundColor: slide.getAttribute( 'data-background-color' ),\n\t\t\tbackgroundRepeat: slide.getAttribute( 'data-background-repeat' ),\n\t\t\tbackgroundPosition: slide.getAttribute( 'data-background-position' ),\n\t\t\tbackgroundTransition: slide.getAttribute( 'data-background-transition' ),\n\t\t\tbackgroundOpacity: slide.getAttribute( 'data-background-opacity' )\n\t\t};\n\n\t\tif( data.background ) {\n\t\t\t// Auto-wrap image urls in url(...)\n\t\t\tif( /^(http|file|\\/\\/)/gi.test( data.background ) || /\\.(svg|png|jpg|jpeg|gif|bmp)([?#\\s]|$)/gi.test( data.background ) ) {\n\t\t\t\tslide.setAttribute( 'data-background-image', data.background );\n\t\t\t}\n\t\t\telse {\n\t\t\t\telement.style.background = data.background;\n\t\t\t}\n\t\t}\n\n\t\t// Create a hash for this combination of background settings.\n\t\t// This is used to determine when two slide backgrounds are\n\t\t// the same.\n\t\tif( data.background || data.backgroundColor || data.backgroundImage || data.backgroundVideo || data.backgroundIframe ) {\n\t\t\telement.setAttribute( 'data-background-hash', data.background +\n\t\t\t\tdata.backgroundSize +\n\t\t\t\tdata.backgroundImage +\n\t\t\t\tdata.backgroundVideo +\n\t\t\t\tdata.backgroundIframe +\n\t\t\t\tdata.backgroundColor +\n\t\t\t\tdata.backgroundRepeat +\n\t\t\t\tdata.backgroundPosition +\n\t\t\t\tdata.backgroundTransition +\n\t\t\t\tdata.backgroundOpacity );\n\t\t}\n\n\t\t// Additional and optional background properties\n\t\tif( data.backgroundSize ) element.setAttribute( 'data-background-size', data.backgroundSize );\n\t\tif( data.backgroundColor ) element.style.backgroundColor = data.backgroundColor;\n\t\tif( data.backgroundTransition ) element.setAttribute( 'data-background-transition', data.backgroundTransition );\n\n\t\tif( slide.hasAttribute( 'data-preload' ) ) element.setAttribute( 'data-preload', '' );\n\n\t\t// Background image options are set on the content wrapper\n\t\tif( data.backgroundSize ) contentElement.style.backgroundSize = data.backgroundSize;\n\t\tif( data.backgroundRepeat ) contentElement.style.backgroundRepeat = data.backgroundRepeat;\n\t\tif( data.backgroundPosition ) contentElement.style.backgroundPosition = data.backgroundPosition;\n\t\tif( data.backgroundOpacity ) contentElement.style.opacity = data.backgroundOpacity;\n\n\t\t// If this slide has a background color, we add a class that\n\t\t// signals if it is light or dark. If the slide has no background\n\t\t// color, no class will be added\n\t\tvar contrastColor = data.backgroundColor;\n\n\t\t// If no bg color was found, check the computed background\n\t\tif( !contrastColor ) {\n\t\t\tvar computedBackgroundStyle = window.getComputedStyle( element );\n\t\t\tif( computedBackgroundStyle && computedBackgroundStyle.backgroundColor ) {\n\t\t\t\tcontrastColor = computedBackgroundStyle.backgroundColor;\n\t\t\t}\n\t\t}\n\n\t\tif( contrastColor ) {\n\t\t\tvar rgb = colorToRgb( contrastColor );\n\n\t\t\t// Ignore fully transparent backgrounds. Some browsers return\n\t\t\t// rgba(0,0,0,0) when reading the computed background color of\n\t\t\t// an element with no background\n\t\t\tif( rgb && rgb.a !== 0 ) {\n\t\t\t\tif( colorBrightness( contrastColor ) < 128 ) {\n\t\t\t\t\tslide.classList.add( 'has-dark-background' );\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tslide.classList.add( 'has-light-background' );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Registers a listener to postMessage events, this makes it\n\t * possible to call all reveal.js API methods from another\n\t * window. For example:\n\t *\n\t * revealWindow.postMessage( JSON.stringify({\n\t *   method: 'slide',\n\t *   args: [ 2 ]\n\t * }), '*' );\n\t */\n\tfunction setupPostMessage() {\n\n\t\tif( config.postMessage ) {\n\t\t\twindow.addEventListener( 'message', function ( event ) {\n\t\t\t\tvar data = event.data;\n\n\t\t\t\t// Make sure we're dealing with JSON\n\t\t\t\tif( typeof data === 'string' && data.charAt( 0 ) === '{' && data.charAt( data.length - 1 ) === '}' ) {\n\t\t\t\t\tdata = JSON.parse( data );\n\n\t\t\t\t\t// Check if the requested method can be found\n\t\t\t\t\tif( data.method && typeof Reveal[data.method] === 'function' ) {\n\n\t\t\t\t\t\tif( POST_MESSAGE_METHOD_BLACKLIST.test( data.method ) === false ) {\n\n\t\t\t\t\t\t\tvar result = Reveal[data.method].apply( Reveal, data.args );\n\n\t\t\t\t\t\t\t// Dispatch a postMessage event with the returned value from\n\t\t\t\t\t\t\t// our method invocation for getter functions\n\t\t\t\t\t\t\tdispatchPostMessage( 'callback', { method: data.method, result: result } );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tconsole.warn( 'reveal.js: \"'+ data.method +'\" is is blacklisted from the postMessage API' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, false );\n\t\t}\n\n\t}\n\n\t/**\n\t * Applies the configuration settings from the config\n\t * object. May be called multiple times.\n\t *\n\t * @param {object} options\n\t */\n\tfunction configure( options ) {\n\n\t\tvar oldTransition = config.transition;\n\n\t\t// New config options may be passed when this method\n\t\t// is invoked through the API after initialization\n\t\tif( typeof options === 'object' ) extend( config, options );\n\n\t\t// Abort if reveal.js hasn't finished loading, config\n\t\t// changes will be applied automatically once loading\n\t\t// finishes\n\t\tif( loaded === false ) return;\n\n\t\tvar numberOfSlides = dom.wrapper.querySelectorAll( SLIDES_SELECTOR ).length;\n\n\t\t// Remove the previously configured transition class\n\t\tdom.wrapper.classList.remove( oldTransition );\n\n\t\t// Force linear transition based on browser capabilities\n\t\tif( features.transforms3d === false ) config.transition = 'linear';\n\n\t\tdom.wrapper.classList.add( config.transition );\n\n\t\tdom.wrapper.setAttribute( 'data-transition-speed', config.transitionSpeed );\n\t\tdom.wrapper.setAttribute( 'data-background-transition', config.backgroundTransition );\n\n\t\tdom.controls.style.display = config.controls ? 'block' : 'none';\n\t\tdom.progress.style.display = config.progress ? 'block' : 'none';\n\n\t\tdom.controls.setAttribute( 'data-controls-layout', config.controlsLayout );\n\t\tdom.controls.setAttribute( 'data-controls-back-arrows', config.controlsBackArrows );\n\n\t\tif( config.shuffle ) {\n\t\t\tshuffle();\n\t\t}\n\n\t\tif( config.rtl ) {\n\t\t\tdom.wrapper.classList.add( 'rtl' );\n\t\t}\n\t\telse {\n\t\t\tdom.wrapper.classList.remove( 'rtl' );\n\t\t}\n\n\t\tif( config.center ) {\n\t\t\tdom.wrapper.classList.add( 'center' );\n\t\t}\n\t\telse {\n\t\t\tdom.wrapper.classList.remove( 'center' );\n\t\t}\n\n\t\t// Exit the paused mode if it was configured off\n\t\tif( config.pause === false ) {\n\t\t\tresume();\n\t\t}\n\n\t\tif( config.showNotes ) {\n\t\t\tdom.speakerNotes.setAttribute( 'data-layout', typeof config.showNotes === 'string' ? config.showNotes : 'inline' );\n\t\t}\n\n\t\tif( config.mouseWheel ) {\n\t\t\tdocument.addEventListener( 'DOMMouseScroll', onDocumentMouseScroll, false ); // FF\n\t\t\tdocument.addEventListener( 'mousewheel', onDocumentMouseScroll, false );\n\t\t}\n\t\telse {\n\t\t\tdocument.removeEventListener( 'DOMMouseScroll', onDocumentMouseScroll, false ); // FF\n\t\t\tdocument.removeEventListener( 'mousewheel', onDocumentMouseScroll, false );\n\t\t}\n\n\t\t// Rolling 3D links\n\t\tif( config.rollingLinks ) {\n\t\t\tenableRollingLinks();\n\t\t}\n\t\telse {\n\t\t\tdisableRollingLinks();\n\t\t}\n\n\t\t// Auto-hide the mouse pointer when its inactive\n\t\tif( config.hideInactiveCursor ) {\n\t\t\tdocument.addEventListener( 'mousemove', onDocumentCursorActive, false );\n\t\t\tdocument.addEventListener( 'mousedown', onDocumentCursorActive, false );\n\t\t}\n\t\telse {\n\t\t\tshowCursor();\n\n\t\t\tdocument.removeEventListener( 'mousemove', onDocumentCursorActive, false );\n\t\t\tdocument.removeEventListener( 'mousedown', onDocumentCursorActive, false );\n\t\t}\n\n\t\t// Iframe link previews\n\t\tif( config.previewLinks ) {\n\t\t\tenablePreviewLinks();\n\t\t\tdisablePreviewLinks( '[data-preview-link=false]' );\n\t\t}\n\t\telse {\n\t\t\tdisablePreviewLinks();\n\t\t\tenablePreviewLinks( '[data-preview-link]:not([data-preview-link=false])' );\n\t\t}\n\n\t\t// Remove existing auto-slide controls\n\t\tif( autoSlidePlayer ) {\n\t\t\tautoSlidePlayer.destroy();\n\t\t\tautoSlidePlayer = null;\n\t\t}\n\n\t\t// Generate auto-slide controls if needed\n\t\tif( numberOfSlides > 1 && config.autoSlide && config.autoSlideStoppable && features.canvas && features.requestAnimationFrame ) {\n\t\t\tautoSlidePlayer = new Playback( dom.wrapper, function() {\n\t\t\t\treturn Math.min( Math.max( ( Date.now() - autoSlideStartTime ) / autoSlide, 0 ), 1 );\n\t\t\t} );\n\n\t\t\tautoSlidePlayer.on( 'click', onAutoSlidePlayerClick );\n\t\t\tautoSlidePaused = false;\n\t\t}\n\n\t\t// When fragments are turned off they should be visible\n\t\tif( config.fragments === false ) {\n\t\t\ttoArray( dom.slides.querySelectorAll( '.fragment' ) ).forEach( function( element ) {\n\t\t\t\telement.classList.add( 'visible' );\n\t\t\t\telement.classList.remove( 'current-fragment' );\n\t\t\t} );\n\t\t}\n\n\t\t// Slide numbers\n\t\tvar slideNumberDisplay = 'none';\n\t\tif( config.slideNumber && !isPrintingPDF() ) {\n\t\t\tif( config.showSlideNumber === 'all' ) {\n\t\t\t\tslideNumberDisplay = 'block';\n\t\t\t}\n\t\t\telse if( config.showSlideNumber === 'speaker' && isSpeakerNotes() ) {\n\t\t\t\tslideNumberDisplay = 'block';\n\t\t\t}\n\t\t}\n\n\t\tdom.slideNumber.style.display = slideNumberDisplay;\n\n\t\t// Add the navigation mode to the DOM so we can adjust styling\n\t\tif( config.navigationMode !== 'default' ) {\n\t\t\tdom.wrapper.setAttribute( 'data-navigation-mode', config.navigationMode );\n\t\t}\n\t\telse {\n\t\t\tdom.wrapper.removeAttribute( 'data-navigation-mode' );\n\t\t}\n\n\t\t// Define our contextual list of keyboard shortcuts\n\t\tif( config.navigationMode === 'linear' ) {\n\t\t\tkeyboardShortcuts['&#8594;  ,  &#8595;  ,  SPACE  ,  N  ,  L  ,  J'] = 'Next slide';\n\t\t\tkeyboardShortcuts['&#8592;  ,  &#8593;  ,  P  ,  H  ,  K']           = 'Previous slide';\n\t\t}\n\t\telse {\n\t\t\tkeyboardShortcuts['N  ,  SPACE']   = 'Next slide';\n\t\t\tkeyboardShortcuts['P']             = 'Previous slide';\n\t\t\tkeyboardShortcuts['&#8592;  ,  H'] = 'Navigate left';\n\t\t\tkeyboardShortcuts['&#8594;  ,  L'] = 'Navigate right';\n\t\t\tkeyboardShortcuts['&#8593;  ,  K'] = 'Navigate up';\n\t\t\tkeyboardShortcuts['&#8595;  ,  J'] = 'Navigate down';\n\t\t}\n\n\t\tkeyboardShortcuts['Home  ,  Shift &#8592;']        = 'First slide';\n\t\tkeyboardShortcuts['End  ,  Shift &#8594;']         = 'Last slide';\n\t\tkeyboardShortcuts['B  ,  .']                       = 'Pause';\n\t\tkeyboardShortcuts['F']                             = 'Fullscreen';\n\t\tkeyboardShortcuts['ESC, O']                        = 'Slide overview';\n\n\t\tsync();\n\n\t}\n\n\t/**\n\t * Binds all event listeners.\n\t */\n\tfunction addEventListeners() {\n\n\t\teventsAreBound = true;\n\n\t\twindow.addEventListener( 'hashchange', onWindowHashChange, false );\n\t\twindow.addEventListener( 'resize', onWindowResize, false );\n\n\t\tif( config.touch ) {\n\t\t\tif( 'onpointerdown' in window ) {\n\t\t\t\t// Use W3C pointer events\n\t\t\t\tdom.wrapper.addEventListener( 'pointerdown', onPointerDown, false );\n\t\t\t\tdom.wrapper.addEventListener( 'pointermove', onPointerMove, false );\n\t\t\t\tdom.wrapper.addEventListener( 'pointerup', onPointerUp, false );\n\t\t\t}\n\t\t\telse if( window.navigator.msPointerEnabled ) {\n\t\t\t\t// IE 10 uses prefixed version of pointer events\n\t\t\t\tdom.wrapper.addEventListener( 'MSPointerDown', onPointerDown, false );\n\t\t\t\tdom.wrapper.addEventListener( 'MSPointerMove', onPointerMove, false );\n\t\t\t\tdom.wrapper.addEventListener( 'MSPointerUp', onPointerUp, false );\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Fall back to touch events\n\t\t\t\tdom.wrapper.addEventListener( 'touchstart', onTouchStart, false );\n\t\t\t\tdom.wrapper.addEventListener( 'touchmove', onTouchMove, false );\n\t\t\t\tdom.wrapper.addEventListener( 'touchend', onTouchEnd, false );\n\t\t\t}\n\t\t}\n\n\t\tif( config.keyboard ) {\n\t\t\tdocument.addEventListener( 'keydown', onDocumentKeyDown, false );\n\t\t\tdocument.addEventListener( 'keypress', onDocumentKeyPress, false );\n\t\t}\n\n\t\tif( config.progress && dom.progress ) {\n\t\t\tdom.progress.addEventListener( 'click', onProgressClicked, false );\n\t\t}\n\n\t\tdom.pauseOverlay.addEventListener( 'click', resume, false );\n\n\t\tif( config.focusBodyOnPageVisibilityChange ) {\n\t\t\tvar visibilityChange;\n\n\t\t\tif( 'hidden' in document ) {\n\t\t\t\tvisibilityChange = 'visibilitychange';\n\t\t\t}\n\t\t\telse if( 'msHidden' in document ) {\n\t\t\t\tvisibilityChange = 'msvisibilitychange';\n\t\t\t}\n\t\t\telse if( 'webkitHidden' in document ) {\n\t\t\t\tvisibilityChange = 'webkitvisibilitychange';\n\t\t\t}\n\n\t\t\tif( visibilityChange ) {\n\t\t\t\tdocument.addEventListener( visibilityChange, onPageVisibilityChange, false );\n\t\t\t}\n\t\t}\n\n\t\t// Listen to both touch and click events, in case the device\n\t\t// supports both\n\t\tvar pointerEvents = [ 'touchstart', 'click' ];\n\n\t\t// Only support touch for Android, fixes double navigations in\n\t\t// stock browser\n\t\tif( UA.match( /android/gi ) ) {\n\t\t\tpointerEvents = [ 'touchstart' ];\n\t\t}\n\n\t\tpointerEvents.forEach( function( eventName ) {\n\t\t\tdom.controlsLeft.forEach( function( el ) { el.addEventListener( eventName, onNavigateLeftClicked, false ); } );\n\t\t\tdom.controlsRight.forEach( function( el ) { el.addEventListener( eventName, onNavigateRightClicked, false ); } );\n\t\t\tdom.controlsUp.forEach( function( el ) { el.addEventListener( eventName, onNavigateUpClicked, false ); } );\n\t\t\tdom.controlsDown.forEach( function( el ) { el.addEventListener( eventName, onNavigateDownClicked, false ); } );\n\t\t\tdom.controlsPrev.forEach( function( el ) { el.addEventListener( eventName, onNavigatePrevClicked, false ); } );\n\t\t\tdom.controlsNext.forEach( function( el ) { el.addEventListener( eventName, onNavigateNextClicked, false ); } );\n\t\t} );\n\n\t}\n\n\t/**\n\t * Unbinds all event listeners.\n\t */\n\tfunction removeEventListeners() {\n\n\t\teventsAreBound = false;\n\n\t\tdocument.removeEventListener( 'keydown', onDocumentKeyDown, false );\n\t\tdocument.removeEventListener( 'keypress', onDocumentKeyPress, false );\n\t\twindow.removeEventListener( 'hashchange', onWindowHashChange, false );\n\t\twindow.removeEventListener( 'resize', onWindowResize, false );\n\n\t\tdom.wrapper.removeEventListener( 'pointerdown', onPointerDown, false );\n\t\tdom.wrapper.removeEventListener( 'pointermove', onPointerMove, false );\n\t\tdom.wrapper.removeEventListener( 'pointerup', onPointerUp, false );\n\n\t\tdom.wrapper.removeEventListener( 'MSPointerDown', onPointerDown, false );\n\t\tdom.wrapper.removeEventListener( 'MSPointerMove', onPointerMove, false );\n\t\tdom.wrapper.removeEventListener( 'MSPointerUp', onPointerUp, false );\n\n\t\tdom.wrapper.removeEventListener( 'touchstart', onTouchStart, false );\n\t\tdom.wrapper.removeEventListener( 'touchmove', onTouchMove, false );\n\t\tdom.wrapper.removeEventListener( 'touchend', onTouchEnd, false );\n\n\t\tdom.pauseOverlay.removeEventListener( 'click', resume, false );\n\n\t\tif ( config.progress && dom.progress ) {\n\t\t\tdom.progress.removeEventListener( 'click', onProgressClicked, false );\n\t\t}\n\n\t\t[ 'touchstart', 'click' ].forEach( function( eventName ) {\n\t\t\tdom.controlsLeft.forEach( function( el ) { el.removeEventListener( eventName, onNavigateLeftClicked, false ); } );\n\t\t\tdom.controlsRight.forEach( function( el ) { el.removeEventListener( eventName, onNavigateRightClicked, false ); } );\n\t\t\tdom.controlsUp.forEach( function( el ) { el.removeEventListener( eventName, onNavigateUpClicked, false ); } );\n\t\t\tdom.controlsDown.forEach( function( el ) { el.removeEventListener( eventName, onNavigateDownClicked, false ); } );\n\t\t\tdom.controlsPrev.forEach( function( el ) { el.removeEventListener( eventName, onNavigatePrevClicked, false ); } );\n\t\t\tdom.controlsNext.forEach( function( el ) { el.removeEventListener( eventName, onNavigateNextClicked, false ); } );\n\t\t} );\n\n\t}\n\n\t/**\n\t * Registers a new plugin with this reveal.js instance.\n\t *\n\t * reveal.js waits for all regisered plugins to initialize\n\t * before considering itself ready, as long as the plugin\n\t * is registered before calling `Reveal.initialize()`.\n\t */\n\tfunction registerPlugin( id, plugin ) {\n\n\t\tif( plugins[id] === undefined ) {\n\t\t\tplugins[id] = plugin;\n\n\t\t\t// If a plugin is registered after reveal.js is loaded,\n\t\t\t// initialize it right away\n\t\t\tif( loaded && typeof plugin.init === 'function' ) {\n\t\t\t\tplugin.init();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tconsole.warn( 'reveal.js: \"'+ id +'\" plugin has already been registered' );\n\t\t}\n\n\t}\n\n\t/**\n\t * Checks if a specific plugin has been registered.\n\t *\n\t * @param {String} id Unique plugin identifier\n\t */\n\tfunction hasPlugin( id ) {\n\n\t\treturn !!plugins[id];\n\n\t}\n\n\t/**\n\t * Returns the specific plugin instance, if a plugin\n\t * with the given ID has been registered.\n\t *\n\t * @param {String} id Unique plugin identifier\n\t */\n\tfunction getPlugin( id ) {\n\n\t\treturn plugins[id];\n\n\t}\n\n\t/**\n\t * Add a custom key binding with optional description to\n\t * be added to the help screen.\n\t */\n\tfunction addKeyBinding( binding, callback ) {\n\n\t\tif( typeof binding === 'object' && binding.keyCode ) {\n\t\t\tregisteredKeyBindings[binding.keyCode] = {\n\t\t\t\tcallback: callback,\n\t\t\t\tkey: binding.key,\n\t\t\t\tdescription: binding.description\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\tregisteredKeyBindings[binding] = {\n\t\t\t\tcallback: callback,\n\t\t\t\tkey: null,\n\t\t\t\tdescription: null\n\t\t\t};\n\t\t}\n\n\t}\n\n\t/**\n\t * Removes the specified custom key binding.\n\t */\n\tfunction removeKeyBinding( keyCode ) {\n\n\t\tdelete registeredKeyBindings[keyCode];\n\n\t}\n\n\t/**\n\t * Extend object a with the properties of object b.\n\t * If there's a conflict, object b takes precedence.\n\t *\n\t * @param {object} a\n\t * @param {object} b\n\t */\n\tfunction extend( a, b ) {\n\n\t\tfor( var i in b ) {\n\t\t\ta[ i ] = b[ i ];\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\t/**\n\t * Converts the target object to an array.\n\t *\n\t * @param {object} o\n\t * @return {object[]}\n\t */\n\tfunction toArray( o ) {\n\n\t\treturn Array.prototype.slice.call( o );\n\n\t}\n\n\t/**\n\t * Utility for deserializing a value.\n\t *\n\t * @param {*} value\n\t * @return {*}\n\t */\n\tfunction deserialize( value ) {\n\n\t\tif( typeof value === 'string' ) {\n\t\t\tif( value === 'null' ) return null;\n\t\t\telse if( value === 'true' ) return true;\n\t\t\telse if( value === 'false' ) return false;\n\t\t\telse if( value.match( /^-?[\\d\\.]+$/ ) ) return parseFloat( value );\n\t\t}\n\n\t\treturn value;\n\n\t}\n\n\t/**\n\t * Measures the distance in pixels between point a\n\t * and point b.\n\t *\n\t * @param {object} a point with x/y properties\n\t * @param {object} b point with x/y properties\n\t *\n\t * @return {number}\n\t */\n\tfunction distanceBetween( a, b ) {\n\n\t\tvar dx = a.x - b.x,\n\t\t\tdy = a.y - b.y;\n\n\t\treturn Math.sqrt( dx*dx + dy*dy );\n\n\t}\n\n\t/**\n\t * Applies a CSS transform to the target element.\n\t *\n\t * @param {HTMLElement} element\n\t * @param {string} transform\n\t */\n\tfunction transformElement( element, transform ) {\n\n\t\telement.style.WebkitTransform = transform;\n\t\telement.style.MozTransform = transform;\n\t\telement.style.msTransform = transform;\n\t\telement.style.transform = transform;\n\n\t}\n\n\t/**\n\t * Applies CSS transforms to the slides container. The container\n\t * is transformed from two separate sources: layout and the overview\n\t * mode.\n\t *\n\t * @param {object} transforms\n\t */\n\tfunction transformSlides( transforms ) {\n\n\t\t// Pick up new transforms from arguments\n\t\tif( typeof transforms.layout === 'string' ) slidesTransform.layout = transforms.layout;\n\t\tif( typeof transforms.overview === 'string' ) slidesTransform.overview = transforms.overview;\n\n\t\t// Apply the transforms to the slides container\n\t\tif( slidesTransform.layout ) {\n\t\t\ttransformElement( dom.slides, slidesTransform.layout + ' ' + slidesTransform.overview );\n\t\t}\n\t\telse {\n\t\t\ttransformElement( dom.slides, slidesTransform.overview );\n\t\t}\n\n\t}\n\n\t/**\n\t * Injects the given CSS styles into the DOM.\n\t *\n\t * @param {string} value\n\t */\n\tfunction injectStyleSheet( value ) {\n\n\t\tvar tag = document.createElement( 'style' );\n\t\ttag.type = 'text/css';\n\t\tif( tag.styleSheet ) {\n\t\t\ttag.styleSheet.cssText = value;\n\t\t}\n\t\telse {\n\t\t\ttag.appendChild( document.createTextNode( value ) );\n\t\t}\n\t\tdocument.getElementsByTagName( 'head' )[0].appendChild( tag );\n\n\t}\n\n\t/**\n\t * Find the closest parent that matches the given\n\t * selector.\n\t *\n\t * @param {HTMLElement} target The child element\n\t * @param {String} selector The CSS selector to match\n\t * the parents against\n\t *\n\t * @return {HTMLElement} The matched parent or null\n\t * if no matching parent was found\n\t */\n\tfunction closestParent( target, selector ) {\n\n\t\tvar parent = target.parentNode;\n\n\t\twhile( parent ) {\n\n\t\t\t// There's some overhead doing this each time, we don't\n\t\t\t// want to rewrite the element prototype but should still\n\t\t\t// be enough to feature detect once at startup...\n\t\t\tvar matchesMethod = parent.matches || parent.matchesSelector || parent.msMatchesSelector;\n\n\t\t\t// If we find a match, we're all set\n\t\t\tif( matchesMethod && matchesMethod.call( parent, selector ) ) {\n\t\t\t\treturn parent;\n\t\t\t}\n\n\t\t\t// Keep searching\n\t\t\tparent = parent.parentNode;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * Converts various color input formats to an {r:0,g:0,b:0} object.\n\t *\n\t * @param {string} color The string representation of a color\n\t * @example\n\t * colorToRgb('#000');\n\t * @example\n\t * colorToRgb('#000000');\n\t * @example\n\t * colorToRgb('rgb(0,0,0)');\n\t * @example\n\t * colorToRgb('rgba(0,0,0)');\n\t *\n\t * @return {{r: number, g: number, b: number, [a]: number}|null}\n\t */\n\tfunction colorToRgb( color ) {\n\n\t\tvar hex3 = color.match( /^#([0-9a-f]{3})$/i );\n\t\tif( hex3 && hex3[1] ) {\n\t\t\thex3 = hex3[1];\n\t\t\treturn {\n\t\t\t\tr: parseInt( hex3.charAt( 0 ), 16 ) * 0x11,\n\t\t\t\tg: parseInt( hex3.charAt( 1 ), 16 ) * 0x11,\n\t\t\t\tb: parseInt( hex3.charAt( 2 ), 16 ) * 0x11\n\t\t\t};\n\t\t}\n\n\t\tvar hex6 = color.match( /^#([0-9a-f]{6})$/i );\n\t\tif( hex6 && hex6[1] ) {\n\t\t\thex6 = hex6[1];\n\t\t\treturn {\n\t\t\t\tr: parseInt( hex6.substr( 0, 2 ), 16 ),\n\t\t\t\tg: parseInt( hex6.substr( 2, 2 ), 16 ),\n\t\t\t\tb: parseInt( hex6.substr( 4, 2 ), 16 )\n\t\t\t};\n\t\t}\n\n\t\tvar rgb = color.match( /^rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/i );\n\t\tif( rgb ) {\n\t\t\treturn {\n\t\t\t\tr: parseInt( rgb[1], 10 ),\n\t\t\t\tg: parseInt( rgb[2], 10 ),\n\t\t\t\tb: parseInt( rgb[3], 10 )\n\t\t\t};\n\t\t}\n\n\t\tvar rgba = color.match( /^rgba\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\,\\s*([\\d]+|[\\d]*.[\\d]+)\\s*\\)$/i );\n\t\tif( rgba ) {\n\t\t\treturn {\n\t\t\t\tr: parseInt( rgba[1], 10 ),\n\t\t\t\tg: parseInt( rgba[2], 10 ),\n\t\t\t\tb: parseInt( rgba[3], 10 ),\n\t\t\t\ta: parseFloat( rgba[4] )\n\t\t\t};\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * Calculates brightness on a scale of 0-255.\n\t *\n\t * @param {string} color See colorToRgb for supported formats.\n\t * @see {@link colorToRgb}\n\t */\n\tfunction colorBrightness( color ) {\n\n\t\tif( typeof color === 'string' ) color = colorToRgb( color );\n\n\t\tif( color ) {\n\t\t\treturn ( color.r * 299 + color.g * 587 + color.b * 114 ) / 1000;\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * Returns the remaining height within the parent of the\n\t * target element.\n\t *\n\t * remaining height = [ configured parent height ] - [ current parent height ]\n\t *\n\t * @param {HTMLElement} element\n\t * @param {number} [height]\n\t */\n\tfunction getRemainingHeight( element, height ) {\n\n\t\theight = height || 0;\n\n\t\tif( element ) {\n\t\t\tvar newHeight, oldHeight = element.style.height;\n\n\t\t\t// Change the .stretch element height to 0 in order find the height of all\n\t\t\t// the other elements\n\t\t\telement.style.height = '0px';\n\n\t\t\t// In Overview mode, the parent (.slide) height is set of 700px.\n\t\t\t// Restore it temporarily to its natural height.\n\t\t\telement.parentNode.style.height = 'auto';\n\n\t\t\tnewHeight = height - element.parentNode.offsetHeight;\n\n\t\t\t// Restore the old height, just in case\n\t\t\telement.style.height = oldHeight + 'px';\n\n\t\t\t// Clear the parent (.slide) height. .removeProperty works in IE9+\n\t\t\telement.parentNode.style.removeProperty('height');\n\n\t\t\treturn newHeight;\n\t\t}\n\n\t\treturn height;\n\n\t}\n\n\t/**\n\t * Checks if this instance is being used to print a PDF.\n\t */\n\tfunction isPrintingPDF() {\n\n\t\treturn ( /print-pdf/gi ).test( window.location.search );\n\n\t}\n\n\t/**\n\t * Hides the address bar if we're on a mobile device.\n\t */\n\tfunction hideAddressBar() {\n\n\t\tif( config.hideAddressBar && isMobileDevice ) {\n\t\t\t// Events that should trigger the address bar to hide\n\t\t\twindow.addEventListener( 'load', removeAddressBar, false );\n\t\t\twindow.addEventListener( 'orientationchange', removeAddressBar, false );\n\t\t}\n\n\t}\n\n\t/**\n\t * Causes the address bar to hide on mobile devices,\n\t * more vertical space ftw.\n\t */\n\tfunction removeAddressBar() {\n\n\t\tsetTimeout( function() {\n\t\t\twindow.scrollTo( 0, 1 );\n\t\t}, 10 );\n\n\t}\n\n\t/**\n\t * Dispatches an event of the specified type from the\n\t * reveal DOM element.\n\t */\n\tfunction dispatchEvent( type, args ) {\n\n\t\tvar event = document.createEvent( 'HTMLEvents', 1, 2 );\n\t\tevent.initEvent( type, true, true );\n\t\textend( event, args );\n\t\tdom.wrapper.dispatchEvent( event );\n\n\t\t// If we're in an iframe, post each reveal.js event to the\n\t\t// parent window. Used by the notes plugin\n\t\tdispatchPostMessage( type );\n\n\t}\n\n\t/**\n\t * Dispatched a postMessage of the given type from our window.\n\t */\n\tfunction dispatchPostMessage( type, data ) {\n\n\t\tif( config.postMessageEvents && window.parent !== window.self ) {\n\t\t\tvar message = {\n\t\t\t\tnamespace: 'reveal',\n\t\t\t\teventName: type,\n\t\t\t\tstate: getState()\n\t\t\t};\n\n\t\t\textend( message, data );\n\n\t\t\twindow.parent.postMessage( JSON.stringify( message ), '*' );\n\t\t}\n\n\t}\n\n\t/**\n\t * Wrap all links in 3D goodness.\n\t */\n\tfunction enableRollingLinks() {\n\n\t\tif( features.transforms3d && !( 'msPerspective' in document.body.style ) ) {\n\t\t\tvar anchors = dom.wrapper.querySelectorAll( SLIDES_SELECTOR + ' a' );\n\n\t\t\tfor( var i = 0, len = anchors.length; i < len; i++ ) {\n\t\t\t\tvar anchor = anchors[i];\n\n\t\t\t\tif( anchor.textContent && !anchor.querySelector( '*' ) && ( !anchor.className || !anchor.classList.contains( anchor, 'roll' ) ) ) {\n\t\t\t\t\tvar span = document.createElement('span');\n\t\t\t\t\tspan.setAttribute('data-title', anchor.text);\n\t\t\t\t\tspan.innerHTML = anchor.innerHTML;\n\n\t\t\t\t\tanchor.classList.add( 'roll' );\n\t\t\t\t\tanchor.innerHTML = '';\n\t\t\t\t\tanchor.appendChild(span);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Unwrap all 3D links.\n\t */\n\tfunction disableRollingLinks() {\n\n\t\tvar anchors = dom.wrapper.querySelectorAll( SLIDES_SELECTOR + ' a.roll' );\n\n\t\tfor( var i = 0, len = anchors.length; i < len; i++ ) {\n\t\t\tvar anchor = anchors[i];\n\t\t\tvar span = anchor.querySelector( 'span' );\n\n\t\t\tif( span ) {\n\t\t\t\tanchor.classList.remove( 'roll' );\n\t\t\t\tanchor.innerHTML = span.innerHTML;\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Bind preview frame links.\n\t *\n\t * @param {string} [selector=a] - selector for anchors\n\t */\n\tfunction enablePreviewLinks( selector ) {\n\n\t\tvar anchors = toArray( document.querySelectorAll( selector ? selector : 'a' ) );\n\n\t\tanchors.forEach( function( element ) {\n\t\t\tif( /^(http|www)/gi.test( element.getAttribute( 'href' ) ) ) {\n\t\t\t\telement.addEventListener( 'click', onPreviewLinkClicked, false );\n\t\t\t}\n\t\t} );\n\n\t}\n\n\t/**\n\t * Unbind preview frame links.\n\t */\n\tfunction disablePreviewLinks( selector ) {\n\n\t\tvar anchors = toArray( document.querySelectorAll( selector ? selector : 'a' ) );\n\n\t\tanchors.forEach( function( element ) {\n\t\t\tif( /^(http|www)/gi.test( element.getAttribute( 'href' ) ) ) {\n\t\t\t\telement.removeEventListener( 'click', onPreviewLinkClicked, false );\n\t\t\t}\n\t\t} );\n\n\t}\n\n\t/**\n\t * Opens a preview window for the target URL.\n\t *\n\t * @param {string} url - url for preview iframe src\n\t */\n\tfunction showPreview( url ) {\n\n\t\tcloseOverlay();\n\n\t\tdom.overlay = document.createElement( 'div' );\n\t\tdom.overlay.classList.add( 'overlay' );\n\t\tdom.overlay.classList.add( 'overlay-preview' );\n\t\tdom.wrapper.appendChild( dom.overlay );\n\n\t\tdom.overlay.innerHTML = [\n\t\t\t'<header>',\n\t\t\t'<a class=\"close\" href=\"#\"><span class=\"icon\"></span></a>',\n\t\t\t'<a class=\"external\" href=\"'+ url +'\" target=\"_blank\"><span class=\"icon\"></span></a>',\n\t\t\t'</header>',\n\t\t\t'<div class=\"spinner\"></div>',\n\t\t\t'<div class=\"viewport\">',\n\t\t\t'<iframe src=\"'+ url +'\"></iframe>',\n\t\t\t'<small class=\"viewport-inner\">',\n\t\t\t'<span class=\"x-frame-error\">Unable to load iframe. This is likely due to the site\\'s policy (x-frame-options).</span>',\n\t\t\t'</small>',\n\t\t\t'</div>'\n\t\t].join('');\n\n\t\tdom.overlay.querySelector( 'iframe' ).addEventListener( 'load', function( event ) {\n\t\t\tdom.overlay.classList.add( 'loaded' );\n\t\t}, false );\n\n\t\tdom.overlay.querySelector( '.close' ).addEventListener( 'click', function( event ) {\n\t\t\tcloseOverlay();\n\t\t\tevent.preventDefault();\n\t\t}, false );\n\n\t\tdom.overlay.querySelector( '.external' ).addEventListener( 'click', function( event ) {\n\t\t\tcloseOverlay();\n\t\t}, false );\n\n\t\tsetTimeout( function() {\n\t\t\tdom.overlay.classList.add( 'visible' );\n\t\t}, 1 );\n\n\t}\n\n\t/**\n\t * Open or close help overlay window.\n\t *\n\t * @param {Boolean} [override] Flag which overrides the\n\t * toggle logic and forcibly sets the desired state. True means\n\t * help is open, false means it's closed.\n\t */\n\tfunction toggleHelp( override ){\n\n\t\tif( typeof override === 'boolean' ) {\n\t\t\toverride ? showHelp() : closeOverlay();\n\t\t}\n\t\telse {\n\t\t\tif( dom.overlay ) {\n\t\t\t\tcloseOverlay();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tshowHelp();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Opens an overlay window with help material.\n\t */\n\tfunction showHelp() {\n\n\t\tif( config.help ) {\n\n\t\t\tcloseOverlay();\n\n\t\t\tdom.overlay = document.createElement( 'div' );\n\t\t\tdom.overlay.classList.add( 'overlay' );\n\t\t\tdom.overlay.classList.add( 'overlay-help' );\n\t\t\tdom.wrapper.appendChild( dom.overlay );\n\n\t\t\tvar html = '<p class=\"title\">Keyboard Shortcuts</p><br/>';\n\n\t\t\thtml += '<table><th>KEY</th><th>ACTION</th>';\n\t\t\tfor( var key in keyboardShortcuts ) {\n\t\t\t\thtml += '<tr><td>' + key + '</td><td>' + keyboardShortcuts[ key ] + '</td></tr>';\n\t\t\t}\n\n\t\t\t// Add custom key bindings that have associated descriptions\n\t\t\tfor( var binding in registeredKeyBindings ) {\n\t\t\t\tif( registeredKeyBindings[binding].key && registeredKeyBindings[binding].description ) {\n\t\t\t\t\thtml += '<tr><td>' + registeredKeyBindings[binding].key + '</td><td>' + registeredKeyBindings[binding].description + '</td></tr>';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\thtml += '</table>';\n\n\t\t\tdom.overlay.innerHTML = [\n\t\t\t\t'<header>',\n\t\t\t\t'<a class=\"close\" href=\"#\"><span class=\"icon\"></span></a>',\n\t\t\t\t'</header>',\n\t\t\t\t'<div class=\"viewport\">',\n\t\t\t\t'<div class=\"viewport-inner\">'+ html +'</div>',\n\t\t\t\t'</div>'\n\t\t\t].join('');\n\n\t\t\tdom.overlay.querySelector( '.close' ).addEventListener( 'click', function( event ) {\n\t\t\t\tcloseOverlay();\n\t\t\t\tevent.preventDefault();\n\t\t\t}, false );\n\n\t\t\tsetTimeout( function() {\n\t\t\t\tdom.overlay.classList.add( 'visible' );\n\t\t\t}, 1 );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Closes any currently open overlay.\n\t */\n\tfunction closeOverlay() {\n\n\t\tif( dom.overlay ) {\n\t\t\tdom.overlay.parentNode.removeChild( dom.overlay );\n\t\t\tdom.overlay = null;\n\t\t}\n\n\t}\n\n\t/**\n\t * Applies JavaScript-controlled layout rules to the\n\t * presentation.\n\t */\n\tfunction layout() {\n\n\t\tif( dom.wrapper && !isPrintingPDF() ) {\n\n\t\t\tif( !config.disableLayout ) {\n\n\t\t\t\t// On some mobile devices '100vh' is taller than the visible\n\t\t\t\t// viewport which leads to part of the presentation being\n\t\t\t\t// cut off. To work around this we define our own '--vh' custom\n\t\t\t\t// property where 100x adds up to the correct height.\n\t\t\t\t//\n\t\t\t\t// https://css-tricks.com/the-trick-to-viewport-units-on-mobile/\n\t\t\t\tif( isMobileDevice ) {\n\t\t\t\t\tdocument.documentElement.style.setProperty( '--vh', ( window.innerHeight * 0.01 ) + 'px' );\n\t\t\t\t}\n\n\t\t\t\tvar size = getComputedSlideSize();\n\n\t\t\t\tvar oldScale = scale;\n\n\t\t\t\t// Layout the contents of the slides\n\t\t\t\tlayoutSlideContents( config.width, config.height );\n\n\t\t\t\tdom.slides.style.width = size.width + 'px';\n\t\t\t\tdom.slides.style.height = size.height + 'px';\n\n\t\t\t\t// Determine scale of content to fit within available space\n\t\t\t\tscale = Math.min( size.presentationWidth / size.width, size.presentationHeight / size.height );\n\n\t\t\t\t// Respect max/min scale settings\n\t\t\t\tscale = Math.max( scale, config.minScale );\n\t\t\t\tscale = Math.min( scale, config.maxScale );\n\n\t\t\t\t// Don't apply any scaling styles if scale is 1\n\t\t\t\tif( scale === 1 ) {\n\t\t\t\t\tdom.slides.style.zoom = '';\n\t\t\t\t\tdom.slides.style.left = '';\n\t\t\t\t\tdom.slides.style.top = '';\n\t\t\t\t\tdom.slides.style.bottom = '';\n\t\t\t\t\tdom.slides.style.right = '';\n\t\t\t\t\ttransformSlides( { layout: '' } );\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Zoom Scaling\n\t\t\t\t\t// Content remains crisp no matter how much we scale. Side\n\t\t\t\t\t// effects are minor differences in text layout and iframe\n\t\t\t\t\t// viewports changing size. A 200x200 iframe viewport in a\n\t\t\t\t\t// 2x zoomed presentation ends up having a 400x400 viewport.\n\t\t\t\t\tif( scale > 1 && features.zoom && window.devicePixelRatio < 2 ) {\n\t\t\t\t\t\tdom.slides.style.zoom = scale;\n\t\t\t\t\t\tdom.slides.style.left = '';\n\t\t\t\t\t\tdom.slides.style.top = '';\n\t\t\t\t\t\tdom.slides.style.bottom = '';\n\t\t\t\t\t\tdom.slides.style.right = '';\n\t\t\t\t\t\ttransformSlides( { layout: '' } );\n\t\t\t\t\t}\n\t\t\t\t\t// Transform Scaling\n\t\t\t\t\t// Content layout remains the exact same when scaled up.\n\t\t\t\t\t// Side effect is content becoming blurred, especially with\n\t\t\t\t\t// high scale values on ldpi screens.\n\t\t\t\t\telse {\n\t\t\t\t\t\tdom.slides.style.zoom = '';\n\t\t\t\t\t\tdom.slides.style.left = '50%';\n\t\t\t\t\t\tdom.slides.style.top = '50%';\n\t\t\t\t\t\tdom.slides.style.bottom = 'auto';\n\t\t\t\t\t\tdom.slides.style.right = 'auto';\n\t\t\t\t\t\ttransformSlides( { layout: 'translate(-50%, -50%) scale('+ scale +')' } );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Select all slides, vertical and horizontal\n\t\t\t\tvar slides = toArray( dom.wrapper.querySelectorAll( SLIDES_SELECTOR ) );\n\n\t\t\t\tfor( var i = 0, len = slides.length; i < len; i++ ) {\n\t\t\t\t\tvar slide = slides[ i ];\n\n\t\t\t\t\t// Don't bother updating invisible slides\n\t\t\t\t\tif( slide.style.display === 'none' ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif( config.center || slide.classList.contains( 'center' ) ) {\n\t\t\t\t\t\t// Vertical stacks are not centred since their section\n\t\t\t\t\t\t// children will be\n\t\t\t\t\t\tif( slide.classList.contains( 'stack' ) ) {\n\t\t\t\t\t\t\tslide.style.top = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tslide.style.top = Math.max( ( size.height - slide.scrollHeight ) / 2, 0 ) + 'px';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tslide.style.top = '';\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif( oldScale !== scale ) {\n\t\t\t\t\tdispatchEvent( 'resize', {\n\t\t\t\t\t\t'oldScale': oldScale,\n\t\t\t\t\t\t'scale': scale,\n\t\t\t\t\t\t'size': size\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tupdateProgress();\n\t\t\tupdateParallax();\n\n\t\t\tif( isOverview() ) {\n\t\t\t\tupdateOverview();\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Applies layout logic to the contents of all slides in\n\t * the presentation.\n\t *\n\t * @param {string|number} width\n\t * @param {string|number} height\n\t */\n\tfunction layoutSlideContents( width, height ) {\n\n\t\t// Handle sizing of elements with the 'stretch' class\n\t\ttoArray( dom.slides.querySelectorAll( 'section > .stretch' ) ).forEach( function( element ) {\n\n\t\t\t// Determine how much vertical space we can use\n\t\t\tvar remainingHeight = getRemainingHeight( element, height );\n\n\t\t\t// Consider the aspect ratio of media elements\n\t\t\tif( /(img|video)/gi.test( element.nodeName ) ) {\n\t\t\t\tvar nw = element.naturalWidth || element.videoWidth,\n\t\t\t\t\tnh = element.naturalHeight || element.videoHeight;\n\n\t\t\t\tvar es = Math.min( width / nw, remainingHeight / nh );\n\n\t\t\t\telement.style.width = ( nw * es ) + 'px';\n\t\t\t\telement.style.height = ( nh * es ) + 'px';\n\n\t\t\t}\n\t\t\telse {\n\t\t\t\telement.style.width = width + 'px';\n\t\t\t\telement.style.height = remainingHeight + 'px';\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Calculates the computed pixel size of our slides. These\n\t * values are based on the width and height configuration\n\t * options.\n\t *\n\t * @param {number} [presentationWidth=dom.wrapper.offsetWidth]\n\t * @param {number} [presentationHeight=dom.wrapper.offsetHeight]\n\t */\n\tfunction getComputedSlideSize( presentationWidth, presentationHeight ) {\n\n\t\tvar size = {\n\t\t\t// Slide size\n\t\t\twidth: config.width,\n\t\t\theight: config.height,\n\n\t\t\t// Presentation size\n\t\t\tpresentationWidth: presentationWidth || dom.wrapper.offsetWidth,\n\t\t\tpresentationHeight: presentationHeight || dom.wrapper.offsetHeight\n\t\t};\n\n\t\t// Reduce available space by margin\n\t\tsize.presentationWidth -= ( size.presentationWidth * config.margin );\n\t\tsize.presentationHeight -= ( size.presentationHeight * config.margin );\n\n\t\t// Slide width may be a percentage of available width\n\t\tif( typeof size.width === 'string' && /%$/.test( size.width ) ) {\n\t\t\tsize.width = parseInt( size.width, 10 ) / 100 * size.presentationWidth;\n\t\t}\n\n\t\t// Slide height may be a percentage of available height\n\t\tif( typeof size.height === 'string' && /%$/.test( size.height ) ) {\n\t\t\tsize.height = parseInt( size.height, 10 ) / 100 * size.presentationHeight;\n\t\t}\n\n\t\treturn size;\n\n\t}\n\n\t/**\n\t * Stores the vertical index of a stack so that the same\n\t * vertical slide can be selected when navigating to and\n\t * from the stack.\n\t *\n\t * @param {HTMLElement} stack The vertical stack element\n\t * @param {string|number} [v=0] Index to memorize\n\t */\n\tfunction setPreviousVerticalIndex( stack, v ) {\n\n\t\tif( typeof stack === 'object' && typeof stack.setAttribute === 'function' ) {\n\t\t\tstack.setAttribute( 'data-previous-indexv', v || 0 );\n\t\t}\n\n\t}\n\n\t/**\n\t * Retrieves the vertical index which was stored using\n\t * #setPreviousVerticalIndex() or 0 if no previous index\n\t * exists.\n\t *\n\t * @param {HTMLElement} stack The vertical stack element\n\t */\n\tfunction getPreviousVerticalIndex( stack ) {\n\n\t\tif( typeof stack === 'object' && typeof stack.setAttribute === 'function' && stack.classList.contains( 'stack' ) ) {\n\t\t\t// Prefer manually defined start-indexv\n\t\t\tvar attributeName = stack.hasAttribute( 'data-start-indexv' ) ? 'data-start-indexv' : 'data-previous-indexv';\n\n\t\t\treturn parseInt( stack.getAttribute( attributeName ) || 0, 10 );\n\t\t}\n\n\t\treturn 0;\n\n\t}\n\n\t/**\n\t * Displays the overview of slides (quick nav) by scaling\n\t * down and arranging all slide elements.\n\t */\n\tfunction activateOverview() {\n\n\t\t// Only proceed if enabled in config\n\t\tif( config.overview && !isOverview() ) {\n\n\t\t\toverview = true;\n\n\t\t\tdom.wrapper.classList.add( 'overview' );\n\t\t\tdom.wrapper.classList.remove( 'overview-deactivating' );\n\n\t\t\tif( features.overviewTransitions ) {\n\t\t\t\tsetTimeout( function() {\n\t\t\t\t\tdom.wrapper.classList.add( 'overview-animated' );\n\t\t\t\t}, 1 );\n\t\t\t}\n\n\t\t\t// Don't auto-slide while in overview mode\n\t\t\tcancelAutoSlide();\n\n\t\t\t// Move the backgrounds element into the slide container to\n\t\t\t// that the same scaling is applied\n\t\t\tdom.slides.appendChild( dom.background );\n\n\t\t\t// Clicking on an overview slide navigates to it\n\t\t\ttoArray( dom.wrapper.querySelectorAll( SLIDES_SELECTOR ) ).forEach( function( slide ) {\n\t\t\t\tif( !slide.classList.contains( 'stack' ) ) {\n\t\t\t\t\tslide.addEventListener( 'click', onOverviewSlideClicked, true );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Calculate slide sizes\n\t\t\tvar margin = 70;\n\t\t\tvar slideSize = getComputedSlideSize();\n\t\t\toverviewSlideWidth = slideSize.width + margin;\n\t\t\toverviewSlideHeight = slideSize.height + margin;\n\n\t\t\t// Reverse in RTL mode\n\t\t\tif( config.rtl ) {\n\t\t\t\toverviewSlideWidth = -overviewSlideWidth;\n\t\t\t}\n\n\t\t\tupdateSlidesVisibility();\n\t\t\tlayoutOverview();\n\t\t\tupdateOverview();\n\n\t\t\tlayout();\n\n\t\t\t// Notify observers of the overview showing\n\t\t\tdispatchEvent( 'overviewshown', {\n\t\t\t\t'indexh': indexh,\n\t\t\t\t'indexv': indexv,\n\t\t\t\t'currentSlide': currentSlide\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Uses CSS transforms to position all slides in a grid for\n\t * display inside of the overview mode.\n\t */\n\tfunction layoutOverview() {\n\n\t\t// Layout slides\n\t\ttoArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) ).forEach( function( hslide, h ) {\n\t\t\thslide.setAttribute( 'data-index-h', h );\n\t\t\ttransformElement( hslide, 'translate3d(' + ( h * overviewSlideWidth ) + 'px, 0, 0)' );\n\n\t\t\tif( hslide.classList.contains( 'stack' ) ) {\n\n\t\t\t\ttoArray( hslide.querySelectorAll( 'section' ) ).forEach( function( vslide, v ) {\n\t\t\t\t\tvslide.setAttribute( 'data-index-h', h );\n\t\t\t\t\tvslide.setAttribute( 'data-index-v', v );\n\n\t\t\t\t\ttransformElement( vslide, 'translate3d(0, ' + ( v * overviewSlideHeight ) + 'px, 0)' );\n\t\t\t\t} );\n\n\t\t\t}\n\t\t} );\n\n\t\t// Layout slide backgrounds\n\t\ttoArray( dom.background.childNodes ).forEach( function( hbackground, h ) {\n\t\t\ttransformElement( hbackground, 'translate3d(' + ( h * overviewSlideWidth ) + 'px, 0, 0)' );\n\n\t\t\ttoArray( hbackground.querySelectorAll( '.slide-background' ) ).forEach( function( vbackground, v ) {\n\t\t\t\ttransformElement( vbackground, 'translate3d(0, ' + ( v * overviewSlideHeight ) + 'px, 0)' );\n\t\t\t} );\n\t\t} );\n\n\t}\n\n\t/**\n\t * Moves the overview viewport to the current slides.\n\t * Called each time the current slide changes.\n\t */\n\tfunction updateOverview() {\n\n\t\tvar vmin = Math.min( window.innerWidth, window.innerHeight );\n\t\tvar scale = Math.max( vmin / 5, 150 ) / vmin;\n\n\t\ttransformSlides( {\n\t\t\toverview: [\n\t\t\t\t'scale('+ scale +')',\n\t\t\t\t'translateX('+ ( -indexh * overviewSlideWidth ) +'px)',\n\t\t\t\t'translateY('+ ( -indexv * overviewSlideHeight ) +'px)'\n\t\t\t].join( ' ' )\n\t\t} );\n\n\t}\n\n\t/**\n\t * Exits the slide overview and enters the currently\n\t * active slide.\n\t */\n\tfunction deactivateOverview() {\n\n\t\t// Only proceed if enabled in config\n\t\tif( config.overview ) {\n\n\t\t\toverview = false;\n\n\t\t\tdom.wrapper.classList.remove( 'overview' );\n\t\t\tdom.wrapper.classList.remove( 'overview-animated' );\n\n\t\t\t// Temporarily add a class so that transitions can do different things\n\t\t\t// depending on whether they are exiting/entering overview, or just\n\t\t\t// moving from slide to slide\n\t\t\tdom.wrapper.classList.add( 'overview-deactivating' );\n\n\t\t\tsetTimeout( function () {\n\t\t\t\tdom.wrapper.classList.remove( 'overview-deactivating' );\n\t\t\t}, 1 );\n\n\t\t\t// Move the background element back out\n\t\t\tdom.wrapper.appendChild( dom.background );\n\n\t\t\t// Clean up changes made to slides\n\t\t\ttoArray( dom.wrapper.querySelectorAll( SLIDES_SELECTOR ) ).forEach( function( slide ) {\n\t\t\t\ttransformElement( slide, '' );\n\n\t\t\t\tslide.removeEventListener( 'click', onOverviewSlideClicked, true );\n\t\t\t} );\n\n\t\t\t// Clean up changes made to backgrounds\n\t\t\ttoArray( dom.background.querySelectorAll( '.slide-background' ) ).forEach( function( background ) {\n\t\t\t\ttransformElement( background, '' );\n\t\t\t} );\n\n\t\t\ttransformSlides( { overview: '' } );\n\n\t\t\tslide( indexh, indexv );\n\n\t\t\tlayout();\n\n\t\t\tcueAutoSlide();\n\n\t\t\t// Notify observers of the overview hiding\n\t\t\tdispatchEvent( 'overviewhidden', {\n\t\t\t\t'indexh': indexh,\n\t\t\t\t'indexv': indexv,\n\t\t\t\t'currentSlide': currentSlide\n\t\t\t} );\n\n\t\t}\n\t}\n\n\t/**\n\t * Toggles the slide overview mode on and off.\n\t *\n\t * @param {Boolean} [override] Flag which overrides the\n\t * toggle logic and forcibly sets the desired state. True means\n\t * overview is open, false means it's closed.\n\t */\n\tfunction toggleOverview( override ) {\n\n\t\tif( typeof override === 'boolean' ) {\n\t\t\toverride ? activateOverview() : deactivateOverview();\n\t\t}\n\t\telse {\n\t\t\tisOverview() ? deactivateOverview() : activateOverview();\n\t\t}\n\n\t}\n\n\t/**\n\t * Checks if the overview is currently active.\n\t *\n\t * @return {Boolean} true if the overview is active,\n\t * false otherwise\n\t */\n\tfunction isOverview() {\n\n\t\treturn overview;\n\n\t}\n\n\t/**\n\t * Return a hash URL that will resolve to the given slide location.\n\t *\n\t * @param {HTMLElement} [slide=currentSlide] The slide to link to\n\t */\n\tfunction locationHash( slide ) {\n\n\t\tvar url = '/';\n\n\t\t// Attempt to create a named link based on the slide's ID\n\t\tvar s = slide || currentSlide;\n\t\tvar id = s ? s.getAttribute( 'id' ) : null;\n\t\tif( id ) {\n\t\t\tid = encodeURIComponent( id );\n\t\t}\n\n\t\tvar index = getIndices( slide );\n\t\tif( !config.fragmentInURL ) {\n\t\t\tindex.f = undefined;\n\t\t}\n\n\t\t// If the current slide has an ID, use that as a named link,\n\t\t// but we don't support named links with a fragment index\n\t\tif( typeof id === 'string' && id.length && index.f === undefined ) {\n\t\t\turl = '/' + id;\n\t\t}\n\t\t// Otherwise use the /h/v index\n\t\telse {\n\t\t\tvar hashIndexBase = config.hashOneBasedIndex ? 1 : 0;\n\t\t\tif( index.h > 0 || index.v > 0 || index.f !== undefined ) url += index.h + hashIndexBase;\n\t\t\tif( index.v > 0 || index.f !== undefined ) url += '/' + (index.v + hashIndexBase );\n\t\t\tif( index.f !== undefined ) url += '/' + index.f;\n\t\t}\n\n\t\treturn url;\n\n\t}\n\n\t/**\n\t * Checks if the current or specified slide is vertical\n\t * (nested within another slide).\n\t *\n\t * @param {HTMLElement} [slide=currentSlide] The slide to check\n\t * orientation of\n\t * @return {Boolean}\n\t */\n\tfunction isVerticalSlide( slide ) {\n\n\t\t// Prefer slide argument, otherwise use current slide\n\t\tslide = slide ? slide : currentSlide;\n\n\t\treturn slide && slide.parentNode && !!slide.parentNode.nodeName.match( /section/i );\n\n\t}\n\n\t/**\n\t * Handling the fullscreen functionality via the fullscreen API\n\t *\n\t * @see http://fullscreen.spec.whatwg.org/\n\t * @see https://developer.mozilla.org/en-US/docs/DOM/Using_fullscreen_mode\n\t */\n\tfunction enterFullscreen() {\n\n\t\tvar element = document.documentElement;\n\n\t\t// Check which implementation is available\n\t\tvar requestMethod = element.requestFullscreen ||\n\t\t\telement.webkitRequestFullscreen ||\n\t\t\telement.webkitRequestFullScreen ||\n\t\t\telement.mozRequestFullScreen ||\n\t\t\telement.msRequestFullscreen;\n\n\t\tif( requestMethod ) {\n\t\t\trequestMethod.apply( element );\n\t\t}\n\n\t}\n\n\t/**\n\t * Shows the mouse pointer after it has been hidden with\n\t * #hideCursor.\n\t */\n\tfunction showCursor() {\n\n\t\tif( cursorHidden ) {\n\t\t\tcursorHidden = false;\n\t\t\tdom.wrapper.style.cursor = '';\n\t\t}\n\n\t}\n\n\t/**\n\t * Hides the mouse pointer when it's on top of the .reveal\n\t * container.\n\t */\n\tfunction hideCursor() {\n\n\t\tif( cursorHidden === false ) {\n\t\t\tcursorHidden = true;\n\t\t\tdom.wrapper.style.cursor = 'none';\n\t\t}\n\n\t}\n\n\t/**\n\t * Enters the paused mode which fades everything on screen to\n\t * black.\n\t */\n\tfunction pause() {\n\n\t\tif( config.pause ) {\n\t\t\tvar wasPaused = dom.wrapper.classList.contains( 'paused' );\n\n\t\t\tcancelAutoSlide();\n\t\t\tdom.wrapper.classList.add( 'paused' );\n\n\t\t\tif( wasPaused === false ) {\n\t\t\t\tdispatchEvent( 'paused' );\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Exits from the paused mode.\n\t */\n\tfunction resume() {\n\n\t\tvar wasPaused = dom.wrapper.classList.contains( 'paused' );\n\t\tdom.wrapper.classList.remove( 'paused' );\n\n\t\tcueAutoSlide();\n\n\t\tif( wasPaused ) {\n\t\t\tdispatchEvent( 'resumed' );\n\t\t}\n\n\t}\n\n\t/**\n\t * Toggles the paused mode on and off.\n\t */\n\tfunction togglePause( override ) {\n\n\t\tif( typeof override === 'boolean' ) {\n\t\t\toverride ? pause() : resume();\n\t\t}\n\t\telse {\n\t\t\tisPaused() ? resume() : pause();\n\t\t}\n\n\t}\n\n\t/**\n\t * Checks if we are currently in the paused mode.\n\t *\n\t * @return {Boolean}\n\t */\n\tfunction isPaused() {\n\n\t\treturn dom.wrapper.classList.contains( 'paused' );\n\n\t}\n\n\t/**\n\t * Toggles the auto slide mode on and off.\n\t *\n\t * @param {Boolean} [override] Flag which sets the desired state.\n\t * True means autoplay starts, false means it stops.\n\t */\n\n\tfunction toggleAutoSlide( override ) {\n\n\t\tif( typeof override === 'boolean' ) {\n\t\t\toverride ? resumeAutoSlide() : pauseAutoSlide();\n\t\t}\n\n\t\telse {\n\t\t\tautoSlidePaused ? resumeAutoSlide() : pauseAutoSlide();\n\t\t}\n\n\t}\n\n\t/**\n\t * Checks if the auto slide mode is currently on.\n\t *\n\t * @return {Boolean}\n\t */\n\tfunction isAutoSliding() {\n\n\t\treturn !!( autoSlide && !autoSlidePaused );\n\n\t}\n\n\t/**\n\t * Steps from the current point in the presentation to the\n\t * slide which matches the specified horizontal and vertical\n\t * indices.\n\t *\n\t * @param {number} [h=indexh] Horizontal index of the target slide\n\t * @param {number} [v=indexv] Vertical index of the target slide\n\t * @param {number} [f] Index of a fragment within the\n\t * target slide to activate\n\t * @param {number} [o] Origin for use in multimaster environments\n\t */\n\tfunction slide( h, v, f, o ) {\n\n\t\t// Remember where we were at before\n\t\tpreviousSlide = currentSlide;\n\n\t\t// Query all horizontal slides in the deck\n\t\tvar horizontalSlides = dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR );\n\n\t\t// Abort if there are no slides\n\t\tif( horizontalSlides.length === 0 ) return;\n\n\t\t// If no vertical index is specified and the upcoming slide is a\n\t\t// stack, resume at its previous vertical index\n\t\tif( v === undefined && !isOverview() ) {\n\t\t\tv = getPreviousVerticalIndex( horizontalSlides[ h ] );\n\t\t}\n\n\t\t// If we were on a vertical stack, remember what vertical index\n\t\t// it was on so we can resume at the same position when returning\n\t\tif( previousSlide && previousSlide.parentNode && previousSlide.parentNode.classList.contains( 'stack' ) ) {\n\t\t\tsetPreviousVerticalIndex( previousSlide.parentNode, indexv );\n\t\t}\n\n\t\t// Remember the state before this slide\n\t\tvar stateBefore = state.concat();\n\n\t\t// Reset the state array\n\t\tstate.length = 0;\n\n\t\tvar indexhBefore = indexh || 0,\n\t\t\tindexvBefore = indexv || 0;\n\n\t\t// Activate and transition to the new slide\n\t\tindexh = updateSlides( HORIZONTAL_SLIDES_SELECTOR, h === undefined ? indexh : h );\n\t\tindexv = updateSlides( VERTICAL_SLIDES_SELECTOR, v === undefined ? indexv : v );\n\n\t\t// Update the visibility of slides now that the indices have changed\n\t\tupdateSlidesVisibility();\n\n\t\tlayout();\n\n\t\t// Update the overview if it's currently active\n\t\tif( isOverview() ) {\n\t\t\tupdateOverview();\n\t\t}\n\n\t\t// Find the current horizontal slide and any possible vertical slides\n\t\t// within it\n\t\tvar currentHorizontalSlide = horizontalSlides[ indexh ],\n\t\t\tcurrentVerticalSlides = currentHorizontalSlide.querySelectorAll( 'section' );\n\n\t\t// Store references to the previous and current slides\n\t\tcurrentSlide = currentVerticalSlides[ indexv ] || currentHorizontalSlide;\n\n\t\t// Show fragment, if specified\n\t\tif( typeof f !== 'undefined' ) {\n\t\t\tnavigateFragment( f );\n\t\t}\n\n\t\t// Dispatch an event if the slide changed\n\t\tvar slideChanged = ( indexh !== indexhBefore || indexv !== indexvBefore );\n\t\tif (!slideChanged) {\n\t\t\t// Ensure that the previous slide is never the same as the current\n\t\t\tpreviousSlide = null;\n\t\t}\n\n\t\t// Solves an edge case where the previous slide maintains the\n\t\t// 'present' class when navigating between adjacent vertical\n\t\t// stacks\n\t\tif( previousSlide && previousSlide !== currentSlide ) {\n\t\t\tpreviousSlide.classList.remove( 'present' );\n\t\t\tpreviousSlide.setAttribute( 'aria-hidden', 'true' );\n\n\t\t\t// Reset all slides upon navigate to home\n\t\t\t// Issue: #285\n\t\t\tif ( dom.wrapper.querySelector( HOME_SLIDE_SELECTOR ).classList.contains( 'present' ) ) {\n\t\t\t\t// Launch async task\n\t\t\t\tsetTimeout( function () {\n\t\t\t\t\tvar slides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR + '.stack') ), i;\n\t\t\t\t\tfor( i in slides ) {\n\t\t\t\t\t\tif( slides[i] ) {\n\t\t\t\t\t\t\t// Reset stack\n\t\t\t\t\t\t\tsetPreviousVerticalIndex( slides[i], 0 );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, 0 );\n\t\t\t}\n\t\t}\n\n\t\t// Apply the new state\n\t\tstateLoop: for( var i = 0, len = state.length; i < len; i++ ) {\n\t\t\t// Check if this state existed on the previous slide. If it\n\t\t\t// did, we will avoid adding it repeatedly\n\t\t\tfor( var j = 0; j < stateBefore.length; j++ ) {\n\t\t\t\tif( stateBefore[j] === state[i] ) {\n\t\t\t\t\tstateBefore.splice( j, 1 );\n\t\t\t\t\tcontinue stateLoop;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdocument.documentElement.classList.add( state[i] );\n\n\t\t\t// Dispatch custom event matching the state's name\n\t\t\tdispatchEvent( state[i] );\n\t\t}\n\n\t\t// Clean up the remains of the previous state\n\t\twhile( stateBefore.length ) {\n\t\t\tdocument.documentElement.classList.remove( stateBefore.pop() );\n\t\t}\n\n\t\tif( slideChanged ) {\n\t\t\tdispatchEvent( 'slidechanged', {\n\t\t\t\t'indexh': indexh,\n\t\t\t\t'indexv': indexv,\n\t\t\t\t'previousSlide': previousSlide,\n\t\t\t\t'currentSlide': currentSlide,\n\t\t\t\t'origin': o\n\t\t\t} );\n\t\t}\n\n\t\t// Handle embedded content\n\t\tif( slideChanged || !previousSlide ) {\n\t\t\tstopEmbeddedContent( previousSlide );\n\t\t\tstartEmbeddedContent( currentSlide );\n\t\t}\n\n\t\t// Announce the current slide contents, for screen readers\n\t\tdom.statusDiv.textContent = getStatusText( currentSlide );\n\n\t\tupdateControls();\n\t\tupdateProgress();\n\t\tupdateBackground();\n\t\tupdateParallax();\n\t\tupdateSlideNumber();\n\t\tupdateNotes();\n\t\tupdateFragments();\n\n\t\t// Update the URL hash\n\t\twriteURL();\n\n\t\tcueAutoSlide();\n\n\t}\n\n\t/**\n\t * Syncs the presentation with the current DOM. Useful\n\t * when new slides or control elements are added or when\n\t * the configuration has changed.\n\t */\n\tfunction sync() {\n\n\t\t// Subscribe to input\n\t\tremoveEventListeners();\n\t\taddEventListeners();\n\n\t\t// Force a layout to make sure the current config is accounted for\n\t\tlayout();\n\n\t\t// Reflect the current autoSlide value\n\t\tautoSlide = config.autoSlide;\n\n\t\t// Start auto-sliding if it's enabled\n\t\tcueAutoSlide();\n\n\t\t// Re-create the slide backgrounds\n\t\tcreateBackgrounds();\n\n\t\t// Write the current hash to the URL\n\t\twriteURL();\n\n\t\tsortAllFragments();\n\n\t\tupdateControls();\n\t\tupdateProgress();\n\t\tupdateSlideNumber();\n\t\tupdateSlidesVisibility();\n\t\tupdateBackground( true );\n\t\tupdateNotesVisibility();\n\t\tupdateNotes();\n\n\t\tformatEmbeddedContent();\n\n\t\t// Start or stop embedded content depending on global config\n\t\tif( config.autoPlayMedia === false ) {\n\t\t\tstopEmbeddedContent( currentSlide, { unloadIframes: false } );\n\t\t}\n\t\telse {\n\t\t\tstartEmbeddedContent( currentSlide );\n\t\t}\n\n\t\tif( isOverview() ) {\n\t\t\tlayoutOverview();\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates reveal.js to keep in sync with new slide attributes. For\n\t * example, if you add a new `data-background-image` you can call\n\t * this to have reveal.js render the new background image.\n\t *\n\t * Similar to #sync() but more efficient when you only need to\n\t * refresh a specific slide.\n\t *\n\t * @param {HTMLElement} slide\n\t */\n\tfunction syncSlide( slide ) {\n\n\t\t// Default to the current slide\n\t\tslide = slide || currentSlide;\n\n\t\tsyncBackground( slide );\n\t\tsyncFragments( slide );\n\n\t\tloadSlide( slide );\n\n\t\tupdateBackground();\n\t\tupdateNotes();\n\n\t}\n\n\t/**\n\t * Formats the fragments on the given slide so that they have\n\t * valid indices. Call this if fragments are changed in the DOM\n\t * after reveal.js has already initialized.\n\t *\n\t * @param {HTMLElement} slide\n\t * @return {Array} a list of the HTML fragments that were synced\n\t */\n\tfunction syncFragments( slide ) {\n\n\t\t// Default to the current slide\n\t\tslide = slide || currentSlide;\n\n\t\treturn sortFragments( slide.querySelectorAll( '.fragment' ) );\n\n\t}\n\n\t/**\n\t * Resets all vertical slides so that only the first\n\t * is visible.\n\t */\n\tfunction resetVerticalSlides() {\n\n\t\tvar horizontalSlides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) );\n\t\thorizontalSlides.forEach( function( horizontalSlide ) {\n\n\t\t\tvar verticalSlides = toArray( horizontalSlide.querySelectorAll( 'section' ) );\n\t\t\tverticalSlides.forEach( function( verticalSlide, y ) {\n\n\t\t\t\tif( y > 0 ) {\n\t\t\t\t\tverticalSlide.classList.remove( 'present' );\n\t\t\t\t\tverticalSlide.classList.remove( 'past' );\n\t\t\t\t\tverticalSlide.classList.add( 'future' );\n\t\t\t\t\tverticalSlide.setAttribute( 'aria-hidden', 'true' );\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Sorts and formats all of fragments in the\n\t * presentation.\n\t */\n\tfunction sortAllFragments() {\n\n\t\tvar horizontalSlides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) );\n\t\thorizontalSlides.forEach( function( horizontalSlide ) {\n\n\t\t\tvar verticalSlides = toArray( horizontalSlide.querySelectorAll( 'section' ) );\n\t\t\tverticalSlides.forEach( function( verticalSlide, y ) {\n\n\t\t\t\tsortFragments( verticalSlide.querySelectorAll( '.fragment' ) );\n\n\t\t\t} );\n\n\t\t\tif( verticalSlides.length === 0 ) sortFragments( horizontalSlide.querySelectorAll( '.fragment' ) );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Randomly shuffles all slides in the deck.\n\t */\n\tfunction shuffle() {\n\n\t\tvar slides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) );\n\n\t\tslides.forEach( function( slide ) {\n\n\t\t\t// Insert this slide next to another random slide. This may\n\t\t\t// cause the slide to insert before itself but that's fine.\n\t\t\tdom.slides.insertBefore( slide, slides[ Math.floor( Math.random() * slides.length ) ] );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Updates one dimension of slides by showing the slide\n\t * with the specified index.\n\t *\n\t * @param {string} selector A CSS selector that will fetch\n\t * the group of slides we are working with\n\t * @param {number} index The index of the slide that should be\n\t * shown\n\t *\n\t * @return {number} The index of the slide that is now shown,\n\t * might differ from the passed in index if it was out of\n\t * bounds.\n\t */\n\tfunction updateSlides( selector, index ) {\n\n\t\t// Select all slides and convert the NodeList result to\n\t\t// an array\n\t\tvar slides = toArray( dom.wrapper.querySelectorAll( selector ) ),\n\t\t\tslidesLength = slides.length;\n\n\t\tvar printMode = isPrintingPDF();\n\n\t\tif( slidesLength ) {\n\n\t\t\t// Should the index loop?\n\t\t\tif( config.loop ) {\n\t\t\t\tindex %= slidesLength;\n\n\t\t\t\tif( index < 0 ) {\n\t\t\t\t\tindex = slidesLength + index;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Enforce max and minimum index bounds\n\t\t\tindex = Math.max( Math.min( index, slidesLength - 1 ), 0 );\n\n\t\t\tfor( var i = 0; i < slidesLength; i++ ) {\n\t\t\t\tvar element = slides[i];\n\n\t\t\t\tvar reverse = config.rtl && !isVerticalSlide( element );\n\n\t\t\t\telement.classList.remove( 'past' );\n\t\t\t\telement.classList.remove( 'present' );\n\t\t\t\telement.classList.remove( 'future' );\n\n\t\t\t\t// http://www.w3.org/html/wg/drafts/html/master/editing.html#the-hidden-attribute\n\t\t\t\telement.setAttribute( 'hidden', '' );\n\t\t\t\telement.setAttribute( 'aria-hidden', 'true' );\n\n\t\t\t\t// If this element contains vertical slides\n\t\t\t\tif( element.querySelector( 'section' ) ) {\n\t\t\t\t\telement.classList.add( 'stack' );\n\t\t\t\t}\n\n\t\t\t\t// If we're printing static slides, all slides are \"present\"\n\t\t\t\tif( printMode ) {\n\t\t\t\t\telement.classList.add( 'present' );\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif( i < index ) {\n\t\t\t\t\t// Any element previous to index is given the 'past' class\n\t\t\t\t\telement.classList.add( reverse ? 'future' : 'past' );\n\n\t\t\t\t\tif( config.fragments ) {\n\t\t\t\t\t\t// Show all fragments in prior slides\n\t\t\t\t\t\ttoArray( element.querySelectorAll( '.fragment' ) ).forEach( function( fragment ) {\n\t\t\t\t\t\t\tfragment.classList.add( 'visible' );\n\t\t\t\t\t\t\tfragment.classList.remove( 'current-fragment' );\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if( i > index ) {\n\t\t\t\t\t// Any element subsequent to index is given the 'future' class\n\t\t\t\t\telement.classList.add( reverse ? 'past' : 'future' );\n\n\t\t\t\t\tif( config.fragments ) {\n\t\t\t\t\t\t// Hide all fragments in future slides\n\t\t\t\t\t\ttoArray( element.querySelectorAll( '.fragment.visible' ) ).forEach( function( fragment ) {\n\t\t\t\t\t\t\tfragment.classList.remove( 'visible' );\n\t\t\t\t\t\t\tfragment.classList.remove( 'current-fragment' );\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Mark the current slide as present\n\t\t\tslides[index].classList.add( 'present' );\n\t\t\tslides[index].removeAttribute( 'hidden' );\n\t\t\tslides[index].removeAttribute( 'aria-hidden' );\n\n\t\t\t// If this slide has a state associated with it, add it\n\t\t\t// onto the current state of the deck\n\t\t\tvar slideState = slides[index].getAttribute( 'data-state' );\n\t\t\tif( slideState ) {\n\t\t\t\tstate = state.concat( slideState.split( ' ' ) );\n\t\t\t}\n\n\t\t}\n\t\telse {\n\t\t\t// Since there are no slides we can't be anywhere beyond the\n\t\t\t// zeroth index\n\t\t\tindex = 0;\n\t\t}\n\n\t\treturn index;\n\n\t}\n\n\t/**\n\t * Optimization method; hide all slides that are far away\n\t * from the present slide.\n\t */\n\tfunction updateSlidesVisibility() {\n\n\t\t// Select all slides and convert the NodeList result to\n\t\t// an array\n\t\tvar horizontalSlides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) ),\n\t\t\thorizontalSlidesLength = horizontalSlides.length,\n\t\t\tdistanceX,\n\t\t\tdistanceY;\n\n\t\tif( horizontalSlidesLength && typeof indexh !== 'undefined' ) {\n\n\t\t\t// The number of steps away from the present slide that will\n\t\t\t// be visible\n\t\t\tvar viewDistance = isOverview() ? 10 : config.viewDistance;\n\n\t\t\t// Shorten the view distance on devices that typically have\n\t\t\t// less resources\n\t\t\tif( isMobileDevice ) {\n\t\t\t\tviewDistance = isOverview() ? 6 : config.mobileViewDistance;\n\t\t\t}\n\n\t\t\t// All slides need to be visible when exporting to PDF\n\t\t\tif( isPrintingPDF() ) {\n\t\t\t\tviewDistance = Number.MAX_VALUE;\n\t\t\t}\n\n\t\t\tfor( var x = 0; x < horizontalSlidesLength; x++ ) {\n\t\t\t\tvar horizontalSlide = horizontalSlides[x];\n\n\t\t\t\tvar verticalSlides = toArray( horizontalSlide.querySelectorAll( 'section' ) ),\n\t\t\t\t\tverticalSlidesLength = verticalSlides.length;\n\n\t\t\t\t// Determine how far away this slide is from the present\n\t\t\t\tdistanceX = Math.abs( ( indexh || 0 ) - x ) || 0;\n\n\t\t\t\t// If the presentation is looped, distance should measure\n\t\t\t\t// 1 between the first and last slides\n\t\t\t\tif( config.loop ) {\n\t\t\t\t\tdistanceX = Math.abs( ( ( indexh || 0 ) - x ) % ( horizontalSlidesLength - viewDistance ) ) || 0;\n\t\t\t\t}\n\n\t\t\t\t// Show the horizontal slide if it's within the view distance\n\t\t\t\tif( distanceX < viewDistance ) {\n\t\t\t\t\tloadSlide( horizontalSlide );\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tunloadSlide( horizontalSlide );\n\t\t\t\t}\n\n\t\t\t\tif( verticalSlidesLength ) {\n\n\t\t\t\t\tvar oy = getPreviousVerticalIndex( horizontalSlide );\n\n\t\t\t\t\tfor( var y = 0; y < verticalSlidesLength; y++ ) {\n\t\t\t\t\t\tvar verticalSlide = verticalSlides[y];\n\n\t\t\t\t\t\tdistanceY = x === ( indexh || 0 ) ? Math.abs( ( indexv || 0 ) - y ) : Math.abs( y - oy );\n\n\t\t\t\t\t\tif( distanceX + distanceY < viewDistance ) {\n\t\t\t\t\t\t\tloadSlide( verticalSlide );\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tunloadSlide( verticalSlide );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Flag if there are ANY vertical slides, anywhere in the deck\n\t\t\tif( hasVerticalSlides() ) {\n\t\t\t\tdom.wrapper.classList.add( 'has-vertical-slides' );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdom.wrapper.classList.remove( 'has-vertical-slides' );\n\t\t\t}\n\n\t\t\t// Flag if there are ANY horizontal slides, anywhere in the deck\n\t\t\tif( hasHorizontalSlides() ) {\n\t\t\t\tdom.wrapper.classList.add( 'has-horizontal-slides' );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdom.wrapper.classList.remove( 'has-horizontal-slides' );\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Pick up notes from the current slide and display them\n\t * to the viewer.\n\t *\n\t * @see {@link config.showNotes}\n\t */\n\tfunction updateNotes() {\n\n\t\tif( config.showNotes && dom.speakerNotes && currentSlide && !isPrintingPDF() ) {\n\n\t\t\tdom.speakerNotes.innerHTML = getSlideNotes() || '<span class=\"notes-placeholder\">No notes on this slide.</span>';\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates the visibility of the speaker notes sidebar that\n\t * is used to share annotated slides. The notes sidebar is\n\t * only visible if showNotes is true and there are notes on\n\t * one or more slides in the deck.\n\t */\n\tfunction updateNotesVisibility() {\n\n\t\tif( config.showNotes && hasNotes() ) {\n\t\t\tdom.wrapper.classList.add( 'show-notes' );\n\t\t}\n\t\telse {\n\t\t\tdom.wrapper.classList.remove( 'show-notes' );\n\t\t}\n\n\t}\n\n\t/**\n\t * Checks if there are speaker notes for ANY slide in the\n\t * presentation.\n\t */\n\tfunction hasNotes() {\n\n\t\treturn dom.slides.querySelectorAll( '[data-notes], aside.notes' ).length > 0;\n\n\t}\n\n\t/**\n\t * Updates the progress bar to reflect the current slide.\n\t */\n\tfunction updateProgress() {\n\n\t\t// Update progress if enabled\n\t\tif( config.progress && dom.progressbar ) {\n\n\t\t\tdom.progressbar.style.width = getProgress() * dom.wrapper.offsetWidth + 'px';\n\n\t\t}\n\n\t}\n\n\n\t/**\n\t * Updates the slide number to match the current slide.\n\t */\n\tfunction updateSlideNumber() {\n\n\t\t// Update slide number if enabled\n\t\tif( config.slideNumber && dom.slideNumber ) {\n\t\t\tdom.slideNumber.innerHTML = getSlideNumber();\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns the HTML string corresponding to the current slide number,\n\t * including formatting.\n\t */\n\tfunction getSlideNumber( slide ) {\n\n\t\tvar value;\n\t\tvar format = 'h.v';\n\t\tif( slide === undefined ) {\n\t\t\tslide = currentSlide;\n\t\t}\n\n\t\tif ( typeof config.slideNumber === 'function' ) {\n\t\t\tvalue = config.slideNumber( slide );\n\t\t} else {\n\t\t\t// Check if a custom number format is available\n\t\t\tif( typeof config.slideNumber === 'string' ) {\n\t\t\t\tformat = config.slideNumber;\n\t\t\t}\n\n\t\t\t// If there are ONLY vertical slides in this deck, always use\n\t\t\t// a flattened slide number\n\t\t\tif( !/c/.test( format ) && dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ).length === 1 ) {\n\t\t\t\tformat = 'c';\n\t\t\t}\n\n\t\t\tvalue = [];\n\t\t\tswitch( format ) {\n\t\t\t\tcase 'c':\n\t\t\t\t\tvalue.push( getSlidePastCount( slide ) + 1 );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'c/t':\n\t\t\t\t\tvalue.push( getSlidePastCount( slide ) + 1, '/', getTotalSlides() );\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tvar indices = getIndices( slide );\n\t\t\t\t\tvalue.push( indices.h + 1 );\n\t\t\t\t\tvar sep = format === 'h/v' ? '/' : '.';\n\t\t\t\t\tif( isVerticalSlide( slide ) ) value.push( sep, indices.v + 1 );\n\t\t\t}\n\t\t}\n\n\t\tvar url = '#' + locationHash( slide );\n\t\treturn formatSlideNumber( value[0], value[1], value[2], url );\n\n\t}\n\n\t/**\n\t * Applies HTML formatting to a slide number before it's\n\t * written to the DOM.\n\t *\n\t * @param {number} a Current slide\n\t * @param {string} delimiter Character to separate slide numbers\n\t * @param {(number|*)} b Total slides\n\t * @param {HTMLElement} [url='#'+locationHash()] The url to link to\n\t * @return {string} HTML string fragment\n\t */\n\tfunction formatSlideNumber( a, delimiter, b, url ) {\n\n\t\tif( url === undefined ) {\n\t\t\turl = '#' + locationHash();\n\t\t}\n\t\tif( typeof b === 'number' && !isNaN( b ) ) {\n\t\t\treturn  '<a href=\"' + url + '\">' +\n\t\t\t\t'<span class=\"slide-number-a\">'+ a +'</span>' +\n\t\t\t\t'<span class=\"slide-number-delimiter\">'+ delimiter +'</span>' +\n\t\t\t\t'<span class=\"slide-number-b\">'+ b +'</span>' +\n\t\t\t\t'</a>';\n\t\t}\n\t\telse {\n\t\t\treturn '<a href=\"' + url + '\">' +\n\t\t\t\t'<span class=\"slide-number-a\">'+ a +'</span>' +\n\t\t\t\t'</a>';\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates the state of all control/navigation arrows.\n\t */\n\tfunction updateControls() {\n\n\t\tvar routes = availableRoutes();\n\t\tvar fragments = availableFragments();\n\n\t\t// Remove the 'enabled' class from all directions\n\t\tdom.controlsLeft.concat( dom.controlsRight )\n\t\t\t.concat( dom.controlsUp )\n\t\t\t.concat( dom.controlsDown )\n\t\t\t.concat( dom.controlsPrev )\n\t\t\t.concat( dom.controlsNext ).forEach( function( node ) {\n\t\t\tnode.classList.remove( 'enabled' );\n\t\t\tnode.classList.remove( 'fragmented' );\n\n\t\t\t// Set 'disabled' attribute on all directions\n\t\t\tnode.setAttribute( 'disabled', 'disabled' );\n\t\t} );\n\n\t\t// Add the 'enabled' class to the available routes; remove 'disabled' attribute to enable buttons\n\t\tif( routes.left ) dom.controlsLeft.forEach( function( el ) { el.classList.add( 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\tif( routes.right ) dom.controlsRight.forEach( function( el ) { el.classList.add( 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\tif( routes.up ) dom.controlsUp.forEach( function( el ) { el.classList.add( 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\tif( routes.down ) dom.controlsDown.forEach( function( el ) { el.classList.add( 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\n\t\t// Prev/next buttons\n\t\tif( routes.left || routes.up ) dom.controlsPrev.forEach( function( el ) { el.classList.add( 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\tif( routes.right || routes.down ) dom.controlsNext.forEach( function( el ) { el.classList.add( 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\n\t\t// Highlight fragment directions\n\t\tif( currentSlide ) {\n\n\t\t\t// Always apply fragment decorator to prev/next buttons\n\t\t\tif( fragments.prev ) dom.controlsPrev.forEach( function( el ) { el.classList.add( 'fragmented', 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\t\tif( fragments.next ) dom.controlsNext.forEach( function( el ) { el.classList.add( 'fragmented', 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\n\t\t\t// Apply fragment decorators to directional buttons based on\n\t\t\t// what slide axis they are in\n\t\t\tif( isVerticalSlide( currentSlide ) ) {\n\t\t\t\tif( fragments.prev ) dom.controlsUp.forEach( function( el ) { el.classList.add( 'fragmented', 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\t\t\tif( fragments.next ) dom.controlsDown.forEach( function( el ) { el.classList.add( 'fragmented', 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif( fragments.prev ) dom.controlsLeft.forEach( function( el ) { el.classList.add( 'fragmented', 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\t\t\tif( fragments.next ) dom.controlsRight.forEach( function( el ) { el.classList.add( 'fragmented', 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\t\t}\n\n\t\t}\n\n\t\tif( config.controlsTutorial ) {\n\n\t\t\t// Highlight control arrows with an animation to ensure\n\t\t\t// that the viewer knows how to navigate\n\t\t\tif( !hasNavigatedDown && routes.down ) {\n\t\t\t\tdom.controlsDownArrow.classList.add( 'highlight' );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdom.controlsDownArrow.classList.remove( 'highlight' );\n\n\t\t\t\tif( !hasNavigatedRight && routes.right && indexv === 0 ) {\n\t\t\t\t\tdom.controlsRightArrow.classList.add( 'highlight' );\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdom.controlsRightArrow.classList.remove( 'highlight' );\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates the background elements to reflect the current\n\t * slide.\n\t *\n\t * @param {boolean} includeAll If true, the backgrounds of\n\t * all vertical slides (not just the present) will be updated.\n\t */\n\tfunction updateBackground( includeAll ) {\n\n\t\tvar currentBackground = null;\n\n\t\t// Reverse past/future classes when in RTL mode\n\t\tvar horizontalPast = config.rtl ? 'future' : 'past',\n\t\t\thorizontalFuture = config.rtl ? 'past' : 'future';\n\n\t\t// Update the classes of all backgrounds to match the\n\t\t// states of their slides (past/present/future)\n\t\ttoArray( dom.background.childNodes ).forEach( function( backgroundh, h ) {\n\n\t\t\tbackgroundh.classList.remove( 'past' );\n\t\t\tbackgroundh.classList.remove( 'present' );\n\t\t\tbackgroundh.classList.remove( 'future' );\n\n\t\t\tif( h < indexh ) {\n\t\t\t\tbackgroundh.classList.add( horizontalPast );\n\t\t\t}\n\t\t\telse if ( h > indexh ) {\n\t\t\t\tbackgroundh.classList.add( horizontalFuture );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tbackgroundh.classList.add( 'present' );\n\n\t\t\t\t// Store a reference to the current background element\n\t\t\t\tcurrentBackground = backgroundh;\n\t\t\t}\n\n\t\t\tif( includeAll || h === indexh ) {\n\t\t\t\ttoArray( backgroundh.querySelectorAll( '.slide-background' ) ).forEach( function( backgroundv, v ) {\n\n\t\t\t\t\tbackgroundv.classList.remove( 'past' );\n\t\t\t\t\tbackgroundv.classList.remove( 'present' );\n\t\t\t\t\tbackgroundv.classList.remove( 'future' );\n\n\t\t\t\t\tif( v < indexv ) {\n\t\t\t\t\t\tbackgroundv.classList.add( 'past' );\n\t\t\t\t\t}\n\t\t\t\t\telse if ( v > indexv ) {\n\t\t\t\t\t\tbackgroundv.classList.add( 'future' );\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tbackgroundv.classList.add( 'present' );\n\n\t\t\t\t\t\t// Only if this is the present horizontal and vertical slide\n\t\t\t\t\t\tif( h === indexh ) currentBackground = backgroundv;\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t}\n\n\t\t} );\n\n\t\t// Stop content inside of previous backgrounds\n\t\tif( previousBackground ) {\n\n\t\t\tstopEmbeddedContent( previousBackground, { unloadIframes: !shouldPreload( previousBackground ) } );\n\n\t\t}\n\n\t\t// Start content in the current background\n\t\tif( currentBackground ) {\n\n\t\t\tstartEmbeddedContent( currentBackground );\n\n\t\t\tvar currentBackgroundContent = currentBackground.querySelector( '.slide-background-content' );\n\t\t\tif( currentBackgroundContent ) {\n\n\t\t\t\tvar backgroundImageURL = currentBackgroundContent.style.backgroundImage || '';\n\n\t\t\t\t// Restart GIFs (doesn't work in Firefox)\n\t\t\t\tif( /\\.gif/i.test( backgroundImageURL ) ) {\n\t\t\t\t\tcurrentBackgroundContent.style.backgroundImage = '';\n\t\t\t\t\twindow.getComputedStyle( currentBackgroundContent ).opacity;\n\t\t\t\t\tcurrentBackgroundContent.style.backgroundImage = backgroundImageURL;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Don't transition between identical backgrounds. This\n\t\t\t// prevents unwanted flicker.\n\t\t\tvar previousBackgroundHash = previousBackground ? previousBackground.getAttribute( 'data-background-hash' ) : null;\n\t\t\tvar currentBackgroundHash = currentBackground.getAttribute( 'data-background-hash' );\n\t\t\tif( currentBackgroundHash && currentBackgroundHash === previousBackgroundHash && currentBackground !== previousBackground ) {\n\t\t\t\tdom.background.classList.add( 'no-transition' );\n\t\t\t}\n\n\t\t\tpreviousBackground = currentBackground;\n\n\t\t}\n\n\t\t// If there's a background brightness flag for this slide,\n\t\t// bubble it to the .reveal container\n\t\tif( currentSlide ) {\n\t\t\t[ 'has-light-background', 'has-dark-background' ].forEach( function( classToBubble ) {\n\t\t\t\tif( currentSlide.classList.contains( classToBubble ) ) {\n\t\t\t\t\tdom.wrapper.classList.add( classToBubble );\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdom.wrapper.classList.remove( classToBubble );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t// Allow the first background to apply without transition\n\t\tsetTimeout( function() {\n\t\t\tdom.background.classList.remove( 'no-transition' );\n\t\t}, 1 );\n\n\t}\n\n\t/**\n\t * Updates the position of the parallax background based\n\t * on the current slide index.\n\t */\n\tfunction updateParallax() {\n\n\t\tif( config.parallaxBackgroundImage ) {\n\n\t\t\tvar horizontalSlides = dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ),\n\t\t\t\tverticalSlides = dom.wrapper.querySelectorAll( VERTICAL_SLIDES_SELECTOR );\n\n\t\t\tvar backgroundSize = dom.background.style.backgroundSize.split( ' ' ),\n\t\t\t\tbackgroundWidth, backgroundHeight;\n\n\t\t\tif( backgroundSize.length === 1 ) {\n\t\t\t\tbackgroundWidth = backgroundHeight = parseInt( backgroundSize[0], 10 );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tbackgroundWidth = parseInt( backgroundSize[0], 10 );\n\t\t\t\tbackgroundHeight = parseInt( backgroundSize[1], 10 );\n\t\t\t}\n\n\t\t\tvar slideWidth = dom.background.offsetWidth,\n\t\t\t\thorizontalSlideCount = horizontalSlides.length,\n\t\t\t\thorizontalOffsetMultiplier,\n\t\t\t\thorizontalOffset;\n\n\t\t\tif( typeof config.parallaxBackgroundHorizontal === 'number' ) {\n\t\t\t\thorizontalOffsetMultiplier = config.parallaxBackgroundHorizontal;\n\t\t\t}\n\t\t\telse {\n\t\t\t\thorizontalOffsetMultiplier = horizontalSlideCount > 1 ? ( backgroundWidth - slideWidth ) / ( horizontalSlideCount-1 ) : 0;\n\t\t\t}\n\n\t\t\thorizontalOffset = horizontalOffsetMultiplier * indexh * -1;\n\n\t\t\tvar slideHeight = dom.background.offsetHeight,\n\t\t\t\tverticalSlideCount = verticalSlides.length,\n\t\t\t\tverticalOffsetMultiplier,\n\t\t\t\tverticalOffset;\n\n\t\t\tif( typeof config.parallaxBackgroundVertical === 'number' ) {\n\t\t\t\tverticalOffsetMultiplier = config.parallaxBackgroundVertical;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tverticalOffsetMultiplier = ( backgroundHeight - slideHeight ) / ( verticalSlideCount-1 );\n\t\t\t}\n\n\t\t\tverticalOffset = verticalSlideCount > 0 ?  verticalOffsetMultiplier * indexv : 0;\n\n\t\t\tdom.background.style.backgroundPosition = horizontalOffset + 'px ' + -verticalOffset + 'px';\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Should the given element be preloaded?\n\t * Decides based on local element attributes and global config.\n\t *\n\t * @param {HTMLElement} element\n\t */\n\tfunction shouldPreload( element ) {\n\n\t\t// Prefer an explicit global preload setting\n\t\tvar preload = config.preloadIframes;\n\n\t\t// If no global setting is available, fall back on the element's\n\t\t// own preload setting\n\t\tif( typeof preload !== 'boolean' ) {\n\t\t\tpreload = element.hasAttribute( 'data-preload' );\n\t\t}\n\n\t\treturn preload;\n\t}\n\n\t/**\n\t * Called when the given slide is within the configured view\n\t * distance. Shows the slide element and loads any content\n\t * that is set to load lazily (data-src).\n\t *\n\t * @param {HTMLElement} slide Slide to show\n\t */\n\tfunction loadSlide( slide, options ) {\n\n\t\toptions = options || {};\n\n\t\t// Show the slide element\n\t\tslide.style.display = config.display;\n\n\t\t// Media elements with data-src attributes\n\t\ttoArray( slide.querySelectorAll( 'img[data-src], video[data-src], audio[data-src], iframe[data-src]' ) ).forEach( function( element ) {\n\t\t\tif( element.tagName !== 'IFRAME' || shouldPreload( element ) ) {\n\t\t\t\telement.setAttribute( 'src', element.getAttribute( 'data-src' ) );\n\t\t\t\telement.setAttribute( 'data-lazy-loaded', '' );\n\t\t\t\telement.removeAttribute( 'data-src' );\n\t\t\t}\n\t\t} );\n\n\t\t// Media elements with <source> children\n\t\ttoArray( slide.querySelectorAll( 'video, audio' ) ).forEach( function( media ) {\n\t\t\tvar sources = 0;\n\n\t\t\ttoArray( media.querySelectorAll( 'source[data-src]' ) ).forEach( function( source ) {\n\t\t\t\tsource.setAttribute( 'src', source.getAttribute( 'data-src' ) );\n\t\t\t\tsource.removeAttribute( 'data-src' );\n\t\t\t\tsource.setAttribute( 'data-lazy-loaded', '' );\n\t\t\t\tsources += 1;\n\t\t\t} );\n\n\t\t\t// If we rewrote sources for this video/audio element, we need\n\t\t\t// to manually tell it to load from its new origin\n\t\t\tif( sources > 0 ) {\n\t\t\t\tmedia.load();\n\t\t\t}\n\t\t} );\n\n\n\t\t// Show the corresponding background element\n\t\tvar background = slide.slideBackgroundElement;\n\t\tif( background ) {\n\t\t\tbackground.style.display = 'block';\n\n\t\t\tvar backgroundContent = slide.slideBackgroundContentElement;\n\t\t\tvar backgroundIframe = slide.getAttribute( 'data-background-iframe' );\n\n\t\t\t// If the background contains media, load it\n\t\t\tif( background.hasAttribute( 'data-loaded' ) === false ) {\n\t\t\t\tbackground.setAttribute( 'data-loaded', 'true' );\n\n\t\t\t\tvar backgroundImage = slide.getAttribute( 'data-background-image' ),\n\t\t\t\t\tbackgroundVideo = slide.getAttribute( 'data-background-video' ),\n\t\t\t\t\tbackgroundVideoLoop = slide.hasAttribute( 'data-background-video-loop' ),\n\t\t\t\t\tbackgroundVideoMuted = slide.hasAttribute( 'data-background-video-muted' );\n\n\t\t\t\t// Images\n\t\t\t\tif( backgroundImage ) {\n\t\t\t\t\tbackgroundContent.style.backgroundImage = 'url('+ encodeURI( backgroundImage ) +')';\n\t\t\t\t}\n\t\t\t\t// Videos\n\t\t\t\telse if ( backgroundVideo && !isSpeakerNotes() ) {\n\t\t\t\t\tvar video = document.createElement( 'video' );\n\n\t\t\t\t\tif( backgroundVideoLoop ) {\n\t\t\t\t\t\tvideo.setAttribute( 'loop', '' );\n\t\t\t\t\t}\n\n\t\t\t\t\tif( backgroundVideoMuted ) {\n\t\t\t\t\t\tvideo.muted = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Inline video playback works (at least in Mobile Safari) as\n\t\t\t\t\t// long as the video is muted and the `playsinline` attribute is\n\t\t\t\t\t// present\n\t\t\t\t\tif( isMobileDevice ) {\n\t\t\t\t\t\tvideo.muted = true;\n\t\t\t\t\t\tvideo.autoplay = true;\n\t\t\t\t\t\tvideo.setAttribute( 'playsinline', '' );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Support comma separated lists of video sources\n\t\t\t\t\tbackgroundVideo.split( ',' ).forEach( function( source ) {\n\t\t\t\t\t\tvideo.innerHTML += '<source src=\"'+ source +'\">';\n\t\t\t\t\t} );\n\n\t\t\t\t\tbackgroundContent.appendChild( video );\n\t\t\t\t}\n\t\t\t\t// Iframes\n\t\t\t\telse if( backgroundIframe && options.excludeIframes !== true ) {\n\t\t\t\t\tvar iframe = document.createElement( 'iframe' );\n\t\t\t\t\tiframe.setAttribute( 'allowfullscreen', '' );\n\t\t\t\t\tiframe.setAttribute( 'mozallowfullscreen', '' );\n\t\t\t\t\tiframe.setAttribute( 'webkitallowfullscreen', '' );\n\t\t\t\t\tiframe.setAttribute( 'allow', 'autoplay' );\n\n\t\t\t\t\tiframe.setAttribute( 'data-src', backgroundIframe );\n\n\t\t\t\t\tiframe.style.width  = '100%';\n\t\t\t\t\tiframe.style.height = '100%';\n\t\t\t\t\tiframe.style.maxHeight = '100%';\n\t\t\t\t\tiframe.style.maxWidth = '100%';\n\n\t\t\t\t\tbackgroundContent.appendChild( iframe );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Start loading preloadable iframes\n\t\t\tvar backgroundIframeElement = backgroundContent.querySelector( 'iframe[data-src]' );\n\t\t\tif( backgroundIframeElement ) {\n\n\t\t\t\t// Check if this iframe is eligible to be preloaded\n\t\t\t\tif( shouldPreload( background ) && !/autoplay=(1|true|yes)/gi.test( backgroundIframe ) ) {\n\t\t\t\t\tif( backgroundIframeElement.getAttribute( 'src' ) !== backgroundIframe ) {\n\t\t\t\t\t\tbackgroundIframeElement.setAttribute( 'src', backgroundIframe );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Unloads and hides the given slide. This is called when the\n\t * slide is moved outside of the configured view distance.\n\t *\n\t * @param {HTMLElement} slide\n\t */\n\tfunction unloadSlide( slide ) {\n\n\t\t// Hide the slide element\n\t\tslide.style.display = 'none';\n\n\t\t// Hide the corresponding background element\n\t\tvar background = getSlideBackground( slide );\n\t\tif( background ) {\n\t\t\tbackground.style.display = 'none';\n\n\t\t\t// Unload any background iframes\n\t\t\ttoArray( background.querySelectorAll( 'iframe[src]' ) ).forEach( function( element ) {\n\t\t\t\telement.removeAttribute( 'src' );\n\t\t\t} );\n\t\t}\n\n\t\t// Reset lazy-loaded media elements with src attributes\n\t\ttoArray( slide.querySelectorAll( 'video[data-lazy-loaded][src], audio[data-lazy-loaded][src], iframe[data-lazy-loaded][src]' ) ).forEach( function( element ) {\n\t\t\telement.setAttribute( 'data-src', element.getAttribute( 'src' ) );\n\t\t\telement.removeAttribute( 'src' );\n\t\t} );\n\n\t\t// Reset lazy-loaded media elements with <source> children\n\t\ttoArray( slide.querySelectorAll( 'video[data-lazy-loaded] source[src], audio source[src]' ) ).forEach( function( source ) {\n\t\t\tsource.setAttribute( 'data-src', source.getAttribute( 'src' ) );\n\t\t\tsource.removeAttribute( 'src' );\n\t\t} );\n\n\t}\n\n\t/**\n\t * Determine what available routes there are for navigation.\n\t *\n\t * @return {{left: boolean, right: boolean, up: boolean, down: boolean}}\n\t */\n\tfunction availableRoutes() {\n\n\t\tvar horizontalSlides = dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ),\n\t\t\tverticalSlides = dom.wrapper.querySelectorAll( VERTICAL_SLIDES_SELECTOR );\n\n\t\tvar routes = {\n\t\t\tleft: indexh > 0,\n\t\t\tright: indexh < horizontalSlides.length - 1,\n\t\t\tup: indexv > 0,\n\t\t\tdown: indexv < verticalSlides.length - 1\n\t\t};\n\n\t\t// Looped presentations can always be navigated as long as\n\t\t// there are slides available\n\t\tif( config.loop ) {\n\t\t\tif( horizontalSlides.length > 1 ) {\n\t\t\t\troutes.left = true;\n\t\t\t\troutes.right = true;\n\t\t\t}\n\n\t\t\tif( verticalSlides.length > 1 ) {\n\t\t\t\troutes.up = true;\n\t\t\t\troutes.down = true;\n\t\t\t}\n\t\t}\n\n\t\t// Reverse horizontal controls for rtl\n\t\tif( config.rtl ) {\n\t\t\tvar left = routes.left;\n\t\t\troutes.left = routes.right;\n\t\t\troutes.right = left;\n\t\t}\n\n\t\treturn routes;\n\n\t}\n\n\t/**\n\t * Returns an object describing the available fragment\n\t * directions.\n\t *\n\t * @return {{prev: boolean, next: boolean}}\n\t */\n\tfunction availableFragments() {\n\n\t\tif( currentSlide && config.fragments ) {\n\t\t\tvar fragments = currentSlide.querySelectorAll( '.fragment' );\n\t\t\tvar hiddenFragments = currentSlide.querySelectorAll( '.fragment:not(.visible)' );\n\n\t\t\treturn {\n\t\t\t\tprev: fragments.length - hiddenFragments.length > 0,\n\t\t\t\tnext: !!hiddenFragments.length\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\treturn { prev: false, next: false };\n\t\t}\n\n\t}\n\n\t/**\n\t * Enforces origin-specific format rules for embedded media.\n\t */\n\tfunction formatEmbeddedContent() {\n\n\t\tvar _appendParamToIframeSource = function( sourceAttribute, sourceURL, param ) {\n\t\t\ttoArray( dom.slides.querySelectorAll( 'iframe['+ sourceAttribute +'*=\"'+ sourceURL +'\"]' ) ).forEach( function( el ) {\n\t\t\t\tvar src = el.getAttribute( sourceAttribute );\n\t\t\t\tif( src && src.indexOf( param ) === -1 ) {\n\t\t\t\t\tel.setAttribute( sourceAttribute, src + ( !/\\?/.test( src ) ? '?' : '&' ) + param );\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\t// YouTube frames must include \"?enablejsapi=1\"\n\t\t_appendParamToIframeSource( 'src', 'youtube.com/embed/', 'enablejsapi=1' );\n\t\t_appendParamToIframeSource( 'data-src', 'youtube.com/embed/', 'enablejsapi=1' );\n\n\t\t// Vimeo frames must include \"?api=1\"\n\t\t_appendParamToIframeSource( 'src', 'player.vimeo.com/', 'api=1' );\n\t\t_appendParamToIframeSource( 'data-src', 'player.vimeo.com/', 'api=1' );\n\n\t}\n\n\t/**\n\t * Start playback of any embedded content inside of\n\t * the given element.\n\t *\n\t * @param {HTMLElement} element\n\t */\n\tfunction startEmbeddedContent( element ) {\n\n\t\tif( element && !isSpeakerNotes() ) {\n\n\t\t\t// Restart GIFs\n\t\t\ttoArray( element.querySelectorAll( 'img[src$=\".gif\"]' ) ).forEach( function( el ) {\n\t\t\t\t// Setting the same unchanged source like this was confirmed\n\t\t\t\t// to work in Chrome, FF & Safari\n\t\t\t\tel.setAttribute( 'src', el.getAttribute( 'src' ) );\n\t\t\t} );\n\n\t\t\t// HTML5 media elements\n\t\t\ttoArray( element.querySelectorAll( 'video, audio' ) ).forEach( function( el ) {\n\t\t\t\tif( closestParent( el, '.fragment' ) && !closestParent( el, '.fragment.visible' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Prefer an explicit global autoplay setting\n\t\t\t\tvar autoplay = config.autoPlayMedia;\n\n\t\t\t\t// If no global setting is available, fall back on the element's\n\t\t\t\t// own autoplay setting\n\t\t\t\tif( typeof autoplay !== 'boolean' ) {\n\t\t\t\t\tautoplay = el.hasAttribute( 'data-autoplay' ) || !!closestParent( el, '.slide-background' );\n\t\t\t\t}\n\n\t\t\t\tif( autoplay && typeof el.play === 'function' ) {\n\n\t\t\t\t\t// If the media is ready, start playback\n\t\t\t\t\tif( el.readyState > 1 ) {\n\t\t\t\t\t\tstartEmbeddedMedia( { target: el } );\n\t\t\t\t\t}\n\t\t\t\t\t// Mobile devices never fire a loaded event so instead\n\t\t\t\t\t// of waiting, we initiate playback\n\t\t\t\t\telse if( isMobileDevice ) {\n\t\t\t\t\t\tvar promise = el.play();\n\n\t\t\t\t\t\t// If autoplay does not work, ensure that the controls are visible so\n\t\t\t\t\t\t// that the viewer can start the media on their own\n\t\t\t\t\t\tif( promise && typeof promise.catch === 'function' && el.controls === false ) {\n\t\t\t\t\t\t\tpromise.catch( function() {\n\t\t\t\t\t\t\t\tel.controls = true;\n\n\t\t\t\t\t\t\t\t// Once the video does start playing, hide the controls again\n\t\t\t\t\t\t\t\tel.addEventListener( 'play', function() {\n\t\t\t\t\t\t\t\t\tel.controls = false;\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// If the media isn't loaded, wait before playing\n\t\t\t\t\telse {\n\t\t\t\t\t\tel.removeEventListener( 'loadeddata', startEmbeddedMedia ); // remove first to avoid dupes\n\t\t\t\t\t\tel.addEventListener( 'loadeddata', startEmbeddedMedia );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Normal iframes\n\t\t\ttoArray( element.querySelectorAll( 'iframe[src]' ) ).forEach( function( el ) {\n\t\t\t\tif( closestParent( el, '.fragment' ) && !closestParent( el, '.fragment.visible' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tstartEmbeddedIframe( { target: el } );\n\t\t\t} );\n\n\t\t\t// Lazy loading iframes\n\t\t\ttoArray( element.querySelectorAll( 'iframe[data-src]' ) ).forEach( function( el ) {\n\t\t\t\tif( closestParent( el, '.fragment' ) && !closestParent( el, '.fragment.visible' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif( el.getAttribute( 'src' ) !== el.getAttribute( 'data-src' ) ) {\n\t\t\t\t\tel.removeEventListener( 'load', startEmbeddedIframe ); // remove first to avoid dupes\n\t\t\t\t\tel.addEventListener( 'load', startEmbeddedIframe );\n\t\t\t\t\tel.setAttribute( 'src', el.getAttribute( 'data-src' ) );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Starts playing an embedded video/audio element after\n\t * it has finished loading.\n\t *\n\t * @param {object} event\n\t */\n\tfunction startEmbeddedMedia( event ) {\n\n\t\tvar isAttachedToDOM = !!closestParent( event.target, 'html' ),\n\t\t\tisVisible  \t\t= !!closestParent( event.target, '.present' );\n\n\t\tif( isAttachedToDOM && isVisible ) {\n\t\t\tevent.target.currentTime = 0;\n\t\t\tevent.target.play();\n\t\t}\n\n\t\tevent.target.removeEventListener( 'loadeddata', startEmbeddedMedia );\n\n\t}\n\n\t/**\n\t * \"Starts\" the content of an embedded iframe using the\n\t * postMessage API.\n\t *\n\t * @param {object} event\n\t */\n\tfunction startEmbeddedIframe( event ) {\n\n\t\tvar iframe = event.target;\n\n\t\tif( iframe && iframe.contentWindow ) {\n\n\t\t\tvar isAttachedToDOM = !!closestParent( event.target, 'html' ),\n\t\t\t\tisVisible  \t\t= !!closestParent( event.target, '.present' );\n\n\t\t\tif( isAttachedToDOM && isVisible ) {\n\n\t\t\t\t// Prefer an explicit global autoplay setting\n\t\t\t\tvar autoplay = config.autoPlayMedia;\n\n\t\t\t\t// If no global setting is available, fall back on the element's\n\t\t\t\t// own autoplay setting\n\t\t\t\tif( typeof autoplay !== 'boolean' ) {\n\t\t\t\t\tautoplay = iframe.hasAttribute( 'data-autoplay' ) || !!closestParent( iframe, '.slide-background' );\n\t\t\t\t}\n\n\t\t\t\t// YouTube postMessage API\n\t\t\t\tif( /youtube\\.com\\/embed\\//.test( iframe.getAttribute( 'src' ) ) && autoplay ) {\n\t\t\t\t\tiframe.contentWindow.postMessage( '{\"event\":\"command\",\"func\":\"playVideo\",\"args\":\"\"}', '*' );\n\t\t\t\t}\n\t\t\t\t// Vimeo postMessage API\n\t\t\t\telse if( /player\\.vimeo\\.com\\//.test( iframe.getAttribute( 'src' ) ) && autoplay ) {\n\t\t\t\t\tiframe.contentWindow.postMessage( '{\"method\":\"play\"}', '*' );\n\t\t\t\t}\n\t\t\t\t// Generic postMessage API\n\t\t\t\telse {\n\t\t\t\t\tiframe.contentWindow.postMessage( 'slide:start', '*' );\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Stop playback of any embedded content inside of\n\t * the targeted slide.\n\t *\n\t * @param {HTMLElement} element\n\t */\n\tfunction stopEmbeddedContent( element, options ) {\n\n\t\toptions = extend( {\n\t\t\t// Defaults\n\t\t\tunloadIframes: true\n\t\t}, options || {} );\n\n\t\tif( element && element.parentNode ) {\n\t\t\t// HTML5 media elements\n\t\t\ttoArray( element.querySelectorAll( 'video, audio' ) ).forEach( function( el ) {\n\t\t\t\tif( !el.hasAttribute( 'data-ignore' ) && typeof el.pause === 'function' ) {\n\t\t\t\t\tel.setAttribute('data-paused-by-reveal', '');\n\t\t\t\t\tel.pause();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Generic postMessage API for non-lazy loaded iframes\n\t\t\ttoArray( element.querySelectorAll( 'iframe' ) ).forEach( function( el ) {\n\t\t\t\tif( el.contentWindow ) el.contentWindow.postMessage( 'slide:stop', '*' );\n\t\t\t\tel.removeEventListener( 'load', startEmbeddedIframe );\n\t\t\t});\n\n\t\t\t// YouTube postMessage API\n\t\t\ttoArray( element.querySelectorAll( 'iframe[src*=\"youtube.com/embed/\"]' ) ).forEach( function( el ) {\n\t\t\t\tif( !el.hasAttribute( 'data-ignore' ) && el.contentWindow && typeof el.contentWindow.postMessage === 'function' ) {\n\t\t\t\t\tel.contentWindow.postMessage( '{\"event\":\"command\",\"func\":\"pauseVideo\",\"args\":\"\"}', '*' );\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Vimeo postMessage API\n\t\t\ttoArray( element.querySelectorAll( 'iframe[src*=\"player.vimeo.com/\"]' ) ).forEach( function( el ) {\n\t\t\t\tif( !el.hasAttribute( 'data-ignore' ) && el.contentWindow && typeof el.contentWindow.postMessage === 'function' ) {\n\t\t\t\t\tel.contentWindow.postMessage( '{\"method\":\"pause\"}', '*' );\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif( options.unloadIframes === true ) {\n\t\t\t\t// Unload lazy-loaded iframes\n\t\t\t\ttoArray( element.querySelectorAll( 'iframe[data-src]' ) ).forEach( function( el ) {\n\t\t\t\t\t// Only removing the src doesn't actually unload the frame\n\t\t\t\t\t// in all browsers (Firefox) so we set it to blank first\n\t\t\t\t\tel.setAttribute( 'src', 'about:blank' );\n\t\t\t\t\tel.removeAttribute( 'src' );\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns the number of past slides. This can be used as a global\n\t * flattened index for slides.\n\t *\n\t * @param {HTMLElement} [slide=currentSlide] The slide we're counting before\n\t *\n\t * @return {number} Past slide count\n\t */\n\tfunction getSlidePastCount( slide ) {\n\n\t\tif( slide === undefined ) {\n\t\t\tslide = currentSlide;\n\t\t}\n\n\t\tvar horizontalSlides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) );\n\n\t\t// The number of past slides\n\t\tvar pastCount = 0;\n\n\t\t// Step through all slides and count the past ones\n\t\tmainLoop: for( var i = 0; i < horizontalSlides.length; i++ ) {\n\n\t\t\tvar horizontalSlide = horizontalSlides[i];\n\t\t\tvar verticalSlides = toArray( horizontalSlide.querySelectorAll( 'section' ) );\n\n\t\t\tfor( var j = 0; j < verticalSlides.length; j++ ) {\n\n\t\t\t\t// Stop as soon as we arrive at the present\n\t\t\t\tif( verticalSlides[j] === slide ) {\n\t\t\t\t\tbreak mainLoop;\n\t\t\t\t}\n\n\t\t\t\tpastCount++;\n\n\t\t\t}\n\n\t\t\t// Stop as soon as we arrive at the present\n\t\t\tif( horizontalSlide === slide ) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Don't count the wrapping section for vertical slides\n\t\t\tif( horizontalSlide.classList.contains( 'stack' ) === false ) {\n\t\t\t\tpastCount++;\n\t\t\t}\n\n\t\t}\n\n\t\treturn pastCount;\n\n\t}\n\n\t/**\n\t * Returns a value ranging from 0-1 that represents\n\t * how far into the presentation we have navigated.\n\t *\n\t * @return {number}\n\t */\n\tfunction getProgress() {\n\n\t\t// The number of past and total slides\n\t\tvar totalCount = getTotalSlides();\n\t\tvar pastCount = getSlidePastCount();\n\n\t\tif( currentSlide ) {\n\n\t\t\tvar allFragments = currentSlide.querySelectorAll( '.fragment' );\n\n\t\t\t// If there are fragments in the current slide those should be\n\t\t\t// accounted for in the progress.\n\t\t\tif( allFragments.length > 0 ) {\n\t\t\t\tvar visibleFragments = currentSlide.querySelectorAll( '.fragment.visible' );\n\n\t\t\t\t// This value represents how big a portion of the slide progress\n\t\t\t\t// that is made up by its fragments (0-1)\n\t\t\t\tvar fragmentWeight = 0.9;\n\n\t\t\t\t// Add fragment progress to the past slide count\n\t\t\t\tpastCount += ( visibleFragments.length / allFragments.length ) * fragmentWeight;\n\t\t\t}\n\n\t\t}\n\n\t\treturn Math.min( pastCount / ( totalCount - 1 ), 1 );\n\n\t}\n\n\t/**\n\t * Checks if this presentation is running inside of the\n\t * speaker notes window.\n\t *\n\t * @return {boolean}\n\t */\n\tfunction isSpeakerNotes() {\n\n\t\treturn !!window.location.search.match( /receiver/gi );\n\n\t}\n\n\t/**\n\t * Reads the current URL (hash) and navigates accordingly.\n\t */\n\tfunction readURL() {\n\n\t\tvar hash = window.location.hash;\n\n\t\t// Attempt to parse the hash as either an index or name\n\t\tvar bits = hash.slice( 2 ).split( '/' ),\n\t\t\tname = hash.replace( /#|\\//gi, '' );\n\n\t\t// If the first bit is not fully numeric and there is a name we\n\t\t// can assume that this is a named link\n\t\tif( !/^[0-9]*$/.test( bits[0] ) && name.length ) {\n\t\t\tvar element;\n\n\t\t\t// Ensure the named link is a valid HTML ID attribute\n\t\t\ttry {\n\t\t\t\telement = document.getElementById( decodeURIComponent( name ) );\n\t\t\t}\n\t\t\tcatch ( error ) { }\n\n\t\t\t// Ensure that we're not already on a slide with the same name\n\t\t\tvar isSameNameAsCurrentSlide = currentSlide ? currentSlide.getAttribute( 'id' ) === name : false;\n\n\t\t\tif( element ) {\n\t\t\t\t// If the slide exists and is not the current slide...\n\t\t\t\tif ( !isSameNameAsCurrentSlide ) {\n\t\t\t\t\t// ...find the position of the named slide and navigate to it\n\t\t\t\t\tvar indices = Reveal.getIndices(element);\n\t\t\t\t\tslide(indices.h, indices.v);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// If the slide doesn't exist, navigate to the current slide\n\t\t\telse {\n\t\t\t\tslide( indexh || 0, indexv || 0 );\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tvar hashIndexBase = config.hashOneBasedIndex ? 1 : 0;\n\n\t\t\t// Read the index components of the hash\n\t\t\tvar h = ( parseInt( bits[0], 10 ) - hashIndexBase ) || 0,\n\t\t\t\tv = ( parseInt( bits[1], 10 ) - hashIndexBase ) || 0,\n\t\t\t\tf;\n\n\t\t\tif( config.fragmentInURL ) {\n\t\t\t\tf = parseInt( bits[2], 10 );\n\t\t\t\tif( isNaN( f ) ) {\n\t\t\t\t\tf = undefined;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif( h !== indexh || v !== indexv || f !== undefined ) {\n\t\t\t\tslide( h, v, f );\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates the page URL (hash) to reflect the current\n\t * state.\n\t *\n\t * @param {number} delay The time in ms to wait before\n\t * writing the hash\n\t */\n\tfunction writeURL( delay ) {\n\n\t\t// Make sure there's never more than one timeout running\n\t\tclearTimeout( writeURLTimeout );\n\n\t\t// If a delay is specified, timeout this call\n\t\tif( typeof delay === 'number' ) {\n\t\t\twriteURLTimeout = setTimeout( writeURL, delay );\n\t\t}\n\t\telse if( currentSlide ) {\n\t\t\t// If we're configured to push to history OR the history\n\t\t\t// API is not avaialble.\n\t\t\tif( config.history || !window.history ) {\n\t\t\t\twindow.location.hash = locationHash();\n\t\t\t}\n\t\t\t// If we're configured to reflect the current slide in the\n\t\t\t// URL without pushing to history.\n\t\t\telse if( config.hash ) {\n\t\t\t\twindow.history.replaceState( null, null, '#' + locationHash() );\n\t\t\t}\n\t\t\t// If history and hash are both disabled, a hash may still\n\t\t\t// be added to the URL by clicking on a href with a hash\n\t\t\t// target. Counter this by always removing the hash.\n\t\t\telse {\n\t\t\t\twindow.history.replaceState( null, null, window.location.pathname + window.location.search );\n\t\t\t}\n\t\t}\n\n\t}\n\t/**\n\t * Retrieves the h/v location and fragment of the current,\n\t * or specified, slide.\n\t *\n\t * @param {HTMLElement} [slide] If specified, the returned\n\t * index will be for this slide rather than the currently\n\t * active one\n\t *\n\t * @return {{h: number, v: number, f: number}}\n\t */\n\tfunction getIndices( slide ) {\n\n\t\t// By default, return the current indices\n\t\tvar h = indexh,\n\t\t\tv = indexv,\n\t\t\tf;\n\n\t\t// If a slide is specified, return the indices of that slide\n\t\tif( slide ) {\n\t\t\tvar isVertical = isVerticalSlide( slide );\n\t\t\tvar slideh = isVertical ? slide.parentNode : slide;\n\n\t\t\t// Select all horizontal slides\n\t\t\tvar horizontalSlides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) );\n\n\t\t\t// Now that we know which the horizontal slide is, get its index\n\t\t\th = Math.max( horizontalSlides.indexOf( slideh ), 0 );\n\n\t\t\t// Assume we're not vertical\n\t\t\tv = undefined;\n\n\t\t\t// If this is a vertical slide, grab the vertical index\n\t\t\tif( isVertical ) {\n\t\t\t\tv = Math.max( toArray( slide.parentNode.querySelectorAll( 'section' ) ).indexOf( slide ), 0 );\n\t\t\t}\n\t\t}\n\n\t\tif( !slide && currentSlide ) {\n\t\t\tvar hasFragments = currentSlide.querySelectorAll( '.fragment' ).length > 0;\n\t\t\tif( hasFragments ) {\n\t\t\t\tvar currentFragment = currentSlide.querySelector( '.current-fragment' );\n\t\t\t\tif( currentFragment && currentFragment.hasAttribute( 'data-fragment-index' ) ) {\n\t\t\t\t\tf = parseInt( currentFragment.getAttribute( 'data-fragment-index' ), 10 );\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tf = currentSlide.querySelectorAll( '.fragment.visible' ).length - 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn { h: h, v: v, f: f };\n\n\t}\n\n\t/**\n\t * Retrieves all slides in this presentation.\n\t */\n\tfunction getSlides() {\n\n\t\treturn toArray( dom.wrapper.querySelectorAll( SLIDES_SELECTOR + ':not(.stack)' ) );\n\n\t}\n\n\t/**\n\t * Returns a list of all horizontal slides in the deck. Each\n\t * vertical stack is included as one horizontal slide in the\n\t * resulting array.\n\t */\n\tfunction getHorizontalSlides() {\n\n\t\treturn toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) );\n\n\t}\n\n\t/**\n\t * Returns all vertical slides that exist within this deck.\n\t */\n\tfunction getVerticalSlides() {\n\n\t\treturn toArray( dom.wrapper.querySelectorAll( '.slides>section>section' ) );\n\n\t}\n\n\t/**\n\t * Returns true if there are at least two horizontal slides.\n\t */\n\tfunction hasHorizontalSlides() {\n\n\t\treturn getHorizontalSlides().length > 1;\n\t}\n\n\t/**\n\t * Returns true if there are at least two vertical slides.\n\t */\n\tfunction hasVerticalSlides() {\n\n\t\treturn getVerticalSlides().length > 1;\n\n\t}\n\n\t/**\n\t * Returns an array of objects where each object represents the\n\t * attributes on its respective slide.\n\t */\n\tfunction getSlidesAttributes() {\n\n\t\treturn getSlides().map( function( slide ) {\n\n\t\t\tvar attributes = {};\n\t\t\tfor( var i = 0; i < slide.attributes.length; i++ ) {\n\t\t\t\tvar attribute = slide.attributes[ i ];\n\t\t\t\tattributes[ attribute.name ] = attribute.value;\n\t\t\t}\n\t\t\treturn attributes;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Retrieves the total number of slides in this presentation.\n\t *\n\t * @return {number}\n\t */\n\tfunction getTotalSlides() {\n\n\t\treturn getSlides().length;\n\n\t}\n\n\t/**\n\t * Returns the slide element matching the specified index.\n\t *\n\t * @return {HTMLElement}\n\t */\n\tfunction getSlide( x, y ) {\n\n\t\tvar horizontalSlide = dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR )[ x ];\n\t\tvar verticalSlides = horizontalSlide && horizontalSlide.querySelectorAll( 'section' );\n\n\t\tif( verticalSlides && verticalSlides.length && typeof y === 'number' ) {\n\t\t\treturn verticalSlides ? verticalSlides[ y ] : undefined;\n\t\t}\n\n\t\treturn horizontalSlide;\n\n\t}\n\n\t/**\n\t * Returns the background element for the given slide.\n\t * All slides, even the ones with no background properties\n\t * defined, have a background element so as long as the\n\t * index is valid an element will be returned.\n\t *\n\t * @param {mixed} x Horizontal background index OR a slide\n\t * HTML element\n\t * @param {number} y Vertical background index\n\t * @return {(HTMLElement[]|*)}\n\t */\n\tfunction getSlideBackground( x, y ) {\n\n\t\tvar slide = typeof x === 'number' ? getSlide( x, y ) : x;\n\t\tif( slide ) {\n\t\t\treturn slide.slideBackgroundElement;\n\t\t}\n\n\t\treturn undefined;\n\n\t}\n\n\t/**\n\t * Retrieves the speaker notes from a slide. Notes can be\n\t * defined in two ways:\n\t * 1. As a data-notes attribute on the slide <section>\n\t * 2. As an <aside class=\"notes\"> inside of the slide\n\t *\n\t * @param {HTMLElement} [slide=currentSlide]\n\t * @return {(string|null)}\n\t */\n\tfunction getSlideNotes( slide ) {\n\n\t\t// Default to the current slide\n\t\tslide = slide || currentSlide;\n\n\t\t// Notes can be specified via the data-notes attribute...\n\t\tif( slide.hasAttribute( 'data-notes' ) ) {\n\t\t\treturn slide.getAttribute( 'data-notes' );\n\t\t}\n\n\t\t// ... or using an <aside class=\"notes\"> element\n\t\tvar notesElement = slide.querySelector( 'aside.notes' );\n\t\tif( notesElement ) {\n\t\t\treturn notesElement.innerHTML;\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * Retrieves the current state of the presentation as\n\t * an object. This state can then be restored at any\n\t * time.\n\t *\n\t * @return {{indexh: number, indexv: number, indexf: number, paused: boolean, overview: boolean}}\n\t */\n\tfunction getState() {\n\n\t\tvar indices = getIndices();\n\n\t\treturn {\n\t\t\tindexh: indices.h,\n\t\t\tindexv: indices.v,\n\t\t\tindexf: indices.f,\n\t\t\tpaused: isPaused(),\n\t\t\toverview: isOverview()\n\t\t};\n\n\t}\n\n\t/**\n\t * Restores the presentation to the given state.\n\t *\n\t * @param {object} state As generated by getState()\n\t * @see {@link getState} generates the parameter `state`\n\t */\n\tfunction setState( state ) {\n\n\t\tif( typeof state === 'object' ) {\n\t\t\tslide( deserialize( state.indexh ), deserialize( state.indexv ), deserialize( state.indexf ) );\n\n\t\t\tvar pausedFlag = deserialize( state.paused ),\n\t\t\t\toverviewFlag = deserialize( state.overview );\n\n\t\t\tif( typeof pausedFlag === 'boolean' && pausedFlag !== isPaused() ) {\n\t\t\t\ttogglePause( pausedFlag );\n\t\t\t}\n\n\t\t\tif( typeof overviewFlag === 'boolean' && overviewFlag !== isOverview() ) {\n\t\t\t\ttoggleOverview( overviewFlag );\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Return a sorted fragments list, ordered by an increasing\n\t * \"data-fragment-index\" attribute.\n\t *\n\t * Fragments will be revealed in the order that they are returned by\n\t * this function, so you can use the index attributes to control the\n\t * order of fragment appearance.\n\t *\n\t * To maintain a sensible default fragment order, fragments are presumed\n\t * to be passed in document order. This function adds a \"fragment-index\"\n\t * attribute to each node if such an attribute is not already present,\n\t * and sets that attribute to an integer value which is the position of\n\t * the fragment within the fragments list.\n\t *\n\t * @param {object[]|*} fragments\n\t * @param {boolean} grouped If true the returned array will contain\n\t * nested arrays for all fragments with the same index\n\t * @return {object[]} sorted Sorted array of fragments\n\t */\n\tfunction sortFragments( fragments, grouped ) {\n\n\t\tfragments = toArray( fragments );\n\n\t\tvar ordered = [],\n\t\t\tunordered = [],\n\t\t\tsorted = [];\n\n\t\t// Group ordered and unordered elements\n\t\tfragments.forEach( function( fragment, i ) {\n\t\t\tif( fragment.hasAttribute( 'data-fragment-index' ) ) {\n\t\t\t\tvar index = parseInt( fragment.getAttribute( 'data-fragment-index' ), 10 );\n\n\t\t\t\tif( !ordered[index] ) {\n\t\t\t\t\tordered[index] = [];\n\t\t\t\t}\n\n\t\t\t\tordered[index].push( fragment );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tunordered.push( [ fragment ] );\n\t\t\t}\n\t\t} );\n\n\t\t// Append fragments without explicit indices in their\n\t\t// DOM order\n\t\tordered = ordered.concat( unordered );\n\n\t\t// Manually count the index up per group to ensure there\n\t\t// are no gaps\n\t\tvar index = 0;\n\n\t\t// Push all fragments in their sorted order to an array,\n\t\t// this flattens the groups\n\t\tordered.forEach( function( group ) {\n\t\t\tgroup.forEach( function( fragment ) {\n\t\t\t\tsorted.push( fragment );\n\t\t\t\tfragment.setAttribute( 'data-fragment-index', index );\n\t\t\t} );\n\n\t\t\tindex ++;\n\t\t} );\n\n\t\treturn grouped === true ? ordered : sorted;\n\n\t}\n\n\t/**\n\t * Refreshes the fragments on the current slide so that they\n\t * have the appropriate classes (.visible + .current-fragment).\n\t *\n\t * @param {number} [index] The index of the current fragment\n\t * @param {array} [fragments] Array containing all fragments\n\t * in the current slide\n\t *\n\t * @return {{shown: array, hidden: array}}\n\t */\n\tfunction updateFragments( index, fragments ) {\n\n\t\tvar changedFragments = {\n\t\t\tshown: [],\n\t\t\thidden: []\n\t\t};\n\n\t\tif( currentSlide && config.fragments ) {\n\n\t\t\tfragments = fragments || sortFragments( currentSlide.querySelectorAll( '.fragment' ) );\n\n\t\t\tif( fragments.length ) {\n\n\t\t\t\tvar maxIndex = 0;\n\n\t\t\t\tif( typeof index !== 'number' ) {\n\t\t\t\t\tvar currentFragment = sortFragments( currentSlide.querySelectorAll( '.fragment.visible' ) ).pop();\n\t\t\t\t\tif( currentFragment ) {\n\t\t\t\t\t\tindex = parseInt( currentFragment.getAttribute( 'data-fragment-index' ) || 0, 10 );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttoArray( fragments ).forEach( function( el, i ) {\n\n\t\t\t\t\tif( el.hasAttribute( 'data-fragment-index' ) ) {\n\t\t\t\t\t\ti = parseInt( el.getAttribute( 'data-fragment-index' ), 10 );\n\t\t\t\t\t}\n\n\t\t\t\t\tmaxIndex = Math.max( maxIndex, i );\n\n\t\t\t\t\t// Visible fragments\n\t\t\t\t\tif( i <= index ) {\n\t\t\t\t\t\tif( !el.classList.contains( 'visible' ) ) changedFragments.shown.push( el );\n\t\t\t\t\t\tel.classList.add( 'visible' );\n\t\t\t\t\t\tel.classList.remove( 'current-fragment' );\n\n\t\t\t\t\t\t// Announce the fragments one by one to the Screen Reader\n\t\t\t\t\t\tdom.statusDiv.textContent = getStatusText( el );\n\n\t\t\t\t\t\tif( i === index ) {\n\t\t\t\t\t\t\tel.classList.add( 'current-fragment' );\n\t\t\t\t\t\t\tstartEmbeddedContent( el );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// Hidden fragments\n\t\t\t\t\telse {\n\t\t\t\t\t\tif( el.classList.contains( 'visible' ) ) changedFragments.hidden.push( el );\n\t\t\t\t\t\tel.classList.remove( 'visible' );\n\t\t\t\t\t\tel.classList.remove( 'current-fragment' );\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\t// Write the current fragment index to the slide <section>.\n\t\t\t\t// This can be used by end users to apply styles based on\n\t\t\t\t// the current fragment index.\n\t\t\t\tindex = typeof index === 'number' ? index : -1;\n\t\t\t\tindex = Math.max( Math.min( index, maxIndex ), -1 );\n\t\t\t\tcurrentSlide.setAttribute( 'data-fragment', index );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn changedFragments;\n\n\t}\n\n\t/**\n\t * Navigate to the specified slide fragment.\n\t *\n\t * @param {?number} index The index of the fragment that\n\t * should be shown, -1 means all are invisible\n\t * @param {number} offset Integer offset to apply to the\n\t * fragment index\n\t *\n\t * @return {boolean} true if a change was made in any\n\t * fragments visibility as part of this call\n\t */\n\tfunction navigateFragment( index, offset ) {\n\n\t\tif( currentSlide && config.fragments ) {\n\n\t\t\tvar fragments = sortFragments( currentSlide.querySelectorAll( '.fragment' ) );\n\t\t\tif( fragments.length ) {\n\n\t\t\t\t// If no index is specified, find the current\n\t\t\t\tif( typeof index !== 'number' ) {\n\t\t\t\t\tvar lastVisibleFragment = sortFragments( currentSlide.querySelectorAll( '.fragment.visible' ) ).pop();\n\n\t\t\t\t\tif( lastVisibleFragment ) {\n\t\t\t\t\t\tindex = parseInt( lastVisibleFragment.getAttribute( 'data-fragment-index' ) || 0, 10 );\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tindex = -1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// If an offset is specified, apply it to the index\n\t\t\t\tif( typeof offset === 'number' ) {\n\t\t\t\t\tindex += offset;\n\t\t\t\t}\n\n\t\t\t\tvar changedFragments = updateFragments( index, fragments );\n\n\t\t\t\tif( changedFragments.hidden.length ) {\n\t\t\t\t\tdispatchEvent( 'fragmenthidden', { fragment: changedFragments.hidden[0], fragments: changedFragments.hidden } );\n\t\t\t\t}\n\n\t\t\t\tif( changedFragments.shown.length ) {\n\t\t\t\t\tdispatchEvent( 'fragmentshown', { fragment: changedFragments.shown[0], fragments: changedFragments.shown } );\n\t\t\t\t}\n\n\t\t\t\tupdateControls();\n\t\t\t\tupdateProgress();\n\n\t\t\t\tif( config.fragmentInURL ) {\n\t\t\t\t\twriteURL();\n\t\t\t\t}\n\n\t\t\t\treturn !!( changedFragments.shown.length || changedFragments.hidden.length );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\t/**\n\t * Navigate to the next slide fragment.\n\t *\n\t * @return {boolean} true if there was a next fragment,\n\t * false otherwise\n\t */\n\tfunction nextFragment() {\n\n\t\treturn navigateFragment( null, 1 );\n\n\t}\n\n\t/**\n\t * Navigate to the previous slide fragment.\n\t *\n\t * @return {boolean} true if there was a previous fragment,\n\t * false otherwise\n\t */\n\tfunction previousFragment() {\n\n\t\treturn navigateFragment( null, -1 );\n\n\t}\n\n\t/**\n\t * Cues a new automated slide if enabled in the config.\n\t */\n\tfunction cueAutoSlide() {\n\n\t\tcancelAutoSlide();\n\n\t\tif( currentSlide && config.autoSlide !== false ) {\n\n\t\t\tvar fragment = currentSlide.querySelector( '.current-fragment' );\n\n\t\t\t// When the slide first appears there is no \"current\" fragment so\n\t\t\t// we look for a data-autoslide timing on the first fragment\n\t\t\tif( !fragment ) fragment = currentSlide.querySelector( '.fragment' );\n\n\t\t\tvar fragmentAutoSlide = fragment ? fragment.getAttribute( 'data-autoslide' ) : null;\n\t\t\tvar parentAutoSlide = currentSlide.parentNode ? currentSlide.parentNode.getAttribute( 'data-autoslide' ) : null;\n\t\t\tvar slideAutoSlide = currentSlide.getAttribute( 'data-autoslide' );\n\n\t\t\t// Pick value in the following priority order:\n\t\t\t// 1. Current fragment's data-autoslide\n\t\t\t// 2. Current slide's data-autoslide\n\t\t\t// 3. Parent slide's data-autoslide\n\t\t\t// 4. Global autoSlide setting\n\t\t\tif( fragmentAutoSlide ) {\n\t\t\t\tautoSlide = parseInt( fragmentAutoSlide, 10 );\n\t\t\t}\n\t\t\telse if( slideAutoSlide ) {\n\t\t\t\tautoSlide = parseInt( slideAutoSlide, 10 );\n\t\t\t}\n\t\t\telse if( parentAutoSlide ) {\n\t\t\t\tautoSlide = parseInt( parentAutoSlide, 10 );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tautoSlide = config.autoSlide;\n\t\t\t}\n\n\t\t\t// If there are media elements with data-autoplay,\n\t\t\t// automatically set the autoSlide duration to the\n\t\t\t// length of that media. Not applicable if the slide\n\t\t\t// is divided up into fragments.\n\t\t\t// playbackRate is accounted for in the duration.\n\t\t\tif( currentSlide.querySelectorAll( '.fragment' ).length === 0 ) {\n\t\t\t\ttoArray( currentSlide.querySelectorAll( 'video, audio' ) ).forEach( function( el ) {\n\t\t\t\t\tif( el.hasAttribute( 'data-autoplay' ) ) {\n\t\t\t\t\t\tif( autoSlide && (el.duration * 1000 / el.playbackRate ) > autoSlide ) {\n\t\t\t\t\t\t\tautoSlide = ( el.duration * 1000 / el.playbackRate ) + 1000;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t// Cue the next auto-slide if:\n\t\t\t// - There is an autoSlide value\n\t\t\t// - Auto-sliding isn't paused by the user\n\t\t\t// - The presentation isn't paused\n\t\t\t// - The overview isn't active\n\t\t\t// - The presentation isn't over\n\t\t\tif( autoSlide && !autoSlidePaused && !isPaused() && !isOverview() && ( !Reveal.isLastSlide() || availableFragments().next || config.loop === true ) ) {\n\t\t\t\tautoSlideTimeout = setTimeout( function() {\n\t\t\t\t\ttypeof config.autoSlideMethod === 'function' ? config.autoSlideMethod() : navigateNext();\n\t\t\t\t\tcueAutoSlide();\n\t\t\t\t}, autoSlide );\n\t\t\t\tautoSlideStartTime = Date.now();\n\t\t\t}\n\n\t\t\tif( autoSlidePlayer ) {\n\t\t\t\tautoSlidePlayer.setPlaying( autoSlideTimeout !== -1 );\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Cancels any ongoing request to auto-slide.\n\t */\n\tfunction cancelAutoSlide() {\n\n\t\tclearTimeout( autoSlideTimeout );\n\t\tautoSlideTimeout = -1;\n\n\t}\n\n\tfunction pauseAutoSlide() {\n\n\t\tif( autoSlide && !autoSlidePaused ) {\n\t\t\tautoSlidePaused = true;\n\t\t\tdispatchEvent( 'autoslidepaused' );\n\t\t\tclearTimeout( autoSlideTimeout );\n\n\t\t\tif( autoSlidePlayer ) {\n\t\t\t\tautoSlidePlayer.setPlaying( false );\n\t\t\t}\n\t\t}\n\n\t}\n\n\tfunction resumeAutoSlide() {\n\n\t\tif( autoSlide && autoSlidePaused ) {\n\t\t\tautoSlidePaused = false;\n\t\t\tdispatchEvent( 'autoslideresumed' );\n\t\t\tcueAutoSlide();\n\t\t}\n\n\t}\n\n\tfunction navigateLeft() {\n\n\t\t// Reverse for RTL\n\t\tif( config.rtl ) {\n\t\t\tif( ( isOverview() || nextFragment() === false ) && availableRoutes().left ) {\n\t\t\t\tslide( indexh + 1, config.navigationMode === 'grid' ? indexv : undefined );\n\t\t\t}\n\t\t}\n\t\t// Normal navigation\n\t\telse if( ( isOverview() || previousFragment() === false ) && availableRoutes().left ) {\n\t\t\tslide( indexh - 1, config.navigationMode === 'grid' ? indexv : undefined );\n\t\t}\n\n\t}\n\n\tfunction navigateRight() {\n\n\t\thasNavigatedRight = true;\n\n\t\t// Reverse for RTL\n\t\tif( config.rtl ) {\n\t\t\tif( ( isOverview() || previousFragment() === false ) && availableRoutes().right ) {\n\t\t\t\tslide( indexh - 1, config.navigationMode === 'grid' ? indexv : undefined );\n\t\t\t}\n\t\t}\n\t\t// Normal navigation\n\t\telse if( ( isOverview() || nextFragment() === false ) && availableRoutes().right ) {\n\t\t\tslide( indexh + 1, config.navigationMode === 'grid' ? indexv : undefined );\n\t\t}\n\n\t}\n\n\tfunction navigateUp() {\n\n\t\t// Prioritize hiding fragments\n\t\tif( ( isOverview() || previousFragment() === false ) && availableRoutes().up ) {\n\t\t\tslide( indexh, indexv - 1 );\n\t\t}\n\n\t}\n\n\tfunction navigateDown() {\n\n\t\thasNavigatedDown = true;\n\n\t\t// Prioritize revealing fragments\n\t\tif( ( isOverview() || nextFragment() === false ) && availableRoutes().down ) {\n\t\t\tslide( indexh, indexv + 1 );\n\t\t}\n\n\t}\n\n\t/**\n\t * Navigates backwards, prioritized in the following order:\n\t * 1) Previous fragment\n\t * 2) Previous vertical slide\n\t * 3) Previous horizontal slide\n\t */\n\tfunction navigatePrev() {\n\n\t\t// Prioritize revealing fragments\n\t\tif( previousFragment() === false ) {\n\t\t\tif( availableRoutes().up ) {\n\t\t\t\tnavigateUp();\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Fetch the previous horizontal slide, if there is one\n\t\t\t\tvar previousSlide;\n\n\t\t\t\tif( config.rtl ) {\n\t\t\t\t\tpreviousSlide = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR + '.future' ) ).pop();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tpreviousSlide = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR + '.past' ) ).pop();\n\t\t\t\t}\n\n\t\t\t\tif( previousSlide ) {\n\t\t\t\t\tvar v = ( previousSlide.querySelectorAll( 'section' ).length - 1 ) || undefined;\n\t\t\t\t\tvar h = indexh - 1;\n\t\t\t\t\tslide( h, v );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * The reverse of #navigatePrev().\n\t */\n\tfunction navigateNext() {\n\n\t\thasNavigatedRight = true;\n\t\thasNavigatedDown = true;\n\n\t\t// Prioritize revealing fragments\n\t\tif( nextFragment() === false ) {\n\n\t\t\tvar routes = availableRoutes();\n\n\t\t\t// When looping is enabled `routes.down` is always available\n\t\t\t// so we need a separate check for when we've reached the\n\t\t\t// end of a stack and should move horizontally\n\t\t\tif( routes.down && routes.right && config.loop && Reveal.isLastVerticalSlide( currentSlide ) ) {\n\t\t\t\troutes.down = false;\n\t\t\t}\n\n\t\t\tif( routes.down ) {\n\t\t\t\tnavigateDown();\n\t\t\t}\n\t\t\telse if( config.rtl ) {\n\t\t\t\tnavigateLeft();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tnavigateRight();\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Checks if the target element prevents the triggering of\n\t * swipe navigation.\n\t */\n\tfunction isSwipePrevented( target ) {\n\n\t\twhile( target && typeof target.hasAttribute === 'function' ) {\n\t\t\tif( target.hasAttribute( 'data-prevent-swipe' ) ) return true;\n\t\t\ttarget = target.parentNode;\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\n\t// --------------------------------------------------------------------//\n\t// ----------------------------- EVENTS -------------------------------//\n\t// --------------------------------------------------------------------//\n\n\t/**\n\t * Called by all event handlers that are based on user\n\t * input.\n\t *\n\t * @param {object} [event]\n\t */\n\tfunction onUserInput( event ) {\n\n\t\tif( config.autoSlideStoppable ) {\n\t\t\tpauseAutoSlide();\n\t\t}\n\n\t}\n\n\t/**\n\t * Called whenever there is mouse input at the document level\n\t * to determine if the cursor is active or not.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onDocumentCursorActive( event ) {\n\n\t\tshowCursor();\n\n\t\tclearTimeout( cursorInactiveTimeout );\n\n\t\tcursorInactiveTimeout = setTimeout( hideCursor, config.hideCursorTime );\n\n\t}\n\n\t/**\n\t * Handler for the document level 'keypress' event.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onDocumentKeyPress( event ) {\n\n\t\t// Check if the pressed key is question mark\n\t\tif( event.shiftKey && event.charCode === 63 ) {\n\t\t\ttoggleHelp();\n\t\t}\n\n\t}\n\n\t/**\n\t * Handler for the document level 'keydown' event.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onDocumentKeyDown( event ) {\n\n\t\t// If there's a condition specified and it returns false,\n\t\t// ignore this event\n\t\tif( typeof config.keyboardCondition === 'function' && config.keyboardCondition(event) === false ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Shorthand\n\t\tvar keyCode = event.keyCode;\n\n\t\t// Remember if auto-sliding was paused so we can toggle it\n\t\tvar autoSlideWasPaused = autoSlidePaused;\n\n\t\tonUserInput( event );\n\n\t\t// Is there a focused element that could be using the keyboard?\n\t\tvar activeElementIsCE = document.activeElement && document.activeElement.contentEditable !== 'inherit';\n\t\tvar activeElementIsInput = document.activeElement && document.activeElement.tagName && /input|textarea/i.test( document.activeElement.tagName );\n\t\tvar activeElementIsNotes = document.activeElement && document.activeElement.className && /speaker-notes/i.test( document.activeElement.className);\n\n\t\t// Whitelist specific modified + keycode combinations\n\t\tvar prevSlideShortcut = event.shiftKey && event.keyCode === 32;\n\t\tvar firstSlideShortcut = event.shiftKey && keyCode === 37;\n\t\tvar lastSlideShortcut = event.shiftKey && keyCode === 39;\n\n\t\t// Prevent all other events when a modifier is pressed\n\t\tvar unusedModifier = \t!prevSlideShortcut && !firstSlideShortcut && !lastSlideShortcut &&\n\t\t\t( event.shiftKey || event.altKey || event.ctrlKey || event.metaKey );\n\n\t\t// Disregard the event if there's a focused element or a\n\t\t// keyboard modifier key is present\n\t\tif( activeElementIsCE || activeElementIsInput || activeElementIsNotes || unusedModifier ) return;\n\n\t\t// While paused only allow resume keyboard events; 'b', 'v', '.'\n\t\tvar resumeKeyCodes = [66,86,190,191];\n\t\tvar key;\n\n\t\t// Custom key bindings for togglePause should be able to resume\n\t\tif( typeof config.keyboard === 'object' ) {\n\t\t\tfor( key in config.keyboard ) {\n\t\t\t\tif( config.keyboard[key] === 'togglePause' ) {\n\t\t\t\t\tresumeKeyCodes.push( parseInt( key, 10 ) );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif( isPaused() && resumeKeyCodes.indexOf( keyCode ) === -1 ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Use linear navigation if we're configured to OR if\n\t\t// the presentation is one-dimensional\n\t\tvar useLinearMode = config.navigationMode === 'linear' || !hasHorizontalSlides() || !hasVerticalSlides();\n\n\t\tvar triggered = false;\n\n\t\t// 1. User defined key bindings\n\t\tif( typeof config.keyboard === 'object' ) {\n\n\t\t\tfor( key in config.keyboard ) {\n\n\t\t\t\t// Check if this binding matches the pressed key\n\t\t\t\tif( parseInt( key, 10 ) === keyCode ) {\n\n\t\t\t\t\tvar value = config.keyboard[ key ];\n\n\t\t\t\t\t// Callback function\n\t\t\t\t\tif( typeof value === 'function' ) {\n\t\t\t\t\t\tvalue.apply( null, [ event ] );\n\t\t\t\t\t}\n\t\t\t\t\t// String shortcuts to reveal.js API\n\t\t\t\t\telse if( typeof value === 'string' && typeof Reveal[ value ] === 'function' ) {\n\t\t\t\t\t\tReveal[ value ].call();\n\t\t\t\t\t}\n\n\t\t\t\t\ttriggered = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// 2. Registered custom key bindings\n\t\tif( triggered === false ) {\n\n\t\t\tfor( key in registeredKeyBindings ) {\n\n\t\t\t\t// Check if this binding matches the pressed key\n\t\t\t\tif( parseInt( key, 10 ) === keyCode ) {\n\n\t\t\t\t\tvar action = registeredKeyBindings[ key ].callback;\n\n\t\t\t\t\t// Callback function\n\t\t\t\t\tif( typeof action === 'function' ) {\n\t\t\t\t\t\taction.apply( null, [ event ] );\n\t\t\t\t\t}\n\t\t\t\t\t// String shortcuts to reveal.js API\n\t\t\t\t\telse if( typeof action === 'string' && typeof Reveal[ action ] === 'function' ) {\n\t\t\t\t\t\tReveal[ action ].call();\n\t\t\t\t\t}\n\n\t\t\t\t\ttriggered = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// 3. System defined key bindings\n\t\tif( triggered === false ) {\n\n\t\t\t// Assume true and try to prove false\n\t\t\ttriggered = true;\n\n\t\t\t// P, PAGE UP\n\t\t\tif( keyCode === 80 || keyCode === 33 ) {\n\t\t\t\tnavigatePrev();\n\t\t\t}\n\t\t\t// N, PAGE DOWN\n\t\t\telse if( keyCode === 78 || keyCode === 34 ) {\n\t\t\t\tnavigateNext();\n\t\t\t}\n\t\t\t// H, LEFT\n\t\t\telse if( keyCode === 72 || keyCode === 37 ) {\n\t\t\t\tif( firstSlideShortcut ) {\n\t\t\t\t\tslide( 0 );\n\t\t\t\t}\n\t\t\t\telse if( !isOverview() && useLinearMode ) {\n\t\t\t\t\tnavigatePrev();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnavigateLeft();\n\t\t\t\t}\n\t\t\t}\n\t\t\t// L, RIGHT\n\t\t\telse if( keyCode === 76 || keyCode === 39 ) {\n\t\t\t\tif( lastSlideShortcut ) {\n\t\t\t\t\tslide( Number.MAX_VALUE );\n\t\t\t\t}\n\t\t\t\telse if( !isOverview() && useLinearMode ) {\n\t\t\t\t\tnavigateNext();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnavigateRight();\n\t\t\t\t}\n\t\t\t}\n\t\t\t// K, UP\n\t\t\telse if( keyCode === 75 || keyCode === 38 ) {\n\t\t\t\tif( !isOverview() && useLinearMode ) {\n\t\t\t\t\tnavigatePrev();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnavigateUp();\n\t\t\t\t}\n\t\t\t}\n\t\t\t// J, DOWN\n\t\t\telse if( keyCode === 74 || keyCode === 40 ) {\n\t\t\t\tif( !isOverview() && useLinearMode ) {\n\t\t\t\t\tnavigateNext();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnavigateDown();\n\t\t\t\t}\n\t\t\t}\n\t\t\t// HOME\n\t\t\telse if( keyCode === 36 ) {\n\t\t\t\tslide( 0 );\n\t\t\t}\n\t\t\t// END\n\t\t\telse if( keyCode === 35 ) {\n\t\t\t\tslide( Number.MAX_VALUE );\n\t\t\t}\n\t\t\t// SPACE\n\t\t\telse if( keyCode === 32 ) {\n\t\t\t\tif( isOverview() ) {\n\t\t\t\t\tdeactivateOverview();\n\t\t\t\t}\n\t\t\t\tif( event.shiftKey ) {\n\t\t\t\t\tnavigatePrev();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnavigateNext();\n\t\t\t\t}\n\t\t\t}\n\t\t\t// TWO-SPOT, SEMICOLON, B, V, PERIOD, LOGITECH PRESENTER TOOLS \"BLACK SCREEN\" BUTTON\n\t\t\telse if( keyCode === 58 || keyCode === 59 || keyCode === 66 || keyCode === 86 || keyCode === 190 || keyCode === 191 ) {\n\t\t\t\ttogglePause();\n\t\t\t}\n\t\t\t// F\n\t\t\telse if( keyCode === 70 ) {\n\t\t\t\tenterFullscreen();\n\t\t\t}\n\t\t\t// A\n\t\t\telse if( keyCode === 65 ) {\n\t\t\t\tif ( config.autoSlideStoppable ) {\n\t\t\t\t\ttoggleAutoSlide( autoSlideWasPaused );\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttriggered = false;\n\t\t\t}\n\n\t\t}\n\n\t\t// If the input resulted in a triggered action we should prevent\n\t\t// the browsers default behavior\n\t\tif( triggered ) {\n\t\t\tevent.preventDefault && event.preventDefault();\n\t\t}\n\t\t// ESC or O key\n\t\telse if ( ( keyCode === 27 || keyCode === 79 ) && features.transforms3d ) {\n\t\t\tif( dom.overlay ) {\n\t\t\t\tcloseOverlay();\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttoggleOverview();\n\t\t\t}\n\n\t\t\tevent.preventDefault && event.preventDefault();\n\t\t}\n\n\t\t// If auto-sliding is enabled we need to cue up\n\t\t// another timeout\n\t\tcueAutoSlide();\n\n\t}\n\n\t/**\n\t * Handler for the 'touchstart' event, enables support for\n\t * swipe and pinch gestures.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onTouchStart( event ) {\n\n\t\tif( isSwipePrevented( event.target ) ) return true;\n\n\t\ttouch.startX = event.touches[0].clientX;\n\t\ttouch.startY = event.touches[0].clientY;\n\t\ttouch.startCount = event.touches.length;\n\n\t}\n\n\t/**\n\t * Handler for the 'touchmove' event.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onTouchMove( event ) {\n\n\t\tif( isSwipePrevented( event.target ) ) return true;\n\n\t\t// Each touch should only trigger one action\n\t\tif( !touch.captured ) {\n\t\t\tonUserInput( event );\n\n\t\t\tvar currentX = event.touches[0].clientX;\n\t\t\tvar currentY = event.touches[0].clientY;\n\n\t\t\t// There was only one touch point, look for a swipe\n\t\t\tif( event.touches.length === 1 && touch.startCount !== 2 ) {\n\n\t\t\t\tvar deltaX = currentX - touch.startX,\n\t\t\t\t\tdeltaY = currentY - touch.startY;\n\n\t\t\t\tif( deltaX > touch.threshold && Math.abs( deltaX ) > Math.abs( deltaY ) ) {\n\t\t\t\t\ttouch.captured = true;\n\t\t\t\t\tif( config.navigationMode === 'linear' ) {\n\t\t\t\t\t\tif( config.rtl ) {\n\t\t\t\t\t\t\tnavigateNext();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tnavigatePrev();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tnavigateLeft();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if( deltaX < -touch.threshold && Math.abs( deltaX ) > Math.abs( deltaY ) ) {\n\t\t\t\t\ttouch.captured = true;\n\t\t\t\t\tif( config.navigationMode === 'linear' ) {\n\t\t\t\t\t\tif( config.rtl ) {\n\t\t\t\t\t\t\tnavigatePrev();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tnavigateNext();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tnavigateRight();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if( deltaY > touch.threshold ) {\n\t\t\t\t\ttouch.captured = true;\n\t\t\t\t\tif( config.navigationMode === 'linear' ) {\n\t\t\t\t\t\tnavigatePrev();\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tnavigateUp();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if( deltaY < -touch.threshold ) {\n\t\t\t\t\ttouch.captured = true;\n\t\t\t\t\tif( config.navigationMode === 'linear' ) {\n\t\t\t\t\t\tnavigateNext();\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tnavigateDown();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// If we're embedded, only block touch events if they have\n\t\t\t\t// triggered an action\n\t\t\t\tif( config.embedded ) {\n\t\t\t\t\tif( touch.captured || isVerticalSlide( currentSlide ) ) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Not embedded? Block them all to avoid needless tossing\n\t\t\t\t// around of the viewport in iOS\n\t\t\t\telse {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t\t// There's a bug with swiping on some Android devices unless\n\t\t// the default action is always prevented\n\t\telse if( UA.match( /android/gi ) ) {\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t}\n\n\t/**\n\t * Handler for the 'touchend' event.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onTouchEnd( event ) {\n\n\t\ttouch.captured = false;\n\n\t}\n\n\t/**\n\t * Convert pointer down to touch start.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onPointerDown( event ) {\n\n\t\tif( event.pointerType === event.MSPOINTER_TYPE_TOUCH || event.pointerType === \"touch\" ) {\n\t\t\tevent.touches = [{ clientX: event.clientX, clientY: event.clientY }];\n\t\t\tonTouchStart( event );\n\t\t}\n\n\t}\n\n\t/**\n\t * Convert pointer move to touch move.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onPointerMove( event ) {\n\n\t\tif( event.pointerType === event.MSPOINTER_TYPE_TOUCH || event.pointerType === \"touch\" )  {\n\t\t\tevent.touches = [{ clientX: event.clientX, clientY: event.clientY }];\n\t\t\tonTouchMove( event );\n\t\t}\n\n\t}\n\n\t/**\n\t * Convert pointer up to touch end.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onPointerUp( event ) {\n\n\t\tif( event.pointerType === event.MSPOINTER_TYPE_TOUCH || event.pointerType === \"touch\" )  {\n\t\t\tevent.touches = [{ clientX: event.clientX, clientY: event.clientY }];\n\t\t\tonTouchEnd( event );\n\t\t}\n\n\t}\n\n\t/**\n\t * Handles mouse wheel scrolling, throttled to avoid skipping\n\t * multiple slides.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onDocumentMouseScroll( event ) {\n\n\t\tif( Date.now() - lastMouseWheelStep > 600 ) {\n\n\t\t\tlastMouseWheelStep = Date.now();\n\n\t\t\tvar delta = event.detail || -event.wheelDelta;\n\t\t\tif( delta > 0 ) {\n\t\t\t\tnavigateNext();\n\t\t\t}\n\t\t\telse if( delta < 0 ) {\n\t\t\t\tnavigatePrev();\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Clicking on the progress bar results in a navigation to the\n\t * closest approximate horizontal slide using this equation:\n\t *\n\t * ( clickX / presentationWidth ) * numberOfSlides\n\t *\n\t * @param {object} event\n\t */\n\tfunction onProgressClicked( event ) {\n\n\t\tonUserInput( event );\n\n\t\tevent.preventDefault();\n\n\t\tvar slidesTotal = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) ).length;\n\t\tvar slideIndex = Math.floor( ( event.clientX / dom.wrapper.offsetWidth ) * slidesTotal );\n\n\t\tif( config.rtl ) {\n\t\t\tslideIndex = slidesTotal - slideIndex;\n\t\t}\n\n\t\tslide( slideIndex );\n\n\t}\n\n\t/**\n\t * Event handler for navigation control buttons.\n\t */\n\tfunction onNavigateLeftClicked( event ) { event.preventDefault(); onUserInput(); config.navigationMode === 'linear' ? navigatePrev() : navigateLeft(); }\n\tfunction onNavigateRightClicked( event ) { event.preventDefault(); onUserInput(); config.navigationMode === 'linear' ? navigateNext() : navigateRight(); }\n\tfunction onNavigateUpClicked( event ) { event.preventDefault(); onUserInput(); navigateUp(); }\n\tfunction onNavigateDownClicked( event ) { event.preventDefault(); onUserInput(); navigateDown(); }\n\tfunction onNavigatePrevClicked( event ) { event.preventDefault(); onUserInput(); navigatePrev(); }\n\tfunction onNavigateNextClicked( event ) { event.preventDefault(); onUserInput(); navigateNext(); }\n\n\t/**\n\t * Handler for the window level 'hashchange' event.\n\t *\n\t * @param {object} [event]\n\t */\n\tfunction onWindowHashChange( event ) {\n\n\t\treadURL();\n\n\t}\n\n\t/**\n\t * Handler for the window level 'resize' event.\n\t *\n\t * @param {object} [event]\n\t */\n\tfunction onWindowResize( event ) {\n\n\t\tlayout();\n\n\t}\n\n\t/**\n\t * Handle for the window level 'visibilitychange' event.\n\t *\n\t * @param {object} [event]\n\t */\n\tfunction onPageVisibilityChange( event ) {\n\n\t\tvar isHidden =  document.webkitHidden ||\n\t\t\tdocument.msHidden ||\n\t\t\tdocument.hidden;\n\n\t\t// If, after clicking a link or similar and we're coming back,\n\t\t// focus the document.body to ensure we can use keyboard shortcuts\n\t\tif( isHidden === false && document.activeElement !== document.body ) {\n\t\t\t// Not all elements support .blur() - SVGs among them.\n\t\t\tif( typeof document.activeElement.blur === 'function' ) {\n\t\t\t\tdocument.activeElement.blur();\n\t\t\t}\n\t\t\tdocument.body.focus();\n\t\t}\n\n\t}\n\n\t/**\n\t * Invoked when a slide is and we're in the overview.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onOverviewSlideClicked( event ) {\n\n\t\t// TODO There's a bug here where the event listeners are not\n\t\t// removed after deactivating the overview.\n\t\tif( eventsAreBound && isOverview() ) {\n\t\t\tevent.preventDefault();\n\n\t\t\tvar element = event.target;\n\n\t\t\twhile( element && !element.nodeName.match( /section/gi ) ) {\n\t\t\t\telement = element.parentNode;\n\t\t\t}\n\n\t\t\tif( element && !element.classList.contains( 'disabled' ) ) {\n\n\t\t\t\tdeactivateOverview();\n\n\t\t\t\tif( element.nodeName.match( /section/gi ) ) {\n\t\t\t\t\tvar h = parseInt( element.getAttribute( 'data-index-h' ), 10 ),\n\t\t\t\t\t\tv = parseInt( element.getAttribute( 'data-index-v' ), 10 );\n\n\t\t\t\t\tslide( h, v );\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Handles clicks on links that are set to preview in the\n\t * iframe overlay.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onPreviewLinkClicked( event ) {\n\n\t\tif( event.currentTarget && event.currentTarget.hasAttribute( 'href' ) ) {\n\t\t\tvar url = event.currentTarget.getAttribute( 'href' );\n\t\t\tif( url ) {\n\t\t\t\tshowPreview( url );\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Handles click on the auto-sliding controls element.\n\t *\n\t * @param {object} [event]\n\t */\n\tfunction onAutoSlidePlayerClick( event ) {\n\n\t\t// Replay\n\t\tif( Reveal.isLastSlide() && config.loop === false ) {\n\t\t\tslide( 0, 0 );\n\t\t\tresumeAutoSlide();\n\t\t}\n\t\t// Resume\n\t\telse if( autoSlidePaused ) {\n\t\t\tresumeAutoSlide();\n\t\t}\n\t\t// Pause\n\t\telse {\n\t\t\tpauseAutoSlide();\n\t\t}\n\n\t}\n\n\n\t// --------------------------------------------------------------------//\n\t// ------------------------ PLAYBACK COMPONENT ------------------------//\n\t// --------------------------------------------------------------------//\n\n\n\t/**\n\t * Constructor for the playback component, which displays\n\t * play/pause/progress controls.\n\t *\n\t * @param {HTMLElement} container The component will append\n\t * itself to this\n\t * @param {function} progressCheck A method which will be\n\t * called frequently to get the current progress on a range\n\t * of 0-1\n\t */\n\tfunction Playback( container, progressCheck ) {\n\n\t\t// Cosmetics\n\t\tthis.diameter = 100;\n\t\tthis.diameter2 = this.diameter/2;\n\t\tthis.thickness = 6;\n\n\t\t// Flags if we are currently playing\n\t\tthis.playing = false;\n\n\t\t// Current progress on a 0-1 range\n\t\tthis.progress = 0;\n\n\t\t// Used to loop the animation smoothly\n\t\tthis.progressOffset = 1;\n\n\t\tthis.container = container;\n\t\tthis.progressCheck = progressCheck;\n\n\t\tthis.canvas = document.createElement( 'canvas' );\n\t\tthis.canvas.className = 'playback';\n\t\tthis.canvas.width = this.diameter;\n\t\tthis.canvas.height = this.diameter;\n\t\tthis.canvas.style.width = this.diameter2 + 'px';\n\t\tthis.canvas.style.height = this.diameter2 + 'px';\n\t\tthis.context = this.canvas.getContext( '2d' );\n\n\t\tthis.container.appendChild( this.canvas );\n\n\t\tthis.render();\n\n\t}\n\n\t/**\n\t * @param value\n\t */\n\tPlayback.prototype.setPlaying = function( value ) {\n\n\t\tvar wasPlaying = this.playing;\n\n\t\tthis.playing = value;\n\n\t\t// Start repainting if we weren't already\n\t\tif( !wasPlaying && this.playing ) {\n\t\t\tthis.animate();\n\t\t}\n\t\telse {\n\t\t\tthis.render();\n\t\t}\n\n\t};\n\n\tPlayback.prototype.animate = function() {\n\n\t\tvar progressBefore = this.progress;\n\n\t\tthis.progress = this.progressCheck();\n\n\t\t// When we loop, offset the progress so that it eases\n\t\t// smoothly rather than immediately resetting\n\t\tif( progressBefore > 0.8 && this.progress < 0.2 ) {\n\t\t\tthis.progressOffset = this.progress;\n\t\t}\n\n\t\tthis.render();\n\n\t\tif( this.playing ) {\n\t\t\tfeatures.requestAnimationFrameMethod.call( window, this.animate.bind( this ) );\n\t\t}\n\n\t};\n\n\t/**\n\t * Renders the current progress and playback state.\n\t */\n\tPlayback.prototype.render = function() {\n\n\t\tvar progress = this.playing ? this.progress : 0,\n\t\t\tradius = ( this.diameter2 ) - this.thickness,\n\t\t\tx = this.diameter2,\n\t\t\ty = this.diameter2,\n\t\t\ticonSize = 28;\n\n\t\t// Ease towards 1\n\t\tthis.progressOffset += ( 1 - this.progressOffset ) * 0.1;\n\n\t\tvar endAngle = ( - Math.PI / 2 ) + ( progress * ( Math.PI * 2 ) );\n\t\tvar startAngle = ( - Math.PI / 2 ) + ( this.progressOffset * ( Math.PI * 2 ) );\n\n\t\tthis.context.save();\n\t\tthis.context.clearRect( 0, 0, this.diameter, this.diameter );\n\n\t\t// Solid background color\n\t\tthis.context.beginPath();\n\t\tthis.context.arc( x, y, radius + 4, 0, Math.PI * 2, false );\n\t\tthis.context.fillStyle = 'rgba( 0, 0, 0, 0.4 )';\n\t\tthis.context.fill();\n\n\t\t// Draw progress track\n\t\tthis.context.beginPath();\n\t\tthis.context.arc( x, y, radius, 0, Math.PI * 2, false );\n\t\tthis.context.lineWidth = this.thickness;\n\t\tthis.context.strokeStyle = 'rgba( 255, 255, 255, 0.2 )';\n\t\tthis.context.stroke();\n\n\t\tif( this.playing ) {\n\t\t\t// Draw progress on top of track\n\t\t\tthis.context.beginPath();\n\t\t\tthis.context.arc( x, y, radius, startAngle, endAngle, false );\n\t\t\tthis.context.lineWidth = this.thickness;\n\t\t\tthis.context.strokeStyle = '#fff';\n\t\t\tthis.context.stroke();\n\t\t}\n\n\t\tthis.context.translate( x - ( iconSize / 2 ), y - ( iconSize / 2 ) );\n\n\t\t// Draw play/pause icons\n\t\tif( this.playing ) {\n\t\t\tthis.context.fillStyle = '#fff';\n\t\t\tthis.context.fillRect( 0, 0, iconSize / 2 - 4, iconSize );\n\t\t\tthis.context.fillRect( iconSize / 2 + 4, 0, iconSize / 2 - 4, iconSize );\n\t\t}\n\t\telse {\n\t\t\tthis.context.beginPath();\n\t\t\tthis.context.translate( 4, 0 );\n\t\t\tthis.context.moveTo( 0, 0 );\n\t\t\tthis.context.lineTo( iconSize - 4, iconSize / 2 );\n\t\t\tthis.context.lineTo( 0, iconSize );\n\t\t\tthis.context.fillStyle = '#fff';\n\t\t\tthis.context.fill();\n\t\t}\n\n\t\tthis.context.restore();\n\n\t};\n\n\tPlayback.prototype.on = function( type, listener ) {\n\t\tthis.canvas.addEventListener( type, listener, false );\n\t};\n\n\tPlayback.prototype.off = function( type, listener ) {\n\t\tthis.canvas.removeEventListener( type, listener, false );\n\t};\n\n\tPlayback.prototype.destroy = function() {\n\n\t\tthis.playing = false;\n\n\t\tif( this.canvas.parentNode ) {\n\t\t\tthis.container.removeChild( this.canvas );\n\t\t}\n\n\t};\n\n\n\t// --------------------------------------------------------------------//\n\t// ------------------------------- API --------------------------------//\n\t// --------------------------------------------------------------------//\n\n\n\tReveal = {\n\t\tVERSION: VERSION,\n\n\t\tinitialize: initialize,\n\t\tconfigure: configure,\n\n\t\tsync: sync,\n\t\tsyncSlide: syncSlide,\n\t\tsyncFragments: syncFragments,\n\n\t\t// Navigation methods\n\t\tslide: slide,\n\t\tleft: navigateLeft,\n\t\tright: navigateRight,\n\t\tup: navigateUp,\n\t\tdown: navigateDown,\n\t\tprev: navigatePrev,\n\t\tnext: navigateNext,\n\n\t\t// Fragment methods\n\t\tnavigateFragment: navigateFragment,\n\t\tprevFragment: previousFragment,\n\t\tnextFragment: nextFragment,\n\n\t\t// Deprecated aliases\n\t\tnavigateTo: slide,\n\t\tnavigateLeft: navigateLeft,\n\t\tnavigateRight: navigateRight,\n\t\tnavigateUp: navigateUp,\n\t\tnavigateDown: navigateDown,\n\t\tnavigatePrev: navigatePrev,\n\t\tnavigateNext: navigateNext,\n\n\t\t// Forces an update in slide layout\n\t\tlayout: layout,\n\n\t\t// Randomizes the order of slides\n\t\tshuffle: shuffle,\n\n\t\t// Returns an object with the available routes as booleans (left/right/top/bottom)\n\t\tavailableRoutes: availableRoutes,\n\n\t\t// Returns an object with the available fragments as booleans (prev/next)\n\t\tavailableFragments: availableFragments,\n\n\t\t// Toggles a help overlay with keyboard shortcuts\n\t\ttoggleHelp: toggleHelp,\n\n\t\t// Toggles the overview mode on/off\n\t\ttoggleOverview: toggleOverview,\n\n\t\t// Toggles the \"black screen\" mode on/off\n\t\ttogglePause: togglePause,\n\n\t\t// Toggles the auto slide mode on/off\n\t\ttoggleAutoSlide: toggleAutoSlide,\n\n\t\t// State checks\n\t\tisOverview: isOverview,\n\t\tisPaused: isPaused,\n\t\tisAutoSliding: isAutoSliding,\n\t\tisSpeakerNotes: isSpeakerNotes,\n\n\t\t// Slide preloading\n\t\tloadSlide: loadSlide,\n\t\tunloadSlide: unloadSlide,\n\n\t\t// Adds or removes all internal event listeners (such as keyboard)\n\t\taddEventListeners: addEventListeners,\n\t\tremoveEventListeners: removeEventListeners,\n\n\t\t// Facility for persisting and restoring the presentation state\n\t\tgetState: getState,\n\t\tsetState: setState,\n\n\t\t// Presentation progress\n\t\tgetSlidePastCount: getSlidePastCount,\n\n\t\t// Presentation progress on range of 0-1\n\t\tgetProgress: getProgress,\n\n\t\t// Returns the indices of the current, or specified, slide\n\t\tgetIndices: getIndices,\n\n\t\t// Returns an Array of all slides\n\t\tgetSlides: getSlides,\n\n\t\t// Returns an Array of objects representing the attributes on\n\t\t// the slides\n\t\tgetSlidesAttributes: getSlidesAttributes,\n\n\t\t// Returns the total number of slides\n\t\tgetTotalSlides: getTotalSlides,\n\n\t\t// Returns the slide element at the specified index\n\t\tgetSlide: getSlide,\n\n\t\t// Returns the slide background element at the specified index\n\t\tgetSlideBackground: getSlideBackground,\n\n\t\t// Returns the speaker notes string for a slide, or null\n\t\tgetSlideNotes: getSlideNotes,\n\n\t\t// Returns an array with all horizontal/vertical slides in the deck\n\t\tgetHorizontalSlides: getHorizontalSlides,\n\t\tgetVerticalSlides: getVerticalSlides,\n\n\t\t// Checks if the presentation contains two or more\n\t\t// horizontal/vertical slides\n\t\thasHorizontalSlides: hasHorizontalSlides,\n\t\thasVerticalSlides: hasVerticalSlides,\n\n\t\t// Returns the previous slide element, may be null\n\t\tgetPreviousSlide: function() {\n\t\t\treturn previousSlide;\n\t\t},\n\n\t\t// Returns the current slide element\n\t\tgetCurrentSlide: function() {\n\t\t\treturn currentSlide;\n\t\t},\n\n\t\t// Returns the current scale of the presentation content\n\t\tgetScale: function() {\n\t\t\treturn scale;\n\t\t},\n\n\t\t// Returns the current configuration object\n\t\tgetConfig: function() {\n\t\t\treturn config;\n\t\t},\n\n\t\t// Helper method, retrieves query string as a key/value hash\n\t\tgetQueryHash: function() {\n\t\t\tvar query = {};\n\n\t\t\tlocation.search.replace( /[A-Z0-9]+?=([\\w\\.%-]*)/gi, function(a) {\n\t\t\t\tquery[ a.split( '=' ).shift() ] = a.split( '=' ).pop();\n\t\t\t} );\n\n\t\t\t// Basic deserialization\n\t\t\tfor( var i in query ) {\n\t\t\t\tvar value = query[ i ];\n\n\t\t\t\tquery[ i ] = deserialize( unescape( value ) );\n\t\t\t}\n\n\t\t\treturn query;\n\t\t},\n\n\t\t// Returns the top-level DOM element\n\t\tgetRevealElement: function() {\n\t\t\treturn dom.wrapper || document.querySelector( '.reveal' );\n\t\t},\n\n\t\t// Returns a hash with all registered plugins\n\t\tgetPlugins: function() {\n\t\t\treturn plugins;\n\t\t},\n\n\t\t// Returns true if we're currently on the first slide\n\t\tisFirstSlide: function() {\n\t\t\treturn ( indexh === 0 && indexv === 0 );\n\t\t},\n\n\t\t// Returns true if we're currently on the last slide\n\t\tisLastSlide: function() {\n\t\t\tif( currentSlide ) {\n\t\t\t\t// Does this slide have a next sibling?\n\t\t\t\tif( currentSlide.nextElementSibling ) return false;\n\n\t\t\t\t// If it's vertical, does its parent have a next sibling?\n\t\t\t\tif( isVerticalSlide( currentSlide ) && currentSlide.parentNode.nextElementSibling ) return false;\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\t// Returns true if we're on the last slide in the current\n\t\t// vertical stack\n\t\tisLastVerticalSlide: function() {\n\t\t\tif( currentSlide && isVerticalSlide( currentSlide ) ) {\n\t\t\t\t// Does this slide have a next sibling?\n\t\t\t\tif( currentSlide.nextElementSibling ) return false;\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\t// Checks if reveal.js has been loaded and is ready for use\n\t\tisReady: function() {\n\t\t\treturn loaded;\n\t\t},\n\n\t\t// Forward event binding to the reveal DOM element\n\t\taddEventListener: function( type, listener, useCapture ) {\n\t\t\tif( 'addEventListener' in window ) {\n\t\t\t\tReveal.getRevealElement().addEventListener( type, listener, useCapture );\n\t\t\t}\n\t\t},\n\t\tremoveEventListener: function( type, listener, useCapture ) {\n\t\t\tif( 'addEventListener' in window ) {\n\t\t\t\tReveal.getRevealElement().removeEventListener( type, listener, useCapture );\n\t\t\t}\n\t\t},\n\n\t\t// Adds/removes a custom key binding\n\t\taddKeyBinding: addKeyBinding,\n\t\tremoveKeyBinding: removeKeyBinding,\n\n\t\t// API for registering and retrieving plugins\n\t\tregisterPlugin: registerPlugin,\n\t\thasPlugin: hasPlugin,\n\t\tgetPlugin: getPlugin,\n\n\t\t// Programmatically triggers a keyboard event\n\t\ttriggerKey: function( keyCode ) {\n\t\t\tonDocumentKeyDown( { keyCode: keyCode } );\n\t\t},\n\n\t\t// Registers a new shortcut to include in the help overlay\n\t\tregisterKeyboardShortcut: function( key, value ) {\n\t\t\tkeyboardShortcuts[key] = value;\n\t\t}\n\t};\n\n\treturn Reveal;\n\n}));\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}